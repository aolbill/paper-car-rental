(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var He=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function If(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Df(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}),n}var Tu={exports:{}},Pi={},Au={exports:{}},z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lr=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Mf=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),$f=Symbol.for("react.profiler"),Bf=Symbol.for("react.provider"),Uf=Symbol.for("react.context"),Ff=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Kf=Symbol.for("react.memo"),Hf=Symbol.for("react.lazy"),Xl=Symbol.iterator;function Wf(t){return t===null||typeof t!="object"?null:(t=Xl&&t[Xl]||t["@@iterator"],typeof t=="function"?t:null)}var Ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Iu=Object.assign,Du={};function is(t,e,n){this.props=t,this.context=e,this.refs=Du,this.updater=n||Ru}is.prototype.isReactComponent={};is.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};is.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Lu(){}Lu.prototype=is.prototype;function Wo(t,e,n){this.props=t,this.context=e,this.refs=Du,this.updater=n||Ru}var Vo=Wo.prototype=new Lu;Vo.constructor=Wo;Iu(Vo,is.prototype);Vo.isPureReactComponent=!0;var Zl=Array.isArray,Mu=Object.prototype.hasOwnProperty,qo={current:null},Ou={key:!0,ref:!0,__self:!0,__source:!0};function $u(t,e,n){var s,i={},a=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Mu.call(e,s)&&!Ou.hasOwnProperty(s)&&(i[s]=e[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:lr,type:t,key:a,ref:o,props:i,_owner:qo.current}}function Vf(t,e){return{$$typeof:lr,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jo(t){return typeof t=="object"&&t!==null&&t.$$typeof===lr}function qf(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ec=/\/+/g;function ta(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qf(""+t.key):e.toString(36)}function zr(t,e,n,s,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lr:case Lf:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+ta(o,0):s,Zl(i)?(n="",t!=null&&(n=t.replace(ec,"$&/")+"/"),zr(i,e,n,"",function(u){return u})):i!=null&&(Jo(i)&&(i=Vf(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ec,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",Zl(t))for(var l=0;l<t.length;l++){a=t[l];var c=s+ta(a,l);o+=zr(a,e,n,c,i)}else if(c=Wf(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=s+ta(a,l++),o+=zr(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wr(t,e,n){if(t==null)return t;var s=[],i=0;return zr(t,s,"","",function(a){return e.call(n,a,i++)}),s}function Jf(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var be={current:null},Kr={transition:null},Gf={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:Kr,ReactCurrentOwner:qo};function Bu(){throw Error("act(...) is not supported in production builds of React.")}z.Children={map:wr,forEach:function(t,e,n){wr(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wr(t,function(){e++}),e},toArray:function(t){return wr(t,function(e){return e})||[]},only:function(t){if(!Jo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};z.Component=is;z.Fragment=Mf;z.Profiler=$f;z.PureComponent=Wo;z.StrictMode=Of;z.Suspense=zf;z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gf;z.act=Bu;z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Iu({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=qo.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Mu.call(e,c)&&!Ou.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:lr,type:t.type,key:i,ref:a,props:s,_owner:o}};z.createContext=function(t){return t={$$typeof:Uf,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bf,_context:t},t.Consumer=t};z.createElement=$u;z.createFactory=function(t){var e=$u.bind(null,t);return e.type=t,e};z.createRef=function(){return{current:null}};z.forwardRef=function(t){return{$$typeof:Ff,render:t}};z.isValidElement=Jo;z.lazy=function(t){return{$$typeof:Hf,_payload:{_status:-1,_result:t},_init:Jf}};z.memo=function(t,e){return{$$typeof:Kf,type:t,compare:e===void 0?null:e}};z.startTransition=function(t){var e=Kr.transition;Kr.transition={};try{t()}finally{Kr.transition=e}};z.unstable_act=Bu;z.useCallback=function(t,e){return be.current.useCallback(t,e)};z.useContext=function(t){return be.current.useContext(t)};z.useDebugValue=function(){};z.useDeferredValue=function(t){return be.current.useDeferredValue(t)};z.useEffect=function(t,e){return be.current.useEffect(t,e)};z.useId=function(){return be.current.useId()};z.useImperativeHandle=function(t,e,n){return be.current.useImperativeHandle(t,e,n)};z.useInsertionEffect=function(t,e){return be.current.useInsertionEffect(t,e)};z.useLayoutEffect=function(t,e){return be.current.useLayoutEffect(t,e)};z.useMemo=function(t,e){return be.current.useMemo(t,e)};z.useReducer=function(t,e,n){return be.current.useReducer(t,e,n)};z.useRef=function(t){return be.current.useRef(t)};z.useState=function(t){return be.current.useState(t)};z.useSyncExternalStore=function(t,e,n){return be.current.useSyncExternalStore(t,e,n)};z.useTransition=function(){return be.current.useTransition()};z.version="18.3.1";Au.exports=z;var v=Au.exports;const Uu=If(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf=v,Qf=Symbol.for("react.element"),Xf=Symbol.for("react.fragment"),Zf=Object.prototype.hasOwnProperty,em=Yf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tm={key:!0,ref:!0,__self:!0,__source:!0};function Fu(t,e,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)Zf.call(e,s)&&!tm.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:Qf,type:t,key:a,ref:o,props:i,_owner:em.current}}Pi.Fragment=Xf;Pi.jsx=Fu;Pi.jsxs=Fu;Tu.exports=Pi;var r=Tu.exports,Oa={},zu={exports:{}},$e={},Ku={exports:{}},Hu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,D){var $=C.length;C.push(D);e:for(;0<$;){var Z=$-1>>>1,ce=C[Z];if(0<i(ce,D))C[Z]=D,C[$]=ce,$=Z;else break e}}function n(C){return C.length===0?null:C[0]}function s(C){if(C.length===0)return null;var D=C[0],$=C.pop();if($!==D){C[0]=$;e:for(var Z=0,ce=C.length,yr=ce>>>1;Z<yr;){var tn=2*(Z+1)-1,ea=C[tn],nn=tn+1,xr=C[nn];if(0>i(ea,$))nn<ce&&0>i(xr,ea)?(C[Z]=xr,C[nn]=$,Z=nn):(C[Z]=ea,C[tn]=$,Z=tn);else if(nn<ce&&0>i(xr,$))C[Z]=xr,C[nn]=$,Z=nn;else break e}}return D}function i(C,D){var $=C.sortIndex-D.sortIndex;return $!==0?$:C.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,x=!1,y=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(C){for(var D=n(u);D!==null;){if(D.callback===null)s(u);else if(D.startTime<=C)s(u),D.sortIndex=D.expirationTime,e(c,D);else break;D=n(u)}}function k(C){if(w=!1,p(C),!y)if(n(c)!==null)y=!0,A(P);else{var D=n(u);D!==null&&B(k,D.startTime-C)}}function P(C,D){y=!1,w&&(w=!1,g(R),R=-1),x=!0;var $=h;try{for(p(D),f=n(c);f!==null&&(!(f.expirationTime>D)||C&&!j());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var ce=Z(f.expirationTime<=D);D=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===n(c)&&s(c),p(D)}else s(c);f=n(c)}if(f!==null)var yr=!0;else{var tn=n(u);tn!==null&&B(k,tn.startTime-D),yr=!1}return yr}finally{f=null,h=$,x=!1}}var _=!1,N=null,R=-1,E=5,T=-1;function j(){return!(t.unstable_now()-T<E)}function S(){if(N!==null){var C=t.unstable_now();T=C;var D=!0;try{D=N(!0,C)}finally{D?L():(_=!1,N=null)}}else _=!1}var L;if(typeof m=="function")L=function(){m(S)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,X=O.port2;O.port1.onmessage=S,L=function(){X.postMessage(null)}}else L=function(){b(S,0)};function A(C){N=C,_||(_=!0,L())}function B(C,D){R=b(function(){C(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,A(P))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(C){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var $=h;h=D;try{return C()}finally{h=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,D){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var $=h;h=C;try{return D()}finally{h=$}},t.unstable_scheduleCallback=function(C,D,$){var Z=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Z+$:Z):$=Z,C){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=$+ce,C={id:d++,callback:D,priorityLevel:C,startTime:$,expirationTime:ce,sortIndex:-1},$>Z?(C.sortIndex=$,e(u,C),n(c)===null&&C===n(u)&&(w?(g(R),R=-1):w=!0,B(k,$-Z))):(C.sortIndex=ce,e(c,C),y||x||(y=!0,A(P))),C},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(C){var D=h;return function(){var $=h;h=D;try{return C.apply(this,arguments)}finally{h=$}}}})(Hu);Ku.exports=Hu;var nm=Ku.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm=v,Me=nm;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wu=new Set,zs={};function wn(t,e){Qn(t,e),Qn(t+"Capture",e)}function Qn(t,e){for(zs[t]=e,t=0;t<e.length;t++)Wu.add(e[t])}var Nt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$a=Object.prototype.hasOwnProperty,rm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tc={},nc={};function im(t){return $a.call(nc,t)?!0:$a.call(tc,t)?!1:rm.test(t)?nc[t]=!0:(tc[t]=!0,!1)}function am(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function om(t,e,n,s){if(e===null||typeof e>"u"||am(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Se(t,e,n,s,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ge[t]=new Se(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ge[e]=new Se(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ge[t]=new Se(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ge[t]=new Se(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ge[t]=new Se(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ge[t]=new Se(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ge[t]=new Se(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ge[t]=new Se(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ge[t]=new Se(t,5,!1,t.toLowerCase(),null,!1,!1)});var Go=/[\-:]([a-z])/g;function Yo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Go,Yo);ge[e]=new Se(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Go,Yo);ge[e]=new Se(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Go,Yo);ge[e]=new Se(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ge[t]=new Se(t,1,!1,t.toLowerCase(),null,!1,!1)});ge.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ge[t]=new Se(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qo(t,e,n,s){var i=ge.hasOwnProperty(e)?ge[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(om(e,n,i,s)&&(n=null),s||i===null?im(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var Et=sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jr=Symbol.for("react.element"),In=Symbol.for("react.portal"),Dn=Symbol.for("react.fragment"),Xo=Symbol.for("react.strict_mode"),Ba=Symbol.for("react.profiler"),Vu=Symbol.for("react.provider"),qu=Symbol.for("react.context"),Zo=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),el=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Ju=Symbol.for("react.offscreen"),sc=Symbol.iterator;function fs(t){return t===null||typeof t!="object"?null:(t=sc&&t[sc]||t["@@iterator"],typeof t=="function"?t:null)}var ne=Object.assign,na;function Ss(t){if(na===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);na=e&&e[1]||""}return`
`+na+t}var sa=!1;function ra(t,e){if(!t||sa)return"";sa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{sa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ss(t):""}function lm(t){switch(t.tag){case 5:return Ss(t.type);case 16:return Ss("Lazy");case 13:return Ss("Suspense");case 19:return Ss("SuspenseList");case 0:case 2:case 15:return t=ra(t.type,!1),t;case 11:return t=ra(t.type.render,!1),t;case 1:return t=ra(t.type,!0),t;default:return""}}function za(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Dn:return"Fragment";case In:return"Portal";case Ba:return"Profiler";case Xo:return"StrictMode";case Ua:return"Suspense";case Fa:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qu:return(t.displayName||"Context")+".Consumer";case Vu:return(t._context.displayName||"Context")+".Provider";case Zo:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case el:return e=t.displayName||null,e!==null?e:za(t.type)||"Memo";case It:e=t._payload,t=t._init;try{return za(t(e))}catch{}}return null}function cm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return za(e);case 8:return e===Xo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Gu(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function um(t){var e=Gu(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kr(t){t._valueTracker||(t._valueTracker=um(t))}function Yu(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=Gu(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function ni(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ka(t,e){var n=e.checked;return ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rc(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Jt(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qu(t,e){e=e.checked,e!=null&&Qo(t,"checked",e,!1)}function Ha(t,e){Qu(t,e);var n=Jt(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wa(t,e.type,Jt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ic(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wa(t,e,n){(e!=="number"||ni(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var _s=Array.isArray;function Wn(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Jt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Va(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ac(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(_s(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Jt(n)}}function Xu(t,e){var n=Jt(e.value),s=Jt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function oc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zu(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zu(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Nr,ed=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Nr=Nr||document.createElement("div"),Nr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ks(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dm=["Webkit","ms","Moz","O"];Object.keys(Ts).forEach(function(t){dm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ts[e]=Ts[t]})});function td(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ts.hasOwnProperty(t)&&Ts[t]?(""+e).trim():e+"px"}function nd(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=td(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var hm=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ja(t,e){if(e){if(hm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Ga(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ya=null;function tl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qa=null,Vn=null,qn=null;function lc(t){if(t=dr(t)){if(typeof Qa!="function")throw Error(I(280));var e=t.stateNode;e&&(e=Di(e),Qa(t.stateNode,t.type,e))}}function sd(t){Vn?qn?qn.push(t):qn=[t]:Vn=t}function rd(){if(Vn){var t=Vn,e=qn;if(qn=Vn=null,lc(t),e)for(t=0;t<e.length;t++)lc(e[t])}}function id(t,e){return t(e)}function ad(){}var ia=!1;function od(t,e,n){if(ia)return t(e,n);ia=!0;try{return id(t,e,n)}finally{ia=!1,(Vn!==null||qn!==null)&&(ad(),rd())}}function Hs(t,e){var n=t.stateNode;if(n===null)return null;var s=Di(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Xa=!1;if(Nt)try{var ms={};Object.defineProperty(ms,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",ms,ms),window.removeEventListener("test",ms,ms)}catch{Xa=!1}function fm(t,e,n,s,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var As=!1,si=null,ri=!1,Za=null,mm={onError:function(t){As=!0,si=t}};function pm(t,e,n,s,i,a,o,l,c){As=!1,si=null,fm.apply(mm,arguments)}function gm(t,e,n,s,i,a,o,l,c){if(pm.apply(this,arguments),As){if(As){var u=si;As=!1,si=null}else throw Error(I(198));ri||(ri=!0,Za=u)}}function jn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ld(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cc(t){if(jn(t)!==t)throw Error(I(188))}function vm(t){var e=t.alternate;if(!e){if(e=jn(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return cc(i),t;if(a===s)return cc(i),e;a=a.sibling}throw Error(I(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==s)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function cd(t){return t=vm(t),t!==null?ud(t):null}function ud(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ud(t);if(e!==null)return e;t=t.sibling}return null}var dd=Me.unstable_scheduleCallback,uc=Me.unstable_cancelCallback,ym=Me.unstable_shouldYield,xm=Me.unstable_requestPaint,re=Me.unstable_now,wm=Me.unstable_getCurrentPriorityLevel,nl=Me.unstable_ImmediatePriority,hd=Me.unstable_UserBlockingPriority,ii=Me.unstable_NormalPriority,jm=Me.unstable_LowPriority,fd=Me.unstable_IdlePriority,Ti=null,dt=null;function km(t){if(dt&&typeof dt.onCommitFiberRoot=="function")try{dt.onCommitFiberRoot(Ti,t,void 0,(t.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:Sm,Nm=Math.log,bm=Math.LN2;function Sm(t){return t>>>=0,t===0?32:31-(Nm(t)/bm|0)|0}var br=64,Sr=4194304;function Cs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ai(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=Cs(l):(a&=o,a!==0&&(s=Cs(a)))}else o=n&~i,o!==0?s=Cs(o):a!==0&&(s=Cs(a));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-et(e),i=1<<n,s|=t[n],e&=~i;return s}function _m(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cm(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-et(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=_m(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function eo(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function md(){var t=br;return br<<=1,!(br&4194240)&&(br=64),t}function aa(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function cr(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-et(e),t[e]=n}function Em(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-et(n),a=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~a}}function sl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-et(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var H=0;function pd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gd,rl,vd,yd,xd,to=!1,_r=[],Ut=null,Ft=null,zt=null,Ws=new Map,Vs=new Map,Lt=[],Pm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dc(t,e){switch(t){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Ft=null;break;case"mouseover":case"mouseout":zt=null;break;case"pointerover":case"pointerout":Ws.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(e.pointerId)}}function ps(t,e,n,s,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},e!==null&&(e=dr(e),e!==null&&rl(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Tm(t,e,n,s,i){switch(e){case"focusin":return Ut=ps(Ut,t,e,n,s,i),!0;case"dragenter":return Ft=ps(Ft,t,e,n,s,i),!0;case"mouseover":return zt=ps(zt,t,e,n,s,i),!0;case"pointerover":var a=i.pointerId;return Ws.set(a,ps(Ws.get(a)||null,t,e,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,Vs.set(a,ps(Vs.get(a)||null,t,e,n,s,i)),!0}return!1}function wd(t){var e=un(t.target);if(e!==null){var n=jn(e);if(n!==null){if(e=n.tag,e===13){if(e=ld(n),e!==null){t.blockedOn=e,xd(t.priority,function(){vd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hr(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=no(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Ya=s,n.target.dispatchEvent(s),Ya=null}else return e=dr(n),e!==null&&rl(e),t.blockedOn=n,!1;e.shift()}return!0}function hc(t,e,n){Hr(t)&&n.delete(e)}function Am(){to=!1,Ut!==null&&Hr(Ut)&&(Ut=null),Ft!==null&&Hr(Ft)&&(Ft=null),zt!==null&&Hr(zt)&&(zt=null),Ws.forEach(hc),Vs.forEach(hc)}function gs(t,e){t.blockedOn===e&&(t.blockedOn=null,to||(to=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,Am)))}function qs(t){function e(i){return gs(i,t)}if(0<_r.length){gs(_r[0],t);for(var n=1;n<_r.length;n++){var s=_r[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ut!==null&&gs(Ut,t),Ft!==null&&gs(Ft,t),zt!==null&&gs(zt,t),Ws.forEach(e),Vs.forEach(e),n=0;n<Lt.length;n++)s=Lt[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Lt.length&&(n=Lt[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&Lt.shift()}var Jn=Et.ReactCurrentBatchConfig,oi=!0;function Rm(t,e,n,s){var i=H,a=Jn.transition;Jn.transition=null;try{H=1,il(t,e,n,s)}finally{H=i,Jn.transition=a}}function Im(t,e,n,s){var i=H,a=Jn.transition;Jn.transition=null;try{H=4,il(t,e,n,s)}finally{H=i,Jn.transition=a}}function il(t,e,n,s){if(oi){var i=no(t,e,n,s);if(i===null)ga(t,e,s,li,n),dc(t,s);else if(Tm(i,t,e,n,s))s.stopPropagation();else if(dc(t,s),e&4&&-1<Pm.indexOf(t)){for(;i!==null;){var a=dr(i);if(a!==null&&gd(a),a=no(t,e,n,s),a===null&&ga(t,e,s,li,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else ga(t,e,s,null,n)}}var li=null;function no(t,e,n,s){if(li=null,t=tl(s),t=un(t),t!==null)if(e=jn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ld(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return li=t,null}function jd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wm()){case nl:return 1;case hd:return 4;case ii:case jm:return 16;case fd:return 536870912;default:return 16}default:return 16}}var $t=null,al=null,Wr=null;function kd(){if(Wr)return Wr;var t,e=al,n=e.length,s,i="value"in $t?$t.value:$t.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[a-s];s++);return Wr=i.slice(t,1<s?1-s:void 0)}function Vr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cr(){return!0}function fc(){return!1}function Be(t){function e(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Cr:fc,this.isPropagationStopped=fc,this}return ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),e}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=Be(as),ur=ne({},as,{view:0,detail:0}),Dm=Be(ur),oa,la,vs,Ai=ne({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ll,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vs&&(vs&&t.type==="mousemove"?(oa=t.screenX-vs.screenX,la=t.screenY-vs.screenY):la=oa=0,vs=t),oa)},movementY:function(t){return"movementY"in t?t.movementY:la}}),mc=Be(Ai),Lm=ne({},Ai,{dataTransfer:0}),Mm=Be(Lm),Om=ne({},ur,{relatedTarget:0}),ca=Be(Om),$m=ne({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),Bm=Be($m),Um=ne({},as,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fm=Be(Um),zm=ne({},as,{data:0}),pc=Be(zm),Km={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wm[t])?!!e[t]:!1}function ll(){return Vm}var qm=ne({},ur,{key:function(t){if(t.key){var e=Km[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ll,charCode:function(t){return t.type==="keypress"?Vr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jm=Be(qm),Gm=ne({},Ai,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gc=Be(Gm),Ym=ne({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ll}),Qm=Be(Ym),Xm=ne({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zm=Be(Xm),ep=ne({},Ai,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tp=Be(ep),np=[9,13,27,32],cl=Nt&&"CompositionEvent"in window,Rs=null;Nt&&"documentMode"in document&&(Rs=document.documentMode);var sp=Nt&&"TextEvent"in window&&!Rs,Nd=Nt&&(!cl||Rs&&8<Rs&&11>=Rs),vc=String.fromCharCode(32),yc=!1;function bd(t,e){switch(t){case"keyup":return np.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ln=!1;function rp(t,e){switch(t){case"compositionend":return Sd(e);case"keypress":return e.which!==32?null:(yc=!0,vc);case"textInput":return t=e.data,t===vc&&yc?null:t;default:return null}}function ip(t,e){if(Ln)return t==="compositionend"||!cl&&bd(t,e)?(t=kd(),Wr=al=$t=null,Ln=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nd&&e.locale!=="ko"?null:e.data;default:return null}}var ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ap[t.type]:e==="textarea"}function _d(t,e,n,s){sd(s),e=ci(e,"onChange"),0<e.length&&(n=new ol("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Is=null,Js=null;function op(t){Od(t,0)}function Ri(t){var e=$n(t);if(Yu(e))return t}function lp(t,e){if(t==="change")return e}var Cd=!1;if(Nt){var ua;if(Nt){var da="oninput"in document;if(!da){var wc=document.createElement("div");wc.setAttribute("oninput","return;"),da=typeof wc.oninput=="function"}ua=da}else ua=!1;Cd=ua&&(!document.documentMode||9<document.documentMode)}function jc(){Is&&(Is.detachEvent("onpropertychange",Ed),Js=Is=null)}function Ed(t){if(t.propertyName==="value"&&Ri(Js)){var e=[];_d(e,Js,t,tl(t)),od(op,e)}}function cp(t,e,n){t==="focusin"?(jc(),Is=e,Js=n,Is.attachEvent("onpropertychange",Ed)):t==="focusout"&&jc()}function up(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ri(Js)}function dp(t,e){if(t==="click")return Ri(e)}function hp(t,e){if(t==="input"||t==="change")return Ri(e)}function fp(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nt=typeof Object.is=="function"?Object.is:fp;function Gs(t,e){if(nt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!$a.call(e,i)||!nt(t[i],e[i]))return!1}return!0}function kc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nc(t,e){var n=kc(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kc(n)}}function Pd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Td(){for(var t=window,e=ni();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ni(t.document)}return e}function ul(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mp(t){var e=Td(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pd(n.ownerDocument.documentElement,n)){if(s!==null&&ul(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!t.extend&&a>s&&(i=s,s=a,a=i),i=Nc(n,a);var o=Nc(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pp=Nt&&"documentMode"in document&&11>=document.documentMode,Mn=null,so=null,Ds=null,ro=!1;function bc(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ro||Mn==null||Mn!==ni(s)||(s=Mn,"selectionStart"in s&&ul(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ds&&Gs(Ds,s)||(Ds=s,s=ci(so,"onSelect"),0<s.length&&(e=new ol("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Mn)))}function Er(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var On={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},ha={},Ad={};Nt&&(Ad=document.createElement("div").style,"AnimationEvent"in window||(delete On.animationend.animation,delete On.animationiteration.animation,delete On.animationstart.animation),"TransitionEvent"in window||delete On.transitionend.transition);function Ii(t){if(ha[t])return ha[t];if(!On[t])return t;var e=On[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ad)return ha[t]=e[n];return t}var Rd=Ii("animationend"),Id=Ii("animationiteration"),Dd=Ii("animationstart"),Ld=Ii("transitionend"),Md=new Map,Sc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yt(t,e){Md.set(t,e),wn(e,[t])}for(var fa=0;fa<Sc.length;fa++){var ma=Sc[fa],gp=ma.toLowerCase(),vp=ma[0].toUpperCase()+ma.slice(1);Yt(gp,"on"+vp)}Yt(Rd,"onAnimationEnd");Yt(Id,"onAnimationIteration");Yt(Dd,"onAnimationStart");Yt("dblclick","onDoubleClick");Yt("focusin","onFocus");Yt("focusout","onBlur");Yt(Ld,"onTransitionEnd");Qn("onMouseEnter",["mouseout","mouseover"]);Qn("onMouseLeave",["mouseout","mouseover"]);Qn("onPointerEnter",["pointerout","pointerover"]);Qn("onPointerLeave",["pointerout","pointerover"]);wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Es));function _c(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,gm(s,e,void 0,t),t.currentTarget=null}function Od(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var a=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;_c(i,l,u),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;_c(i,l,u),a=c}}}if(ri)throw t=Za,ri=!1,Za=null,t}function J(t,e){var n=e[co];n===void 0&&(n=e[co]=new Set);var s=t+"__bubble";n.has(s)||($d(e,t,2,!1),n.add(s))}function pa(t,e,n){var s=0;e&&(s|=4),$d(n,t,s,e)}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Ys(t){if(!t[Pr]){t[Pr]=!0,Wu.forEach(function(n){n!=="selectionchange"&&(yp.has(n)||pa(n,!1,t),pa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pr]||(e[Pr]=!0,pa("selectionchange",!1,e))}}function $d(t,e,n,s){switch(jd(e)){case 1:var i=Rm;break;case 4:i=Im;break;default:i=il}n=i.bind(null,e,n,t),i=void 0,!Xa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ga(t,e,n,s,i){var a=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=un(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}od(function(){var u=a,d=tl(n),f=[];e:{var h=Md.get(t);if(h!==void 0){var x=ol,y=t;switch(t){case"keypress":if(Vr(n)===0)break e;case"keydown":case"keyup":x=Jm;break;case"focusin":y="focus",x=ca;break;case"focusout":y="blur",x=ca;break;case"beforeblur":case"afterblur":x=ca;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=mc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Mm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Qm;break;case Rd:case Id:case Dd:x=Bm;break;case Ld:x=Zm;break;case"scroll":x=Dm;break;case"wheel":x=tp;break;case"copy":case"cut":case"paste":x=Fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=gc}var w=(e&4)!==0,b=!w&&t==="scroll",g=w?h!==null?h+"Capture":null:h;w=[];for(var m=u,p;m!==null;){p=m;var k=p.stateNode;if(p.tag===5&&k!==null&&(p=k,g!==null&&(k=Hs(m,g),k!=null&&w.push(Qs(m,k,p)))),b)break;m=m.return}0<w.length&&(h=new x(h,y,null,n,d),f.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",h&&n!==Ya&&(y=n.relatedTarget||n.fromElement)&&(un(y)||y[bt]))break e;if((x||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=u,y=y?un(y):null,y!==null&&(b=jn(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(w=mc,k="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=gc,k="onPointerLeave",g="onPointerEnter",m="pointer"),b=x==null?h:$n(x),p=y==null?h:$n(y),h=new w(k,m+"leave",x,n,d),h.target=b,h.relatedTarget=p,k=null,un(d)===u&&(w=new w(g,m+"enter",y,n,d),w.target=p,w.relatedTarget=b,k=w),b=k,x&&y)t:{for(w=x,g=y,m=0,p=w;p;p=bn(p))m++;for(p=0,k=g;k;k=bn(k))p++;for(;0<m-p;)w=bn(w),m--;for(;0<p-m;)g=bn(g),p--;for(;m--;){if(w===g||g!==null&&w===g.alternate)break t;w=bn(w),g=bn(g)}w=null}else w=null;x!==null&&Cc(f,h,x,w,!1),y!==null&&b!==null&&Cc(f,b,y,w,!0)}}e:{if(h=u?$n(u):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var P=lp;else if(xc(h))if(Cd)P=hp;else{P=up;var _=cp}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(P=dp);if(P&&(P=P(t,u))){_d(f,P,n,d);break e}_&&_(t,h,u),t==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Wa(h,"number",h.value)}switch(_=u?$n(u):window,t){case"focusin":(xc(_)||_.contentEditable==="true")&&(Mn=_,so=u,Ds=null);break;case"focusout":Ds=so=Mn=null;break;case"mousedown":ro=!0;break;case"contextmenu":case"mouseup":case"dragend":ro=!1,bc(f,n,d);break;case"selectionchange":if(pp)break;case"keydown":case"keyup":bc(f,n,d)}var N;if(cl)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ln?bd(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(Nd&&n.locale!=="ko"&&(Ln||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ln&&(N=kd()):($t=d,al="value"in $t?$t.value:$t.textContent,Ln=!0)),_=ci(u,R),0<_.length&&(R=new pc(R,t,null,n,d),f.push({event:R,listeners:_}),N?R.data=N:(N=Sd(n),N!==null&&(R.data=N)))),(N=sp?rp(t,n):ip(t,n))&&(u=ci(u,"onBeforeInput"),0<u.length&&(d=new pc("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}Od(f,e)})}function Qs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ci(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Hs(t,n),a!=null&&s.unshift(Qs(t,a,i)),a=Hs(t,e),a!=null&&s.push(Qs(t,a,i))),t=t.return}return s}function bn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cc(t,e,n,s,i){for(var a=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,i?(c=Hs(n,a),c!=null&&o.unshift(Qs(n,c,l))):i||(c=Hs(n,a),c!=null&&o.push(Qs(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xp=/\r\n?/g,wp=/\u0000|\uFFFD/g;function Ec(t){return(typeof t=="string"?t:""+t).replace(xp,`
`).replace(wp,"")}function Tr(t,e,n){if(e=Ec(e),Ec(t)!==e&&n)throw Error(I(425))}function ui(){}var io=null,ao=null;function oo(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lo=typeof setTimeout=="function"?setTimeout:void 0,jp=typeof clearTimeout=="function"?clearTimeout:void 0,Pc=typeof Promise=="function"?Promise:void 0,kp=typeof queueMicrotask=="function"?queueMicrotask:typeof Pc<"u"?function(t){return Pc.resolve(null).then(t).catch(Np)}:lo;function Np(t){setTimeout(function(){throw t})}function va(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),qs(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);qs(e)}function Kt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Tc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var os=Math.random().toString(36).slice(2),ut="__reactFiber$"+os,Xs="__reactProps$"+os,bt="__reactContainer$"+os,co="__reactEvents$"+os,bp="__reactListeners$"+os,Sp="__reactHandles$"+os;function un(t){var e=t[ut];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bt]||n[ut]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Tc(t);t!==null;){if(n=t[ut])return n;t=Tc(t)}return e}t=n,n=t.parentNode}return null}function dr(t){return t=t[ut]||t[bt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $n(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function Di(t){return t[Xs]||null}var uo=[],Bn=-1;function Qt(t){return{current:t}}function G(t){0>Bn||(t.current=uo[Bn],uo[Bn]=null,Bn--)}function V(t,e){Bn++,uo[Bn]=t.current,t.current=e}var Gt={},we=Qt(Gt),Te=Qt(!1),pn=Gt;function Xn(t,e){var n=t.type.contextTypes;if(!n)return Gt;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ae(t){return t=t.childContextTypes,t!=null}function di(){G(Te),G(we)}function Ac(t,e,n){if(we.current!==Gt)throw Error(I(168));V(we,e),V(Te,n)}function Bd(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(I(108,cm(t)||"Unknown",i));return ne({},n,s)}function hi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gt,pn=we.current,V(we,t),V(Te,Te.current),!0}function Rc(t,e,n){var s=t.stateNode;if(!s)throw Error(I(169));n?(t=Bd(t,e,pn),s.__reactInternalMemoizedMergedChildContext=t,G(Te),G(we),V(we,t)):G(Te),V(Te,n)}var yt=null,Li=!1,ya=!1;function Ud(t){yt===null?yt=[t]:yt.push(t)}function _p(t){Li=!0,Ud(t)}function Xt(){if(!ya&&yt!==null){ya=!0;var t=0,e=H;try{var n=yt;for(H=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}yt=null,Li=!1}catch(i){throw yt!==null&&(yt=yt.slice(t+1)),dd(nl,Xt),i}finally{H=e,ya=!1}}return null}var Un=[],Fn=0,fi=null,mi=0,Ue=[],Fe=0,gn=null,xt=1,wt="";function an(t,e){Un[Fn++]=mi,Un[Fn++]=fi,fi=t,mi=e}function Fd(t,e,n){Ue[Fe++]=xt,Ue[Fe++]=wt,Ue[Fe++]=gn,gn=t;var s=xt;t=wt;var i=32-et(s)-1;s&=~(1<<i),n+=1;var a=32-et(e)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,xt=1<<32-et(e)+i|n<<i|s,wt=a+t}else xt=1<<a|n<<i|s,wt=t}function dl(t){t.return!==null&&(an(t,1),Fd(t,1,0))}function hl(t){for(;t===fi;)fi=Un[--Fn],Un[Fn]=null,mi=Un[--Fn],Un[Fn]=null;for(;t===gn;)gn=Ue[--Fe],Ue[Fe]=null,wt=Ue[--Fe],Ue[Fe]=null,xt=Ue[--Fe],Ue[Fe]=null}var Le=null,De=null,Y=!1,Ze=null;function zd(t,e){var n=ze(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ic(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Le=t,De=Kt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Le=t,De=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gn!==null?{id:xt,overflow:wt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ze(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Le=t,De=null,!0):!1;default:return!1}}function ho(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fo(t){if(Y){var e=De;if(e){var n=e;if(!Ic(t,e)){if(ho(t))throw Error(I(418));e=Kt(n.nextSibling);var s=Le;e&&Ic(t,e)?zd(s,n):(t.flags=t.flags&-4097|2,Y=!1,Le=t)}}else{if(ho(t))throw Error(I(418));t.flags=t.flags&-4097|2,Y=!1,Le=t}}}function Dc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Le=t}function Ar(t){if(t!==Le)return!1;if(!Y)return Dc(t),Y=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!oo(t.type,t.memoizedProps)),e&&(e=De)){if(ho(t))throw Kd(),Error(I(418));for(;e;)zd(t,e),e=Kt(e.nextSibling)}if(Dc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){De=Kt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}De=null}}else De=Le?Kt(t.stateNode.nextSibling):null;return!0}function Kd(){for(var t=De;t;)t=Kt(t.nextSibling)}function Zn(){De=Le=null,Y=!1}function fl(t){Ze===null?Ze=[t]:Ze.push(t)}var Cp=Et.ReactCurrentBatchConfig;function ys(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var s=n.stateNode}if(!s)throw Error(I(147,t));var i=s,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function Rr(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lc(t){var e=t._init;return e(t._payload)}function Hd(t){function e(g,m){if(t){var p=g.deletions;p===null?(g.deletions=[m],g.flags|=16):p.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function s(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=qt(g,m),g.index=0,g.sibling=null,g}function a(g,m,p){return g.index=p,t?(p=g.alternate,p!==null?(p=p.index,p<m?(g.flags|=2,m):p):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,m,p,k){return m===null||m.tag!==6?(m=Sa(p,g.mode,k),m.return=g,m):(m=i(m,p),m.return=g,m)}function c(g,m,p,k){var P=p.type;return P===Dn?d(g,m,p.props.children,k,p.key):m!==null&&(m.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===It&&Lc(P)===m.type)?(k=i(m,p.props),k.ref=ys(g,m,p),k.return=g,k):(k=Zr(p.type,p.key,p.props,null,g.mode,k),k.ref=ys(g,m,p),k.return=g,k)}function u(g,m,p,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==p.containerInfo||m.stateNode.implementation!==p.implementation?(m=_a(p,g.mode,k),m.return=g,m):(m=i(m,p.children||[]),m.return=g,m)}function d(g,m,p,k,P){return m===null||m.tag!==7?(m=mn(p,g.mode,k,P),m.return=g,m):(m=i(m,p),m.return=g,m)}function f(g,m,p){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Sa(""+m,g.mode,p),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case jr:return p=Zr(m.type,m.key,m.props,null,g.mode,p),p.ref=ys(g,null,m),p.return=g,p;case In:return m=_a(m,g.mode,p),m.return=g,m;case It:var k=m._init;return f(g,k(m._payload),p)}if(_s(m)||fs(m))return m=mn(m,g.mode,p,null),m.return=g,m;Rr(g,m)}return null}function h(g,m,p,k){var P=m!==null?m.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return P!==null?null:l(g,m,""+p,k);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case jr:return p.key===P?c(g,m,p,k):null;case In:return p.key===P?u(g,m,p,k):null;case It:return P=p._init,h(g,m,P(p._payload),k)}if(_s(p)||fs(p))return P!==null?null:d(g,m,p,k,null);Rr(g,p)}return null}function x(g,m,p,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(p)||null,l(m,g,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case jr:return g=g.get(k.key===null?p:k.key)||null,c(m,g,k,P);case In:return g=g.get(k.key===null?p:k.key)||null,u(m,g,k,P);case It:var _=k._init;return x(g,m,p,_(k._payload),P)}if(_s(k)||fs(k))return g=g.get(p)||null,d(m,g,k,P,null);Rr(m,k)}return null}function y(g,m,p,k){for(var P=null,_=null,N=m,R=m=0,E=null;N!==null&&R<p.length;R++){N.index>R?(E=N,N=null):E=N.sibling;var T=h(g,N,p[R],k);if(T===null){N===null&&(N=E);break}t&&N&&T.alternate===null&&e(g,N),m=a(T,m,R),_===null?P=T:_.sibling=T,_=T,N=E}if(R===p.length)return n(g,N),Y&&an(g,R),P;if(N===null){for(;R<p.length;R++)N=f(g,p[R],k),N!==null&&(m=a(N,m,R),_===null?P=N:_.sibling=N,_=N);return Y&&an(g,R),P}for(N=s(g,N);R<p.length;R++)E=x(N,g,R,p[R],k),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?R:E.key),m=a(E,m,R),_===null?P=E:_.sibling=E,_=E);return t&&N.forEach(function(j){return e(g,j)}),Y&&an(g,R),P}function w(g,m,p,k){var P=fs(p);if(typeof P!="function")throw Error(I(150));if(p=P.call(p),p==null)throw Error(I(151));for(var _=P=null,N=m,R=m=0,E=null,T=p.next();N!==null&&!T.done;R++,T=p.next()){N.index>R?(E=N,N=null):E=N.sibling;var j=h(g,N,T.value,k);if(j===null){N===null&&(N=E);break}t&&N&&j.alternate===null&&e(g,N),m=a(j,m,R),_===null?P=j:_.sibling=j,_=j,N=E}if(T.done)return n(g,N),Y&&an(g,R),P;if(N===null){for(;!T.done;R++,T=p.next())T=f(g,T.value,k),T!==null&&(m=a(T,m,R),_===null?P=T:_.sibling=T,_=T);return Y&&an(g,R),P}for(N=s(g,N);!T.done;R++,T=p.next())T=x(N,g,R,T.value,k),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?R:T.key),m=a(T,m,R),_===null?P=T:_.sibling=T,_=T);return t&&N.forEach(function(S){return e(g,S)}),Y&&an(g,R),P}function b(g,m,p,k){if(typeof p=="object"&&p!==null&&p.type===Dn&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case jr:e:{for(var P=p.key,_=m;_!==null;){if(_.key===P){if(P=p.type,P===Dn){if(_.tag===7){n(g,_.sibling),m=i(_,p.props.children),m.return=g,g=m;break e}}else if(_.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===It&&Lc(P)===_.type){n(g,_.sibling),m=i(_,p.props),m.ref=ys(g,_,p),m.return=g,g=m;break e}n(g,_);break}else e(g,_);_=_.sibling}p.type===Dn?(m=mn(p.props.children,g.mode,k,p.key),m.return=g,g=m):(k=Zr(p.type,p.key,p.props,null,g.mode,k),k.ref=ys(g,m,p),k.return=g,g=k)}return o(g);case In:e:{for(_=p.key;m!==null;){if(m.key===_)if(m.tag===4&&m.stateNode.containerInfo===p.containerInfo&&m.stateNode.implementation===p.implementation){n(g,m.sibling),m=i(m,p.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=_a(p,g.mode,k),m.return=g,g=m}return o(g);case It:return _=p._init,b(g,m,_(p._payload),k)}if(_s(p))return y(g,m,p,k);if(fs(p))return w(g,m,p,k);Rr(g,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,p),m.return=g,g=m):(n(g,m),m=Sa(p,g.mode,k),m.return=g,g=m),o(g)):n(g,m)}return b}var es=Hd(!0),Wd=Hd(!1),pi=Qt(null),gi=null,zn=null,ml=null;function pl(){ml=zn=gi=null}function gl(t){var e=pi.current;G(pi),t._currentValue=e}function mo(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Gn(t,e){gi=t,ml=zn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pe=!0),t.firstContext=null)}function We(t){var e=t._currentValue;if(ml!==t)if(t={context:t,memoizedValue:e,next:null},zn===null){if(gi===null)throw Error(I(308));zn=t,gi.dependencies={lanes:0,firstContext:t}}else zn=zn.next=t;return e}var dn=null;function vl(t){dn===null?dn=[t]:dn.push(t)}function Vd(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,vl(e)):(n.next=i.next,i.next=n),e.interleaved=n,St(t,s)}function St(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dt=!1;function yl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qd(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function jt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ht(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,K&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,St(t,n)}return i=s.interleaved,i===null?(e.next=e,vl(s)):(e.next=i.next,i.next=e),s.interleaved=e,St(t,n)}function qr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,sl(t,n)}}function Mc(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function vi(t,e,n,s){var i=t.updateQueue;Dt=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=i.baseState;o=0,d=u=c=null,l=a;do{var h=l.lane,x=l.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,w=l;switch(h=e,x=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(x,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(x,f,h):y,h==null)break e;f=ne({},f,h);break e;case 2:Dt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=f):d=d.next=x,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);yn|=o,t.lanes=o,t.memoizedState=f}}function Oc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(I(191,i));i.call(s)}}}var hr={},ht=Qt(hr),Zs=Qt(hr),er=Qt(hr);function hn(t){if(t===hr)throw Error(I(174));return t}function xl(t,e){switch(V(er,e),V(Zs,t),V(ht,hr),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qa(e,t)}G(ht),V(ht,e)}function ts(){G(ht),G(Zs),G(er)}function Jd(t){hn(er.current);var e=hn(ht.current),n=qa(e,t.type);e!==n&&(V(Zs,t),V(ht,n))}function wl(t){Zs.current===t&&(G(ht),G(Zs))}var ee=Qt(0);function yi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xa=[];function jl(){for(var t=0;t<xa.length;t++)xa[t]._workInProgressVersionPrimary=null;xa.length=0}var Jr=Et.ReactCurrentDispatcher,wa=Et.ReactCurrentBatchConfig,vn=0,te=null,oe=null,de=null,xi=!1,Ls=!1,tr=0,Ep=0;function ve(){throw Error(I(321))}function kl(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nt(t[n],e[n]))return!1;return!0}function Nl(t,e,n,s,i,a){if(vn=a,te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jr.current=t===null||t.memoizedState===null?Rp:Ip,t=n(s,i),Ls){a=0;do{if(Ls=!1,tr=0,25<=a)throw Error(I(301));a+=1,de=oe=null,e.updateQueue=null,Jr.current=Dp,t=n(s,i)}while(Ls)}if(Jr.current=wi,e=oe!==null&&oe.next!==null,vn=0,de=oe=te=null,xi=!1,e)throw Error(I(300));return t}function bl(){var t=tr!==0;return tr=0,t}function lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return de===null?te.memoizedState=de=t:de=de.next=t,de}function Ve(){if(oe===null){var t=te.alternate;t=t!==null?t.memoizedState:null}else t=oe.next;var e=de===null?te.memoizedState:de.next;if(e!==null)de=e,oe=t;else{if(t===null)throw Error(I(310));oe=t,t={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},de===null?te.memoizedState=de=t:de=de.next=t}return de}function nr(t,e){return typeof e=="function"?e(t):e}function ja(t){var e=Ve(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=oe,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((vn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,te.lanes|=d,yn|=d}u=u.next}while(u!==null&&u!==a);c===null?o=s:c.next=l,nt(s,e.memoizedState)||(Pe=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do a=i.lane,te.lanes|=a,yn|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ka(t){var e=Ve(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);nt(a,e.memoizedState)||(Pe=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,s]}function Gd(){}function Yd(t,e){var n=te,s=Ve(),i=e(),a=!nt(s.memoizedState,i);if(a&&(s.memoizedState=i,Pe=!0),s=s.queue,Sl(Zd.bind(null,n,s,t),[t]),s.getSnapshot!==e||a||de!==null&&de.memoizedState.tag&1){if(n.flags|=2048,sr(9,Xd.bind(null,n,s,i,e),void 0,null),he===null)throw Error(I(349));vn&30||Qd(n,e,i)}return i}function Qd(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Xd(t,e,n,s){e.value=n,e.getSnapshot=s,eh(e)&&th(t)}function Zd(t,e,n){return n(function(){eh(e)&&th(t)})}function eh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nt(t,n)}catch{return!0}}function th(t){var e=St(t,1);e!==null&&tt(e,t,1,-1)}function $c(t){var e=lt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:t},e.queue=t,t=t.dispatch=Ap.bind(null,te,t),[e.memoizedState,t]}function sr(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=te.updateQueue,e===null?(e={lastEffect:null,stores:null},te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function nh(){return Ve().memoizedState}function Gr(t,e,n,s){var i=lt();te.flags|=t,i.memoizedState=sr(1|e,n,void 0,s===void 0?null:s)}function Mi(t,e,n,s){var i=Ve();s=s===void 0?null:s;var a=void 0;if(oe!==null){var o=oe.memoizedState;if(a=o.destroy,s!==null&&kl(s,o.deps)){i.memoizedState=sr(e,n,a,s);return}}te.flags|=t,i.memoizedState=sr(1|e,n,a,s)}function Bc(t,e){return Gr(8390656,8,t,e)}function Sl(t,e){return Mi(2048,8,t,e)}function sh(t,e){return Mi(4,2,t,e)}function rh(t,e){return Mi(4,4,t,e)}function ih(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ah(t,e,n){return n=n!=null?n.concat([t]):null,Mi(4,4,ih.bind(null,e,t),n)}function _l(){}function oh(t,e){var n=Ve();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&kl(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function lh(t,e){var n=Ve();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&kl(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function ch(t,e,n){return vn&21?(nt(n,e)||(n=md(),te.lanes|=n,yn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pe=!0),t.memoizedState=n)}function Pp(t,e){var n=H;H=n!==0&&4>n?n:4,t(!0);var s=wa.transition;wa.transition={};try{t(!1),e()}finally{H=n,wa.transition=s}}function uh(){return Ve().memoizedState}function Tp(t,e,n){var s=Vt(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},dh(t))hh(e,n);else if(n=Vd(t,e,n,s),n!==null){var i=Ne();tt(n,t,s,i),fh(n,e,s)}}function Ap(t,e,n){var s=Vt(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(dh(t))hh(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,nt(l,o)){var c=e.interleaved;c===null?(i.next=i,vl(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Vd(t,e,i,s),n!==null&&(i=Ne(),tt(n,t,s,i),fh(n,e,s))}}function dh(t){var e=t.alternate;return t===te||e!==null&&e===te}function hh(t,e){Ls=xi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fh(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,sl(t,n)}}var wi={readContext:We,useCallback:ve,useContext:ve,useEffect:ve,useImperativeHandle:ve,useInsertionEffect:ve,useLayoutEffect:ve,useMemo:ve,useReducer:ve,useRef:ve,useState:ve,useDebugValue:ve,useDeferredValue:ve,useTransition:ve,useMutableSource:ve,useSyncExternalStore:ve,useId:ve,unstable_isNewReconciler:!1},Rp={readContext:We,useCallback:function(t,e){return lt().memoizedState=[t,e===void 0?null:e],t},useContext:We,useEffect:Bc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Gr(4194308,4,ih.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Gr(4194308,4,t,e)},useInsertionEffect:function(t,e){return Gr(4,2,t,e)},useMemo:function(t,e){var n=lt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=lt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=Tp.bind(null,te,t),[s.memoizedState,t]},useRef:function(t){var e=lt();return t={current:t},e.memoizedState=t},useState:$c,useDebugValue:_l,useDeferredValue:function(t){return lt().memoizedState=t},useTransition:function(){var t=$c(!1),e=t[0];return t=Pp.bind(null,t[1]),lt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=te,i=lt();if(Y){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),he===null)throw Error(I(349));vn&30||Qd(s,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,Bc(Zd.bind(null,s,a,t),[t]),s.flags|=2048,sr(9,Xd.bind(null,s,a,n,e),void 0,null),n},useId:function(){var t=lt(),e=he.identifierPrefix;if(Y){var n=wt,s=xt;n=(s&~(1<<32-et(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=tr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ep++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ip={readContext:We,useCallback:oh,useContext:We,useEffect:Sl,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:lh,useReducer:ja,useRef:nh,useState:function(){return ja(nr)},useDebugValue:_l,useDeferredValue:function(t){var e=Ve();return ch(e,oe.memoizedState,t)},useTransition:function(){var t=ja(nr)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:Gd,useSyncExternalStore:Yd,useId:uh,unstable_isNewReconciler:!1},Dp={readContext:We,useCallback:oh,useContext:We,useEffect:Sl,useImperativeHandle:ah,useInsertionEffect:sh,useLayoutEffect:rh,useMemo:lh,useReducer:ka,useRef:nh,useState:function(){return ka(nr)},useDebugValue:_l,useDeferredValue:function(t){var e=Ve();return oe===null?e.memoizedState=t:ch(e,oe.memoizedState,t)},useTransition:function(){var t=ka(nr)[0],e=Ve().memoizedState;return[t,e]},useMutableSource:Gd,useSyncExternalStore:Yd,useId:uh,unstable_isNewReconciler:!1};function Ye(t,e){if(t&&t.defaultProps){e=ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function po(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Oi={isMounted:function(t){return(t=t._reactInternals)?jn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Ne(),i=Vt(t),a=jt(s,i);a.payload=e,n!=null&&(a.callback=n),e=Ht(t,a,i),e!==null&&(tt(e,t,i,s),qr(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Ne(),i=Vt(t),a=jt(s,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ht(t,a,i),e!==null&&(tt(e,t,i,s),qr(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ne(),s=Vt(t),i=jt(n,s);i.tag=2,e!=null&&(i.callback=e),e=Ht(t,i,s),e!==null&&(tt(e,t,s,n),qr(e,t,s))}};function Uc(t,e,n,s,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,a,o):e.prototype&&e.prototype.isPureReactComponent?!Gs(n,s)||!Gs(i,a):!0}function mh(t,e,n){var s=!1,i=Gt,a=e.contextType;return typeof a=="object"&&a!==null?a=We(a):(i=Ae(e)?pn:we.current,s=e.contextTypes,a=(s=s!=null)?Xn(t,i):Gt),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Oi,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function Fc(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Oi.enqueueReplaceState(e,e.state,null)}function go(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},yl(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=We(a):(a=Ae(e)?pn:we.current,i.context=Xn(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(po(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Oi.enqueueReplaceState(i,i.state,null),vi(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ns(t,e){try{var n="",s=e;do n+=lm(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Na(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vo(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lp=typeof WeakMap=="function"?WeakMap:Map;function ph(t,e,n){n=jt(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){ki||(ki=!0,Co=s),vo(t,e)},n}function gh(t,e,n){n=jt(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){vo(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){vo(t,e),typeof s!="function"&&(Wt===null?Wt=new Set([this]):Wt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zc(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new Lp;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=Gp.bind(null,t,e,n),e.then(t,t))}function Kc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hc(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=jt(-1,1),e.tag=2,Ht(n,e,1))),n.lanes|=1),t)}var Mp=Et.ReactCurrentOwner,Pe=!1;function ke(t,e,n,s){e.child=t===null?Wd(e,null,n,s):es(e,t.child,n,s)}function Wc(t,e,n,s,i){n=n.render;var a=e.ref;return Gn(e,i),s=Nl(t,e,n,s,a,i),n=bl(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_t(t,e,i)):(Y&&n&&dl(e),e.flags|=1,ke(t,e,s,i),e.child)}function Vc(t,e,n,s,i){if(t===null){var a=n.type;return typeof a=="function"&&!Dl(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,vh(t,e,a,s,i)):(t=Zr(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Gs,n(o,s)&&t.ref===e.ref)return _t(t,e,i)}return e.flags|=1,t=qt(a,s),t.ref=e.ref,t.return=e,e.child=t}function vh(t,e,n,s,i){if(t!==null){var a=t.memoizedProps;if(Gs(a,s)&&t.ref===e.ref)if(Pe=!1,e.pendingProps=s=a,(t.lanes&i)!==0)t.flags&131072&&(Pe=!0);else return e.lanes=t.lanes,_t(t,e,i)}return yo(t,e,n,s,i)}function yh(t,e,n){var s=e.pendingProps,i=s.children,a=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},V(Hn,Ie),Ie|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,V(Hn,Ie),Ie|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,V(Hn,Ie),Ie|=s}else a!==null?(s=a.baseLanes|n,e.memoizedState=null):s=n,V(Hn,Ie),Ie|=s;return ke(t,e,i,n),e.child}function xh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yo(t,e,n,s,i){var a=Ae(n)?pn:we.current;return a=Xn(e,a),Gn(e,i),n=Nl(t,e,n,s,a,i),s=bl(),t!==null&&!Pe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_t(t,e,i)):(Y&&s&&dl(e),e.flags|=1,ke(t,e,n,i),e.child)}function qc(t,e,n,s,i){if(Ae(n)){var a=!0;hi(e)}else a=!1;if(Gn(e,i),e.stateNode===null)Yr(t,e),mh(e,n,s),go(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=We(u):(u=Ae(n)?pn:we.current,u=Xn(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Fc(e,o,s,u),Dt=!1;var h=e.memoizedState;o.state=h,vi(e,s,o,i),c=e.memoizedState,l!==s||h!==c||Te.current||Dt?(typeof d=="function"&&(po(e,n,d,s),c=e.memoizedState),(l=Dt||Uc(e,n,l,s,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,qd(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ye(e.type,l),o.props=u,f=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=We(c):(c=Ae(n)?pn:we.current,c=Xn(e,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Fc(e,o,s,c),Dt=!1,h=e.memoizedState,o.state=h,vi(e,s,o,i);var y=e.memoizedState;l!==f||h!==y||Te.current||Dt?(typeof x=="function"&&(po(e,n,x,s),y=e.memoizedState),(u=Dt||Uc(e,n,u,s,h,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return xo(t,e,n,s,a,i)}function xo(t,e,n,s,i,a){xh(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&Rc(e,n,!1),_t(t,e,a);s=e.stateNode,Mp.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=es(e,t.child,null,a),e.child=es(e,null,l,a)):ke(t,e,l,a),e.memoizedState=s.state,i&&Rc(e,n,!0),e.child}function wh(t){var e=t.stateNode;e.pendingContext?Ac(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ac(t,e.context,!1),xl(t,e.containerInfo)}function Jc(t,e,n,s,i){return Zn(),fl(i),e.flags|=256,ke(t,e,n,s),e.child}var wo={dehydrated:null,treeContext:null,retryLane:0};function jo(t){return{baseLanes:t,cachePool:null,transitions:null}}function jh(t,e,n){var s=e.pendingProps,i=ee.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),V(ee,i&1),t===null)return fo(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,a?(s=e.mode,a=e.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Ui(o,s,0,null),t=mn(t,s,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=jo(n),e.memoizedState=wo,t):Cl(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Op(t,e,o,s,l,i,n);if(a){a=s.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=qt(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=qt(l,a):(a=mn(a,o,n,null),a.flags|=2),a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,o=t.child.memoizedState,o=o===null?jo(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=wo,s}return a=t.child,t=a.sibling,s=qt(a,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function Cl(t,e){return e=Ui({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ir(t,e,n,s){return s!==null&&fl(s),es(e,t.child,null,n),t=Cl(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Op(t,e,n,s,i,a,o){if(n)return e.flags&256?(e.flags&=-257,s=Na(Error(I(422))),Ir(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=s.fallback,i=e.mode,s=Ui({mode:"visible",children:s.children},i,0,null),a=mn(a,i,o,null),a.flags|=2,s.return=e,a.return=e,s.sibling=a,e.child=s,e.mode&1&&es(e,t.child,null,o),e.child.memoizedState=jo(o),e.memoizedState=wo,a);if(!(e.mode&1))return Ir(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(I(419)),s=Na(a,s,void 0),Ir(t,e,o,s)}if(l=(o&t.childLanes)!==0,Pe||l){if(s=he,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,St(t,i),tt(s,t,i,-1))}return Il(),s=Na(Error(I(421))),Ir(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Yp.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,De=Kt(i.nextSibling),Le=e,Y=!0,Ze=null,t!==null&&(Ue[Fe++]=xt,Ue[Fe++]=wt,Ue[Fe++]=gn,xt=t.id,wt=t.overflow,gn=e),e=Cl(e,s.children),e.flags|=4096,e)}function Gc(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),mo(t.return,e,n)}function ba(t,e,n,s,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function kh(t,e,n){var s=e.pendingProps,i=s.revealOrder,a=s.tail;if(ke(t,e,s.children,n),s=ee.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gc(t,n,e);else if(t.tag===19)Gc(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(V(ee,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yi(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ba(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yi(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ba(e,!0,n,null,a);break;case"together":ba(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _t(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=qt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=qt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $p(t,e,n){switch(e.tag){case 3:wh(e),Zn();break;case 5:Jd(e);break;case 1:Ae(e.type)&&hi(e);break;case 4:xl(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;V(pi,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(V(ee,ee.current&1),e.flags|=128,null):n&e.child.childLanes?jh(t,e,n):(V(ee,ee.current&1),t=_t(t,e,n),t!==null?t.sibling:null);V(ee,ee.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return kh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(ee,ee.current),s)break;return null;case 22:case 23:return e.lanes=0,yh(t,e,n)}return _t(t,e,n)}var Nh,ko,bh,Sh;Nh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ko=function(){};bh=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,hn(ht.current);var a=null;switch(n){case"input":i=Ka(t,i),s=Ka(t,s),a=[];break;case"select":i=ne({},i,{value:void 0}),s=ne({},s,{value:void 0}),a=[];break;case"textarea":i=Va(t,i),s=Va(t,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ui)}Ja(n,s);var o;n=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zs.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in s){var c=s[u];if(l=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&J("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Sh=function(t,e,n,s){n!==s&&(e.flags|=4)};function xs(t,e){if(!Y)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function Bp(t,e,n){var s=e.pendingProps;switch(hl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return Ae(e.type)&&di(),ye(e),null;case 3:return s=e.stateNode,ts(),G(Te),G(we),jl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ar(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ze!==null&&(To(Ze),Ze=null))),ko(t,e),ye(e),null;case 5:wl(e);var i=hn(er.current);if(n=e.type,t!==null&&e.stateNode!=null)bh(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(I(166));return ye(e),null}if(t=hn(ht.current),Ar(e)){s=e.stateNode,n=e.type;var a=e.memoizedProps;switch(s[ut]=e,s[Xs]=a,t=(e.mode&1)!==0,n){case"dialog":J("cancel",s),J("close",s);break;case"iframe":case"object":case"embed":J("load",s);break;case"video":case"audio":for(i=0;i<Es.length;i++)J(Es[i],s);break;case"source":J("error",s);break;case"img":case"image":case"link":J("error",s),J("load",s);break;case"details":J("toggle",s);break;case"input":rc(s,a),J("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},J("invalid",s);break;case"textarea":ac(s,a),J("invalid",s)}Ja(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&Tr(s.textContent,l,t),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Tr(s.textContent,l,t),i=["children",""+l]):zs.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",s)}switch(n){case"input":kr(s),ic(s,a,!0);break;case"textarea":kr(s),oc(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=ui)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zu(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[ut]=e,t[Xs]=s,Nh(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ga(n,s),n){case"dialog":J("cancel",t),J("close",t),i=s;break;case"iframe":case"object":case"embed":J("load",t),i=s;break;case"video":case"audio":for(i=0;i<Es.length;i++)J(Es[i],t);i=s;break;case"source":J("error",t),i=s;break;case"img":case"image":case"link":J("error",t),J("load",t),i=s;break;case"details":J("toggle",t),i=s;break;case"input":rc(t,s),i=Ka(t,s),J("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=ne({},s,{value:void 0}),J("invalid",t);break;case"textarea":ac(t,s),i=Va(t,s),J("invalid",t);break;default:i=s}Ja(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?nd(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ed(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ks(t,c):typeof c=="number"&&Ks(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zs.hasOwnProperty(a)?c!=null&&a==="onScroll"&&J("scroll",t):c!=null&&Qo(t,a,c,o))}switch(n){case"input":kr(t),ic(t,s,!1);break;case"textarea":kr(t),oc(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Jt(s.value));break;case"select":t.multiple=!!s.multiple,a=s.value,a!=null?Wn(t,!!s.multiple,a,!1):s.defaultValue!=null&&Wn(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ui)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ye(e),null;case 6:if(t&&e.stateNode!=null)Sh(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(I(166));if(n=hn(er.current),hn(ht.current),Ar(e)){if(s=e.stateNode,n=e.memoizedProps,s[ut]=e,(a=s.nodeValue!==n)&&(t=Le,t!==null))switch(t.tag){case 3:Tr(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tr(s.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ut]=e,e.stateNode=s}return ye(e),null;case 13:if(G(ee),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Y&&De!==null&&e.mode&1&&!(e.flags&128))Kd(),Zn(),e.flags|=98560,a=!1;else if(a=Ar(e),s!==null&&s.dehydrated!==null){if(t===null){if(!a)throw Error(I(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(I(317));a[ut]=e}else Zn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ye(e),a=!1}else Ze!==null&&(To(Ze),Ze=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||ee.current&1?le===0&&(le=3):Il())),e.updateQueue!==null&&(e.flags|=4),ye(e),null);case 4:return ts(),ko(t,e),t===null&&Ys(e.stateNode.containerInfo),ye(e),null;case 10:return gl(e.type._context),ye(e),null;case 17:return Ae(e.type)&&di(),ye(e),null;case 19:if(G(ee),a=e.memoizedState,a===null)return ye(e),null;if(s=(e.flags&128)!==0,o=a.rendering,o===null)if(s)xs(a,!1);else{if(le!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yi(t),o!==null){for(e.flags|=128,xs(a,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)a=n,t=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return V(ee,ee.current&1|2),e.child}t=t.sibling}a.tail!==null&&re()>ss&&(e.flags|=128,s=!0,xs(a,!1),e.lanes=4194304)}else{if(!s)if(t=yi(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),xs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Y)return ye(e),null}else 2*re()-a.renderingStartTime>ss&&n!==1073741824&&(e.flags|=128,s=!0,xs(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=re(),e.sibling=null,n=ee.current,V(ee,s?n&1|2:n&1),e):(ye(e),null);case 22:case 23:return Rl(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Ie&1073741824&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function Up(t,e){switch(hl(e),e.tag){case 1:return Ae(e.type)&&di(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ts(),G(Te),G(we),jl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wl(e),null;case 13:if(G(ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Zn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return G(ee),null;case 4:return ts(),null;case 10:return gl(e.type._context),null;case 22:case 23:return Rl(),null;case 24:return null;default:return null}}var Dr=!1,xe=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,M=null;function Kn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){se(t,e,s)}else n.current=null}function No(t,e,n){try{n()}catch(s){se(t,e,s)}}var Yc=!1;function zp(t,e){if(io=oi,t=Td(),ul(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var x;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==a||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)h=f,f=x;for(;;){if(f===t)break t;if(h===n&&++u===i&&(l=o),h===a&&++d===s&&(c=o),(x=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ao={focusedElem:t,selectionRange:n},oi=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,b=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ye(e.type,w),b);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var p=e.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(k){se(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return y=Yc,Yc=!1,y}function Ms(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&No(e,n,a)}i=i.next}while(i!==s)}}function $i(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function bo(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _h(t){var e=t.alternate;e!==null&&(t.alternate=null,_h(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ut],delete e[Xs],delete e[co],delete e[bp],delete e[Sp])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ch(t){return t.tag===5||t.tag===3||t.tag===4}function Qc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ch(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function So(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ui));else if(s!==4&&(t=t.child,t!==null))for(So(t,e,n),t=t.sibling;t!==null;)So(t,e,n),t=t.sibling}function _o(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(_o(t,e,n),t=t.sibling;t!==null;)_o(t,e,n),t=t.sibling}var fe=null,Qe=!1;function Pt(t,e,n){for(n=n.child;n!==null;)Eh(t,e,n),n=n.sibling}function Eh(t,e,n){if(dt&&typeof dt.onCommitFiberUnmount=="function")try{dt.onCommitFiberUnmount(Ti,n)}catch{}switch(n.tag){case 5:xe||Kn(n,e);case 6:var s=fe,i=Qe;fe=null,Pt(t,e,n),fe=s,Qe=i,fe!==null&&(Qe?(t=fe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fe.removeChild(n.stateNode));break;case 18:fe!==null&&(Qe?(t=fe,n=n.stateNode,t.nodeType===8?va(t.parentNode,n):t.nodeType===1&&va(t,n),qs(t)):va(fe,n.stateNode));break;case 4:s=fe,i=Qe,fe=n.stateNode.containerInfo,Qe=!0,Pt(t,e,n),fe=s,Qe=i;break;case 0:case 11:case 14:case 15:if(!xe&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&No(n,e,o),i=i.next}while(i!==s)}Pt(t,e,n);break;case 1:if(!xe&&(Kn(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){se(n,e,l)}Pt(t,e,n);break;case 21:Pt(t,e,n);break;case 22:n.mode&1?(xe=(s=xe)||n.memoizedState!==null,Pt(t,e,n),xe=s):Pt(t,e,n);break;default:Pt(t,e,n)}}function Xc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fp),e.forEach(function(s){var i=Qp.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function qe(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:fe=l.stateNode,Qe=!1;break e;case 3:fe=l.stateNode.containerInfo,Qe=!0;break e;case 4:fe=l.stateNode.containerInfo,Qe=!0;break e}l=l.return}if(fe===null)throw Error(I(160));Eh(a,o,i),fe=null,Qe=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){se(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ph(e,t),e=e.sibling}function Ph(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qe(e,t),ot(t),s&4){try{Ms(3,t,t.return),$i(3,t)}catch(w){se(t,t.return,w)}try{Ms(5,t,t.return)}catch(w){se(t,t.return,w)}}break;case 1:qe(e,t),ot(t),s&512&&n!==null&&Kn(n,n.return);break;case 5:if(qe(e,t),ot(t),s&512&&n!==null&&Kn(n,n.return),t.flags&32){var i=t.stateNode;try{Ks(i,"")}catch(w){se(t,t.return,w)}}if(s&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Qu(i,a),Ga(l,o);var u=Ga(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?nd(i,f):d==="dangerouslySetInnerHTML"?ed(i,f):d==="children"?Ks(i,f):Qo(i,d,f,u)}switch(l){case"input":Ha(i,a);break;case"textarea":Xu(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var x=a.value;x!=null?Wn(i,!!a.multiple,x,!1):h!==!!a.multiple&&(a.defaultValue!=null?Wn(i,!!a.multiple,a.defaultValue,!0):Wn(i,!!a.multiple,a.multiple?[]:"",!1))}i[Xs]=a}catch(w){se(t,t.return,w)}}break;case 6:if(qe(e,t),ot(t),s&4){if(t.stateNode===null)throw Error(I(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(w){se(t,t.return,w)}}break;case 3:if(qe(e,t),ot(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{qs(e.containerInfo)}catch(w){se(t,t.return,w)}break;case 4:qe(e,t),ot(t);break;case 13:qe(e,t),ot(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Tl=re())),s&4&&Xc(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(xe=(u=xe)||d,qe(e,t),xe=u):qe(e,t),ot(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(M=t,d=t.child;d!==null;){for(f=M=d;M!==null;){switch(h=M,x=h.child,h.tag){case 0:case 11:case 14:case 15:Ms(4,h,h.return);break;case 1:Kn(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){se(s,n,w)}}break;case 5:Kn(h,h.return);break;case 22:if(h.memoizedState!==null){eu(f);continue}}x!==null?(x.return=h,M=x):eu(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=td("display",o))}catch(w){se(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){se(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qe(e,t),ot(t),s&4&&Xc(t);break;case 21:break;default:qe(e,t),ot(t)}}function ot(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ch(n)){var s=n;break e}n=n.return}throw Error(I(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Ks(i,""),s.flags&=-33);var a=Qc(t);_o(t,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Qc(t);So(t,l,o);break;default:throw Error(I(161))}}catch(c){se(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Kp(t,e,n){M=t,Th(t)}function Th(t,e,n){for(var s=(t.mode&1)!==0;M!==null;){var i=M,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Dr;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||xe;l=Dr;var u=xe;if(Dr=o,(xe=c)&&!u)for(M=i;M!==null;)o=M,c=o.child,o.tag===22&&o.memoizedState!==null?tu(i):c!==null?(c.return=o,M=c):tu(i);for(;a!==null;)M=a,Th(a),a=a.sibling;M=i,Dr=l,xe=u}Zc(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,M=a):Zc(t)}}function Zc(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xe||$i(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!xe)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ye(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Oc(e,a,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Oc(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&qs(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}xe||e.flags&512&&bo(e)}catch(h){se(e,e.return,h)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function eu(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function tu(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$i(4,e)}catch(c){se(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(c){se(e,i,c)}}var a=e.return;try{bo(e)}catch(c){se(e,a,c)}break;case 5:var o=e.return;try{bo(e)}catch(c){se(e,o,c)}}}catch(c){se(e,e.return,c)}if(e===t){M=null;break}var l=e.sibling;if(l!==null){l.return=e.return,M=l;break}M=e.return}}var Hp=Math.ceil,ji=Et.ReactCurrentDispatcher,El=Et.ReactCurrentOwner,Ke=Et.ReactCurrentBatchConfig,K=0,he=null,ie=null,pe=0,Ie=0,Hn=Qt(0),le=0,rr=null,yn=0,Bi=0,Pl=0,Os=null,Ce=null,Tl=0,ss=1/0,pt=null,ki=!1,Co=null,Wt=null,Lr=!1,Bt=null,Ni=0,$s=0,Eo=null,Qr=-1,Xr=0;function Ne(){return K&6?re():Qr!==-1?Qr:Qr=re()}function Vt(t){return t.mode&1?K&2&&pe!==0?pe&-pe:Cp.transition!==null?(Xr===0&&(Xr=md()),Xr):(t=H,t!==0||(t=window.event,t=t===void 0?16:jd(t.type)),t):1}function tt(t,e,n,s){if(50<$s)throw $s=0,Eo=null,Error(I(185));cr(t,n,s),(!(K&2)||t!==he)&&(t===he&&(!(K&2)&&(Bi|=n),le===4&&Mt(t,pe)),Re(t,s),n===1&&K===0&&!(e.mode&1)&&(ss=re()+500,Li&&Xt()))}function Re(t,e){var n=t.callbackNode;Cm(t,e);var s=ai(t,t===he?pe:0);if(s===0)n!==null&&uc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&uc(n),e===1)t.tag===0?_p(nu.bind(null,t)):Ud(nu.bind(null,t)),kp(function(){!(K&6)&&Xt()}),n=null;else{switch(pd(s)){case 1:n=nl;break;case 4:n=hd;break;case 16:n=ii;break;case 536870912:n=fd;break;default:n=ii}n=$h(n,Ah.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ah(t,e){if(Qr=-1,Xr=0,K&6)throw Error(I(327));var n=t.callbackNode;if(Yn()&&t.callbackNode!==n)return null;var s=ai(t,t===he?pe:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=bi(t,s);else{e=s;var i=K;K|=2;var a=Ih();(he!==t||pe!==e)&&(pt=null,ss=re()+500,fn(t,e));do try{qp();break}catch(l){Rh(t,l)}while(1);pl(),ji.current=a,K=i,ie!==null?e=0:(he=null,pe=0,e=le)}if(e!==0){if(e===2&&(i=eo(t),i!==0&&(s=i,e=Po(t,i))),e===1)throw n=rr,fn(t,0),Mt(t,s),Re(t,re()),n;if(e===6)Mt(t,s);else{if(i=t.current.alternate,!(s&30)&&!Wp(i)&&(e=bi(t,s),e===2&&(a=eo(t),a!==0&&(s=a,e=Po(t,a))),e===1))throw n=rr,fn(t,0),Mt(t,s),Re(t,re()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(I(345));case 2:on(t,Ce,pt);break;case 3:if(Mt(t,s),(s&130023424)===s&&(e=Tl+500-re(),10<e)){if(ai(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){Ne(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lo(on.bind(null,t,Ce,pt),e);break}on(t,Ce,pt);break;case 4:if(Mt(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-et(s);a=1<<o,o=e[o],o>i&&(i=o),s&=~a}if(s=i,s=re()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Hp(s/1960))-s,10<s){t.timeoutHandle=lo(on.bind(null,t,Ce,pt),s);break}on(t,Ce,pt);break;case 5:on(t,Ce,pt);break;default:throw Error(I(329))}}}return Re(t,re()),t.callbackNode===n?Ah.bind(null,t):null}function Po(t,e){var n=Os;return t.current.memoizedState.isDehydrated&&(fn(t,e).flags|=256),t=bi(t,e),t!==2&&(e=Ce,Ce=n,e!==null&&To(e)),t}function To(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function Wp(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!nt(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mt(t,e){for(e&=~Pl,e&=~Bi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-et(e),s=1<<n;t[n]=-1,e&=~s}}function nu(t){if(K&6)throw Error(I(327));Yn();var e=ai(t,0);if(!(e&1))return Re(t,re()),null;var n=bi(t,e);if(t.tag!==0&&n===2){var s=eo(t);s!==0&&(e=s,n=Po(t,s))}if(n===1)throw n=rr,fn(t,0),Mt(t,e),Re(t,re()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,on(t,Ce,pt),Re(t,re()),null}function Al(t,e){var n=K;K|=1;try{return t(e)}finally{K=n,K===0&&(ss=re()+500,Li&&Xt())}}function xn(t){Bt!==null&&Bt.tag===0&&!(K&6)&&Yn();var e=K;K|=1;var n=Ke.transition,s=H;try{if(Ke.transition=null,H=1,t)return t()}finally{H=s,Ke.transition=n,K=e,!(K&6)&&Xt()}}function Rl(){Ie=Hn.current,G(Hn)}function fn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jp(n)),ie!==null)for(n=ie.return;n!==null;){var s=n;switch(hl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&di();break;case 3:ts(),G(Te),G(we),jl();break;case 5:wl(s);break;case 4:ts();break;case 13:G(ee);break;case 19:G(ee);break;case 10:gl(s.type._context);break;case 22:case 23:Rl()}n=n.return}if(he=t,ie=t=qt(t.current,null),pe=Ie=e,le=0,rr=null,Pl=Bi=yn=0,Ce=Os=null,dn!==null){for(e=0;e<dn.length;e++)if(n=dn[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}dn=null}return t}function Rh(t,e){do{var n=ie;try{if(pl(),Jr.current=wi,xi){for(var s=te.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}xi=!1}if(vn=0,de=oe=te=null,Ls=!1,tr=0,El.current=null,n===null||n.return===null){le=1,rr=e,ie=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=pe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Kc(o);if(x!==null){x.flags&=-257,Hc(x,o,l,a,e),x.mode&1&&zc(a,u,e),e=x,c=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){zc(a,u,e),Il();break e}c=Error(I(426))}}else if(Y&&l.mode&1){var b=Kc(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Hc(b,o,l,a,e),fl(ns(c,l));break e}}a=c=ns(c,l),le!==4&&(le=2),Os===null?Os=[a]:Os.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=ph(a,c,e);Mc(a,g);break e;case 1:l=c;var m=a.type,p=a.stateNode;if(!(a.flags&128)&&(typeof m.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Wt===null||!Wt.has(p)))){a.flags|=65536,e&=-e,a.lanes|=e;var k=gh(a,l,e);Mc(a,k);break e}}a=a.return}while(a!==null)}Lh(n)}catch(P){e=P,ie===n&&n!==null&&(ie=n=n.return);continue}break}while(1)}function Ih(){var t=ji.current;return ji.current=wi,t===null?wi:t}function Il(){(le===0||le===3||le===2)&&(le=4),he===null||!(yn&268435455)&&!(Bi&268435455)||Mt(he,pe)}function bi(t,e){var n=K;K|=2;var s=Ih();(he!==t||pe!==e)&&(pt=null,fn(t,e));do try{Vp();break}catch(i){Rh(t,i)}while(1);if(pl(),K=n,ji.current=s,ie!==null)throw Error(I(261));return he=null,pe=0,le}function Vp(){for(;ie!==null;)Dh(ie)}function qp(){for(;ie!==null&&!ym();)Dh(ie)}function Dh(t){var e=Oh(t.alternate,t,Ie);t.memoizedProps=t.pendingProps,e===null?Lh(t):ie=e,El.current=null}function Lh(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Up(n,e),n!==null){n.flags&=32767,ie=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{le=6,ie=null;return}}else if(n=Bp(n,e,Ie),n!==null){ie=n;return}if(e=e.sibling,e!==null){ie=e;return}ie=e=t}while(e!==null);le===0&&(le=5)}function on(t,e,n){var s=H,i=Ke.transition;try{Ke.transition=null,H=1,Jp(t,e,n,s)}finally{Ke.transition=i,H=s}return null}function Jp(t,e,n,s){do Yn();while(Bt!==null);if(K&6)throw Error(I(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(Em(t,a),t===he&&(ie=he=null,pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lr||(Lr=!0,$h(ii,function(){return Yn(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Ke.transition,Ke.transition=null;var o=H;H=1;var l=K;K|=4,El.current=null,zp(t,n),Ph(n,t),mp(ao),oi=!!io,ao=io=null,t.current=n,Kp(n),xm(),K=l,H=o,Ke.transition=a}else t.current=n;if(Lr&&(Lr=!1,Bt=t,Ni=i),a=t.pendingLanes,a===0&&(Wt=null),km(n.stateNode),Re(t,re()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(ki)throw ki=!1,t=Co,Co=null,t;return Ni&1&&t.tag!==0&&Yn(),a=t.pendingLanes,a&1?t===Eo?$s++:($s=0,Eo=t):$s=0,Xt(),null}function Yn(){if(Bt!==null){var t=pd(Ni),e=Ke.transition,n=H;try{if(Ke.transition=null,H=16>t?16:t,Bt===null)var s=!1;else{if(t=Bt,Bt=null,Ni=0,K&6)throw Error(I(331));var i=K;for(K|=4,M=t.current;M!==null;){var a=M,o=a.child;if(M.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(M=u;M!==null;){var d=M;switch(d.tag){case 0:case 11:case 15:Ms(8,d,a)}var f=d.child;if(f!==null)f.return=d,M=f;else for(;M!==null;){d=M;var h=d.sibling,x=d.return;if(_h(d),d===u){M=null;break}if(h!==null){h.return=x,M=h;break}M=x}}}var y=a.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}M=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,M=o;else e:for(;M!==null;){if(a=M,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ms(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,M=g;break e}M=a.return}}var m=t.current;for(M=m;M!==null;){o=M;var p=o.child;if(o.subtreeFlags&2064&&p!==null)p.return=o,M=p;else e:for(o=m;M!==null;){if(l=M,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$i(9,l)}}catch(P){se(l,l.return,P)}if(l===o){M=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,M=k;break e}M=l.return}}if(K=i,Xt(),dt&&typeof dt.onPostCommitFiberRoot=="function")try{dt.onPostCommitFiberRoot(Ti,t)}catch{}s=!0}return s}finally{H=n,Ke.transition=e}}return!1}function su(t,e,n){e=ns(n,e),e=ph(t,e,1),t=Ht(t,e,1),e=Ne(),t!==null&&(cr(t,1,e),Re(t,e))}function se(t,e,n){if(t.tag===3)su(t,t,n);else for(;e!==null;){if(e.tag===3){su(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Wt===null||!Wt.has(s))){t=ns(n,t),t=gh(e,t,1),e=Ht(e,t,1),t=Ne(),e!==null&&(cr(e,1,t),Re(e,t));break}}e=e.return}}function Gp(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Ne(),t.pingedLanes|=t.suspendedLanes&n,he===t&&(pe&n)===n&&(le===4||le===3&&(pe&130023424)===pe&&500>re()-Tl?fn(t,0):Pl|=n),Re(t,e)}function Mh(t,e){e===0&&(t.mode&1?(e=Sr,Sr<<=1,!(Sr&130023424)&&(Sr=4194304)):e=1);var n=Ne();t=St(t,e),t!==null&&(cr(t,e,n),Re(t,n))}function Yp(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mh(t,n)}function Qp(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(e),Mh(t,n)}var Oh;Oh=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Te.current)Pe=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pe=!1,$p(t,e,n);Pe=!!(t.flags&131072)}else Pe=!1,Y&&e.flags&1048576&&Fd(e,mi,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Yr(t,e),t=e.pendingProps;var i=Xn(e,we.current);Gn(e,n),i=Nl(null,e,s,t,i,n);var a=bl();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ae(s)?(a=!0,hi(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,yl(e),i.updater=Oi,e.stateNode=i,i._reactInternals=e,go(e,s,t,n),e=xo(null,e,s,!0,a,n)):(e.tag=0,Y&&a&&dl(e),ke(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Yr(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=Zp(s),t=Ye(s,t),i){case 0:e=yo(null,e,s,t,n);break e;case 1:e=qc(null,e,s,t,n);break e;case 11:e=Wc(null,e,s,t,n);break e;case 14:e=Vc(null,e,s,Ye(s.type,t),n);break e}throw Error(I(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ye(s,i),yo(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ye(s,i),qc(t,e,s,i,n);case 3:e:{if(wh(e),t===null)throw Error(I(387));s=e.pendingProps,a=e.memoizedState,i=a.element,qd(t,e),vi(e,s,null,n);var o=e.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ns(Error(I(423)),e),e=Jc(t,e,s,n,i);break e}else if(s!==i){i=ns(Error(I(424)),e),e=Jc(t,e,s,n,i);break e}else for(De=Kt(e.stateNode.containerInfo.firstChild),Le=e,Y=!0,Ze=null,n=Wd(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Zn(),s===i){e=_t(t,e,n);break e}ke(t,e,s,n)}e=e.child}return e;case 5:return Jd(e),t===null&&fo(e),s=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,oo(s,i)?o=null:a!==null&&oo(s,a)&&(e.flags|=32),xh(t,e),ke(t,e,o,n),e.child;case 6:return t===null&&fo(e),null;case 13:return jh(t,e,n);case 4:return xl(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=es(e,null,s,n):ke(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ye(s,i),Wc(t,e,s,i,n);case 7:return ke(t,e,e.pendingProps,n),e.child;case 8:return ke(t,e,e.pendingProps.children,n),e.child;case 12:return ke(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,V(pi,s._currentValue),s._currentValue=o,a!==null)if(nt(a.value,o)){if(a.children===i.children&&!Te.current){e=_t(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=jt(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),mo(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(I(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),mo(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ke(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,Gn(e,n),i=We(i),s=s(i),e.flags|=1,ke(t,e,s,n),e.child;case 14:return s=e.type,i=Ye(s,e.pendingProps),i=Ye(s.type,i),Vc(t,e,s,i,n);case 15:return vh(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Ye(s,i),Yr(t,e),e.tag=1,Ae(s)?(t=!0,hi(e)):t=!1,Gn(e,n),mh(e,s,i),go(e,s,i,n),xo(null,e,s,!0,t,n);case 19:return kh(t,e,n);case 22:return yh(t,e,n)}throw Error(I(156,e.tag))};function $h(t,e){return dd(t,e)}function Xp(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ze(t,e,n,s){return new Xp(t,e,n,s)}function Dl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zp(t){if(typeof t=="function")return Dl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zo)return 11;if(t===el)return 14}return 2}function qt(t,e){var n=t.alternate;return n===null?(n=ze(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zr(t,e,n,s,i,a){var o=2;if(s=t,typeof t=="function")Dl(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Dn:return mn(n.children,i,a,e);case Xo:o=8,i|=8;break;case Ba:return t=ze(12,n,e,i|2),t.elementType=Ba,t.lanes=a,t;case Ua:return t=ze(13,n,e,i),t.elementType=Ua,t.lanes=a,t;case Fa:return t=ze(19,n,e,i),t.elementType=Fa,t.lanes=a,t;case Ju:return Ui(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vu:o=10;break e;case qu:o=9;break e;case Zo:o=11;break e;case el:o=14;break e;case It:o=16,s=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=ze(o,n,e,i),e.elementType=t,e.type=s,e.lanes=a,e}function mn(t,e,n,s){return t=ze(7,t,s,e),t.lanes=n,t}function Ui(t,e,n,s){return t=ze(22,t,s,e),t.elementType=Ju,t.lanes=n,t.stateNode={isHidden:!1},t}function Sa(t,e,n){return t=ze(6,t,null,e),t.lanes=n,t}function _a(t,e,n){return e=ze(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function eg(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=aa(0),this.expirationTimes=aa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=aa(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ll(t,e,n,s,i,a,o,l,c){return t=new eg(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=ze(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},yl(a),t}function tg(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:In,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Bh(t){if(!t)return Gt;t=t._reactInternals;e:{if(jn(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ae(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(Ae(n))return Bd(t,n,e)}return e}function Uh(t,e,n,s,i,a,o,l,c){return t=Ll(n,s,!0,t,i,a,o,l,c),t.context=Bh(null),n=t.current,s=Ne(),i=Vt(n),a=jt(s,i),a.callback=e??null,Ht(n,a,i),t.current.lanes=i,cr(t,i,s),Re(t,s),t}function Fi(t,e,n,s){var i=e.current,a=Ne(),o=Vt(i);return n=Bh(n),e.context===null?e.context=n:e.pendingContext=n,e=jt(a,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Ht(i,e,o),t!==null&&(tt(t,i,o,a),qr(t,i,o)),o}function Si(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ru(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ml(t,e){ru(t,e),(t=t.alternate)&&ru(t,e)}function ng(){return null}var Fh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ol(t){this._internalRoot=t}zi.prototype.render=Ol.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));Fi(t,e,null,null)};zi.prototype.unmount=Ol.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xn(function(){Fi(null,t,null,null)}),e[bt]=null}};function zi(t){this._internalRoot=t}zi.prototype.unstable_scheduleHydration=function(t){if(t){var e=yd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Lt.length&&e!==0&&e<Lt[n].priority;n++);Lt.splice(n,0,t),n===0&&wd(t)}};function $l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ki(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function iu(){}function sg(t,e,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var u=Si(o);a.call(u)}}var o=Uh(e,s,t,0,null,!1,!1,"",iu);return t._reactRootContainer=o,t[bt]=o.current,Ys(t.nodeType===8?t.parentNode:t),xn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var u=Si(c);l.call(u)}}var c=Ll(t,0,!1,null,null,!1,!1,"",iu);return t._reactRootContainer=c,t[bt]=c.current,Ys(t.nodeType===8?t.parentNode:t),xn(function(){Fi(e,c,n,s)}),c}function Hi(t,e,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Si(o);l.call(c)}}Fi(e,o,t,i)}else o=sg(n,e,t,i,s);return Si(o)}gd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cs(e.pendingLanes);n!==0&&(sl(e,n|1),Re(e,re()),!(K&6)&&(ss=re()+500,Xt()))}break;case 13:xn(function(){var s=St(t,1);if(s!==null){var i=Ne();tt(s,t,1,i)}}),Ml(t,1)}};rl=function(t){if(t.tag===13){var e=St(t,134217728);if(e!==null){var n=Ne();tt(e,t,134217728,n)}Ml(t,134217728)}};vd=function(t){if(t.tag===13){var e=Vt(t),n=St(t,e);if(n!==null){var s=Ne();tt(n,t,e,s)}Ml(t,e)}};yd=function(){return H};xd=function(t,e){var n=H;try{return H=t,e()}finally{H=n}};Qa=function(t,e,n){switch(e){case"input":if(Ha(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=Di(s);if(!i)throw Error(I(90));Yu(s),Ha(s,i)}}}break;case"textarea":Xu(t,n);break;case"select":e=n.value,e!=null&&Wn(t,!!n.multiple,e,!1)}};id=Al;ad=xn;var rg={usingClientEntryPoint:!1,Events:[dr,$n,Di,sd,rd,Al]},ws={findFiberByHostInstance:un,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ig={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cd(t),t===null?null:t.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||ng,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mr.isDisabled&&Mr.supportsFiber)try{Ti=Mr.inject(ig),dt=Mr}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rg;$e.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$l(e))throw Error(I(200));return tg(t,e,null,n)};$e.createRoot=function(t,e){if(!$l(t))throw Error(I(299));var n=!1,s="",i=Fh;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ll(t,1,!1,null,null,n,!1,s,i),t[bt]=e.current,Ys(t.nodeType===8?t.parentNode:t),new Ol(e)};$e.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=cd(e),t=t===null?null:t.stateNode,t};$e.flushSync=function(t){return xn(t)};$e.hydrate=function(t,e,n){if(!Ki(e))throw Error(I(200));return Hi(null,t,e,!0,n)};$e.hydrateRoot=function(t,e,n){if(!$l(t))throw Error(I(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=Fh;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Uh(e,null,t,1,n??null,i,!1,a,o),t[bt]=e.current,Ys(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new zi(e)};$e.render=function(t,e,n){if(!Ki(e))throw Error(I(200));return Hi(null,t,e,!1,n)};$e.unmountComponentAtNode=function(t){if(!Ki(t))throw Error(I(40));return t._reactRootContainer?(xn(function(){Hi(null,null,t,!1,function(){t._reactRootContainer=null,t[bt]=null})}),!0):!1};$e.unstable_batchedUpdates=Al;$e.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Ki(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return Hi(t,e,n,!1,s)};$e.version="18.3.1-next-f1338f8080-20240426";function zh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zh)}catch(t){console.error(t)}}zh(),zu.exports=$e;var ag=zu.exports,au=ag;Oa.createRoot=au.createRoot,Oa.hydrateRoot=au.hydrateRoot;const og="modulepreload",lg=function(t){return"/"+t},ou={},kn=function(e,n,s){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=lg(a),a in ou)return;ou[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!s)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":og,o||(u.as="script",u.crossOrigin=""),u.href=a,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var lu="popstate";function cg(t={}){function e(s,i){let{pathname:a,search:o,hash:l}=s.location;return Ao("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:ir(i)}return dg(e,n,null,t)}function Q(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function st(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ug(){return Math.random().toString(36).substring(2,10)}function cu(t,e){return{usr:t.state,key:t.key,idx:e}}function Ao(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ls(e):e,state:n,key:e&&e.key||s||ug()}}function ir({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ls(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function dg(t,e,n,s={}){let{window:i=document.defaultView,v5Compat:a=!1}=s,o=i.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let b=d(),g=b==null?null:b-u;u=b,c&&c({action:l,location:w.location,delta:g})}function h(b,g){l="PUSH";let m=Ao(w.location,b,g);n&&n(m,b),u=d()+1;let p=cu(m,u),k=w.createHref(m);try{o.pushState(p,"",k)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(k)}a&&c&&c({action:l,location:w.location,delta:1})}function x(b,g){l="REPLACE";let m=Ao(w.location,b,g);n&&n(m,b),u=d();let p=cu(m,u),k=w.createHref(m);o.replaceState(p,"",k),a&&c&&c({action:l,location:w.location,delta:0})}function y(b){return hg(b)}let w={get action(){return l},get location(){return t(i,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(lu,f),c=b,()=>{i.removeEventListener(lu,f),c=null}},createHref(b){return e(i,b)},createURL:y,encodeLocation(b){let g=y(b);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(b){return o.go(b)}};return w}function hg(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Q(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:ir(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Kh(t,e,n="/"){return fg(t,e,n,!1)}function fg(t,e,n,s){let i=typeof e=="string"?ls(e):e,a=Ct(i.pathname||"/",n);if(a==null)return null;let o=Hh(t);mg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Sg(a);l=Ng(o[c],u,s)}return l}function Hh(t,e=[],n=[],s=""){let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(Q(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let u=kt([s,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(Q(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),Hh(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:jg(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of Wh(a.path))i(a,o,c)}),e}function Wh(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(s.length===0)return i?[a,""]:[a];let o=Wh(s.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function mg(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kg(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var pg=/^:[\w-]+$/,gg=3,vg=2,yg=1,xg=10,wg=-2,uu=t=>t==="*";function jg(t,e){let n=t.split("/"),s=n.length;return n.some(uu)&&(s+=wg),e&&(s+=vg),n.filter(i=>!uu(i)).reduce((i,a)=>i+(pg.test(a)?gg:a===""?yg:xg),s)}function kg(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function Ng(t,e,n=!1){let{routesMeta:s}=t,i={},a="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=a==="/"?e:e.slice(a.length)||"/",f=_i({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!s[s.length-1].route.index&&(f=_i({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:kt([a,f.pathname]),pathnameBase:Pg(kt([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=kt([a,f.pathnameBase]))}return o}function _i(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=bg(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:s.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let y=l[h]||"";o=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[h];return f&&!x?u[d]=void 0:u[d]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function bg(t,e=!1,n=!0){st(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function Sg(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return st(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ct(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function _g(t,e="/"){let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?ls(t):t;return{pathname:n?n.startsWith("/")?n:Cg(n,e):e,search:Tg(s),hash:Ag(i)}}function Cg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ca(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Eg(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bl(t){let e=Eg(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function Ul(t,e,n,s=!1){let i;typeof t=="string"?i=ls(t):(i={...t},Q(!i.pathname||!i.pathname.includes("?"),Ca("?","pathname","search",i)),Q(!i.pathname||!i.pathname.includes("#"),Ca("#","pathname","hash",i)),Q(!i.search||!i.search.includes("#"),Ca("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=_g(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var kt=t=>t.join("/").replace(/\/\/+/g,"/"),Pg=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Tg=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Ag=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Rg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Vh=["POST","PUT","PATCH","DELETE"];new Set(Vh);var Ig=["GET",...Vh];new Set(Ig);var cs=v.createContext(null);cs.displayName="DataRouter";var Wi=v.createContext(null);Wi.displayName="DataRouterState";v.createContext(!1);var qh=v.createContext({isTransitioning:!1});qh.displayName="ViewTransition";var Dg=v.createContext(new Map);Dg.displayName="Fetchers";var Lg=v.createContext(null);Lg.displayName="Await";var rt=v.createContext(null);rt.displayName="Navigation";var fr=v.createContext(null);fr.displayName="Location";var it=v.createContext({outlet:null,matches:[],isDataRoute:!1});it.displayName="Route";var Fl=v.createContext(null);Fl.displayName="RouteError";function Mg(t,{relative:e}={}){Q(us(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=v.useContext(rt),{hash:i,pathname:a,search:o}=pr(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:kt([n,a])),s.createHref({pathname:l,search:o,hash:i})}function us(){return v.useContext(fr)!=null}function Zt(){return Q(us(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(fr).location}var Jh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gh(t){v.useContext(rt).static||v.useLayoutEffect(t)}function mr(){let{isDataRoute:t}=v.useContext(it);return t?Yg():Og()}function Og(){Q(us(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(cs),{basename:e,navigator:n}=v.useContext(rt),{matches:s}=v.useContext(it),{pathname:i}=Zt(),a=JSON.stringify(Bl(s)),o=v.useRef(!1);return Gh(()=>{o.current=!0}),v.useCallback((c,u={})=>{if(st(o.current,Jh),!o.current)return;if(typeof c=="number"){n.go(c);return}let d=Ul(c,JSON.parse(a),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:kt([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,i,t])}v.createContext(null);function $g(){let{matches:t}=v.useContext(it),e=t[t.length-1];return e?e.params:{}}function pr(t,{relative:e}={}){let{matches:n}=v.useContext(it),{pathname:s}=Zt(),i=JSON.stringify(Bl(n));return v.useMemo(()=>Ul(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function Bg(t,e){return Yh(t,e)}function Yh(t,e,n,s){var g;Q(us(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(rt),{matches:a}=v.useContext(it),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let m=d&&d.path||"";Qh(c,!d||m.endsWith("*")||m.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${m}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${m}"> to <Route path="${m==="/"?"*":`${m}/*`}">.`)}let f=Zt(),h;if(e){let m=typeof e=="string"?ls(e):e;Q(u==="/"||((g=m.pathname)==null?void 0:g.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${m.pathname}" was given in the \`location\` prop.`),h=m}else h=f;let x=h.pathname||"/",y=x;if(u!=="/"){let m=u.replace(/^\//,"").split("/");y="/"+x.replace(/^\//,"").split("/").slice(m.length).join("/")}let w=Kh(t,{pathname:y});st(d||w!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),st(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Hg(w&&w.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:kt([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:kt([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),a,n,s);return e&&b?v.createElement(fr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},b):b}function Ug(){let t=Gg(),e=Rg(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null,"💿 Hey developer 👋"),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:a},"ErrorBoundary")," or"," ",v.createElement("code",{style:a},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var Fg=v.createElement(Ug,null),zg=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?v.createElement(it.Provider,{value:this.props.routeContext},v.createElement(Fl.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Kg({routeContext:t,match:e,children:n}){let s=v.useContext(cs);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(it.Provider,{value:t},n)}function Hg(t,e=[],n=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n==null?void 0:n.errors;if(a!=null){let c=i.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);Q(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let o=!1,l=-1;if(n)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=n,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((c,u,d)=>{let f,h=!1,x=null,y=null;n&&(f=a&&u.route.id?a[u.route.id]:void 0,x=u.route.errorElement||Fg,o&&(l<0&&d===0?(Qh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,y=null):l===d&&(h=!0,y=u.route.hydrateFallbackElement||null)));let w=e.concat(i.slice(0,d+1)),b=()=>{let g;return f?g=x:h?g=y:u.route.Component?g=v.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=c,v.createElement(Kg,{match:u,routeContext:{outlet:c,matches:w,isDataRoute:n!=null},children:g})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?v.createElement(zg,{location:n.location,revalidation:n.revalidation,component:x,error:f,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}function zl(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Wg(t){let e=v.useContext(cs);return Q(e,zl(t)),e}function Vg(t){let e=v.useContext(Wi);return Q(e,zl(t)),e}function qg(t){let e=v.useContext(it);return Q(e,zl(t)),e}function Kl(t){let e=qg(t),n=e.matches[e.matches.length-1];return Q(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Jg(){return Kl("useRouteId")}function Gg(){var s;let t=v.useContext(Fl),e=Vg("useRouteError"),n=Kl("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function Yg(){let{router:t}=Wg("useNavigate"),e=Kl("useNavigate"),n=v.useRef(!1);return Gh(()=>{n.current=!0}),v.useCallback(async(i,a={})=>{st(n.current,Jh),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var du={};function Qh(t,e,n){!e&&!du[t]&&(du[t]=!0,st(!1,n))}v.memo(Qg);function Qg({routes:t,future:e,state:n}){return Yh(t,void 0,n,e)}function Xh({to:t,replace:e,state:n,relative:s}){Q(us(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=v.useContext(rt);st(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=v.useContext(it),{pathname:o}=Zt(),l=mr(),c=Ul(t,Bl(a),o,s==="path"),u=JSON.stringify(c);return v.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:s})},[l,u,s,e,n]),null}function At(t){Q(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Xg({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:i,static:a=!1}){Q(!us(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=v.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=ls(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=n,x=v.useMemo(()=>{let y=Ct(c,o);return y==null?null:{location:{pathname:y,search:u,hash:d,state:f,key:h},navigationType:s}},[o,c,u,d,f,h,s]);return st(x!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(rt.Provider,{value:l},v.createElement(fr.Provider,{children:e,value:x}))}function Zg({children:t,location:e}){return Bg(Ro(t),e)}function Ro(t,e=[]){let n=[];return v.Children.forEach(t,(s,i)=>{if(!v.isValidElement(s))return;let a=[...e,i];if(s.type===v.Fragment){n.push.apply(n,Ro(s.props.children,a));return}Q(s.type===At,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Q(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||a.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ro(s.props.children,a)),n.push(o)}),n}var ei="get",ti="application/x-www-form-urlencoded";function Vi(t){return t!=null&&typeof t.tagName=="string"}function ev(t){return Vi(t)&&t.tagName.toLowerCase()==="button"}function tv(t){return Vi(t)&&t.tagName.toLowerCase()==="form"}function nv(t){return Vi(t)&&t.tagName.toLowerCase()==="input"}function sv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function rv(t,e){return t.button===0&&(!e||e==="_self")&&!sv(t)}var Or=null;function iv(){if(Or===null)try{new FormData(document.createElement("form"),0),Or=!1}catch{Or=!0}return Or}var av=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ea(t){return t!=null&&!av.has(t)?(st(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ti}"`),null):t}function ov(t,e){let n,s,i,a,o;if(tv(t)){let l=t.getAttribute("action");s=l?Ct(l,e):null,n=t.getAttribute("method")||ei,i=Ea(t.getAttribute("enctype"))||ti,a=new FormData(t)}else if(ev(t)||nv(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(s=c?Ct(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||ei,i=Ea(t.getAttribute("formenctype"))||Ea(l.getAttribute("enctype"))||ti,a=new FormData(l,t),!iv()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,f)}}else{if(Vi(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ei,s=null,i=ti,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hl(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lv(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ct(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function cv(t,e){if(t.id in e)return e[t.id];try{let n=await kn(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uv(t){return t!=null&&typeof t.page=="string"}function dv(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function hv(t,e,n){let s=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await cv(a,n);return o.links?o.links():[]}return[]}));return gv(s.flat(1).filter(dv).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function hu(t,e,n,s,i,a){let o=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,u)=>o(c,u)||l(c,u)):a==="data"?e.filter((c,u)=>{var f;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function fv(t,e,{includeHydrateFallback:n}={}){return mv(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function mv(t){return[...new Set(t)]}function pv(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function gv(t,e){let n=new Set,s=new Set(e);return t.reduce((i,a)=>{if(e&&!uv(a)&&a.as==="script"&&a.href&&s.has(a.href))return i;let l=JSON.stringify(pv(a));return n.has(l)||(n.add(l),i.push({key:l,link:a})),i},[])}function Zh(){let t=v.useContext(cs);return Hl(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vv(){let t=v.useContext(Wi);return Hl(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Wl=v.createContext(void 0);Wl.displayName="FrameworkContext";function ef(){let t=v.useContext(Wl);return Hl(t,"You must render this element inside a <HydratedRouter> element"),t}function yv(t,e){let n=v.useContext(Wl),[s,i]=v.useState(!1),[a,o]=v.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=g=>{g.forEach(m=>{o(m.isIntersecting)})},b=new IntersectionObserver(w,{threshold:.5});return h.current&&b.observe(h.current),()=>{b.disconnect()}}},[t]),v.useEffect(()=>{if(s){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[s]);let x=()=>{i(!0)},y=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,h,{}]:[a,h,{onFocus:js(l,x),onBlur:js(c,y),onMouseEnter:js(u,x),onMouseLeave:js(d,y),onTouchStart:js(f,x)}]:[!1,h,{}]}function js(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function xv({page:t,...e}){let{router:n}=Zh(),s=v.useMemo(()=>Kh(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?v.createElement(jv,{page:t,matches:s,...e}):null}function wv(t){let{manifest:e,routeModules:n}=ef(),[s,i]=v.useState([]);return v.useEffect(()=>{let a=!1;return hv(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),s}function jv({page:t,matches:e,...n}){let s=Zt(),{manifest:i,routeModules:a}=ef(),{basename:o}=Zh(),{loaderData:l,matches:c}=vv(),u=v.useMemo(()=>hu(t,e,c,i,s,"data"),[t,e,c,i,s]),d=v.useMemo(()=>hu(t,e,c,i,s,"assets"),[t,e,c,i,s]),f=v.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let y=new Set,w=!1;if(e.forEach(g=>{var p;let m=i.routes[g.route.id];!m||!m.hasLoader||(!u.some(k=>k.route.id===g.route.id)&&g.route.id in l&&((p=a[g.route.id])!=null&&p.shouldRevalidate)||m.hasClientLoader?w=!0:y.add(g.route.id))}),y.size===0)return[];let b=lv(t,o,"data");return w&&y.size>0&&b.searchParams.set("_routes",e.filter(g=>y.has(g.route.id)).map(g=>g.route.id).join(",")),[b.pathname+b.search]},[o,l,s,i,u,e,t,a]),h=v.useMemo(()=>fv(d,i),[d,i]),x=wv(d);return v.createElement(v.Fragment,null,f.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),h.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),x.map(({key:y,link:w})=>v.createElement("link",{key:y,nonce:n.nonce,...w})))}function kv(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var tf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tf&&(window.__reactRouterVersion="7.8.0")}catch{}function Nv({basename:t,children:e,window:n}){let s=v.useRef();s.current==null&&(s.current=cg({window:n,v5Compat:!0}));let i=s.current,[a,o]=v.useState({action:i.action,location:i.location}),l=v.useCallback(c=>{v.startTransition(()=>o(c))},[o]);return v.useLayoutEffect(()=>i.listen(l),[i,l]),v.createElement(Xg,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var nf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,me=v.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},x){let{basename:y}=v.useContext(rt),w=typeof u=="string"&&nf.test(u),b,g=!1;if(typeof u=="string"&&w&&(b=u,tf))try{let E=new URL(window.location.href),T=u.startsWith("//")?new URL(E.protocol+u):new URL(u),j=Ct(T.pathname,y);T.origin===E.origin&&j!=null?u=j+T.search+T.hash:g=!0}catch{st(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=Mg(u,{relative:i}),[p,k,P]=yv(s,h),_=Cv(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function N(E){e&&e(E),E.defaultPrevented||_(E)}let R=v.createElement("a",{...h,...P,href:b||m,onClick:g||a?e:N,ref:kv(x,k),target:c,"data-discover":!w&&n==="render"?"true":void 0});return p&&!w?v.createElement(v.Fragment,null,R,v.createElement(xv,{page:m})):R});me.displayName="Link";var bv=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:i=!1,style:a,to:o,viewTransition:l,children:c,...u},d){let f=pr(o,{relative:u.relative}),h=Zt(),x=v.useContext(Wi),{navigator:y,basename:w}=v.useContext(rt),b=x!=null&&Rv(f)&&l===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,m=h.pathname,p=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(m=m.toLowerCase(),p=p?p.toLowerCase():null,g=g.toLowerCase()),p&&w&&(p=Ct(p,w)||p);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let P=m===g||!i&&m.startsWith(g)&&m.charAt(k)==="/",_=p!=null&&(p===g||!i&&p.startsWith(g)&&p.charAt(g.length)==="/"),N={isActive:P,isPending:_,isTransitioning:b},R=P?e:void 0,E;typeof s=="function"?E=s(N):E=[s,P?"active":null,_?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let T=typeof a=="function"?a(N):a;return v.createElement(me,{...u,"aria-current":R,className:E,ref:d,style:T,to:o,viewTransition:l},typeof c=="function"?c(N):c)});bv.displayName="NavLink";var Sv=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:i,state:a,method:o=ei,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},x)=>{let y=Tv(),w=Av(l,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&nf.test(l),m=p=>{if(c&&c(p),p.defaultPrevented)return;p.preventDefault();let k=p.nativeEvent.submitter,P=(k==null?void 0:k.getAttribute("formmethod"))||o;y(k||p.currentTarget,{fetcherKey:e,method:P,navigate:n,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:x,method:b,action:w,onSubmit:s?c:m,...h,"data-discover":!g&&t==="render"?"true":void 0})});Sv.displayName="Form";function _v(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function sf(t){let e=v.useContext(cs);return Q(e,_v(t)),e}function Cv(t,{target:e,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:o}={}){let l=mr(),c=Zt(),u=pr(t,{relative:a});return v.useCallback(d=>{if(rv(d,e)){d.preventDefault();let f=n!==void 0?n:ir(c)===ir(u);l(t,{replace:f,state:s,preventScrollReset:i,relative:a,viewTransition:o})}},[c,l,u,n,s,e,t,i,a,o])}var Ev=0,Pv=()=>`__${String(++Ev)}__`;function Tv(){let{router:t}=sf("useSubmit"),{basename:e}=v.useContext(rt),n=Jg();return v.useCallback(async(s,i={})=>{let{action:a,method:o,encType:l,formData:c,body:u}=ov(s,e);if(i.navigate===!1){let d=i.fetcherKey||Pv();await t.fetch(d,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||o,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Av(t,{relative:e}={}){let{basename:n}=v.useContext(rt),s=v.useContext(it);Q(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),a={...pr(t||".",{relative:e})},o=Zt();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:kt([n,a.pathname])),ir(a)}function Rv(t,{relative:e}={}){let n=v.useContext(qh);Q(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=sf("useViewTransitionState"),i=pr(t,{relative:e});if(!n.isTransitioning)return!1;let a=Ct(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=Ct(n.nextLocation.pathname,s)||n.nextLocation.pathname;return _i(i.pathname,o)!=null||_i(i.pathname,a)!=null}const rf=v.createContext(),at=()=>{const t=v.useContext(rf);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},ks=new Map,Iv=({children:t})=>{const[e,n]=v.useState(null),[s,i]=v.useState(!1),a=["admin@rentkenya.com","manager@rentkenya.com","super@rentkenya.com"],o=async(w,b)=>{i(!0);try{await new Promise(P=>setTimeout(P,1e3));const g=w.toLowerCase().trim(),m=ks.get(g),p=a.includes(g);if(!m&&!p)return{success:!1,error:"Account not found. Please check your email or sign up for a new account."};let k;return p?k={id:"admin-"+Date.now(),email:g,name:g.split("@")[0].charAt(0).toUpperCase()+g.split("@")[0].slice(1),phone:"+254700000000",role:"admin",joinDate:new Date().toISOString(),permissions:["manage_cars","manage_bookings","manage_users","view_analytics","manage_requests"]}:k={...m,id:m.id||Date.now()},n(k),localStorage.setItem("user",JSON.stringify(k)),localStorage.setItem("lastLoginTime",new Date().toISOString()),{success:!0,user:k}}catch(g){return console.error("Login error:",g),{success:!1,error:"Login failed due to a technical issue. Please try again."}}finally{i(!1)}},l=async w=>{var b,g,m;i(!0);try{await new Promise(P=>setTimeout(P,1200));const p=w.email.toLowerCase().trim();if(ks.has(p))return{success:!1,error:"An account with this email already exists. Please sign in instead."};if(!((b=w.name)!=null&&b.trim())||!((g=w.email)!=null&&g.trim())||!((m=w.phone)!=null&&m.trim()))return{success:!1,error:"All fields are required. Please complete the form."};const k={id:Date.now(),name:w.name.trim(),email:p,phone:w.phone.trim(),role:"user",permissions:["create_booking","view_own_bookings"],joinDate:new Date().toISOString(),emailVerified:!0,accountStatus:"active"};return ks.set(p,k),n(k),localStorage.setItem("user",JSON.stringify(k)),localStorage.setItem("lastLoginTime",new Date().toISOString()),{success:!0,user:k}}catch(p){return console.error("Registration error:",p),{success:!1,error:"Registration failed due to a technical issue. Please try again."}}finally{i(!1)}},c=()=>{n(null),localStorage.removeItem("user"),localStorage.removeItem("lastLoginTime"),typeof window<"u"&&sessionStorage.clear()},u=w=>{if(!e)return{success:!1,error:"No user logged in"};try{const b={...e,...w};return n(b),localStorage.setItem("user",JSON.stringify(b)),ks.set(e.email,b),{success:!0,user:b}}catch(b){return console.error("Update user error:",b),{success:!1,error:"Failed to update user information"}}},d=w=>{var b;return((b=e==null?void 0:e.permissions)==null?void 0:b.includes(w))||!1},f=()=>(e==null?void 0:e.role)==="admin",h=()=>{const w=localStorage.getItem("user");if(w)try{const b=JSON.parse(w);return n(b),{success:!0,user:b}}catch(b){return console.error("Error refreshing user:",b),c(),{success:!1,error:"Session expired. Please sign in again."}}return{success:!1,error:"No saved session found"}},x=()=>{const w=localStorage.getItem("lastLoginTime");return{isLoggedIn:!!e,lastLogin:w?new Date(w):null,sessionDuration:w?Date.now()-new Date(w).getTime():0}};Uu.useEffect(()=>{const w=localStorage.getItem("user"),b=localStorage.getItem("lastLoginTime");if(w&&b)try{const g=JSON.parse(w),m=new Date(b),k=new Date().getTime()-m.getTime(),P=30*24*60*60*1e3;k<P?(n(g),g.role==="admin"||ks.set(g.email,g)):c()}catch(g){console.error("Error restoring session:",g),c()}},[]);const y={user:e,login:o,register:l,logout:c,updateUser:u,refreshUser:h,getSessionInfo:x,isLoading:s,isAuthenticated:!!e,isAdmin:f(),hasPermission:d,getUserDisplayName:()=>{var w;return(e==null?void 0:e.name)||((w=e==null?void 0:e.email)==null?void 0:w.split("@")[0])||"User"},getUserInitials:()=>e!=null&&e.name?e.name.split(" ").map(w=>w.charAt(0)).join("").toUpperCase().slice(0,2):"U"};return r.jsx(rf.Provider,{value:y,children:t})};class Dv{constructor(){this.subscribers=new Map,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.simulationInterval=null,this.startSimulation()}connect(){return new Promise(e=>{setTimeout(()=>{this.isConnected=!0,this.reconnectAttempts=0,console.log("📡 Real-time service connected"),this.broadcast("connection",{status:"connected"}),e()},500)})}disconnect(){this.isConnected=!1,this.simulationInterval&&clearInterval(this.simulationInterval),console.log("📡 Real-time service disconnected")}subscribe(e,n){return this.subscribers.has(e)||this.subscribers.set(e,new Set),this.subscribers.get(e).add(n),console.log(`📡 Subscribed to ${e}`),()=>{this.unsubscribe(e,n)}}unsubscribe(e,n){this.subscribers.has(e)&&(this.subscribers.get(e).delete(n),console.log(`📡 Unsubscribed from ${e}`))}broadcast(e,n){this.subscribers.has(e)&&this.subscribers.get(e).forEach(s=>{try{s(n)}catch(i){console.error(`Error in subscriber callback for ${e}:`,i)}})}startSimulation(){this.connect().then(()=>{this.simulationInterval=setInterval(()=>{this.simulateRandomUpdates()},5e3)})}simulateRandomUpdates(){if(!this.isConnected)return;const e=[this.simulateBookingUpdate,this.simulateCarStatusUpdate,this.simulateNewMessage,this.simulateReviewUpdate,this.simulateCarLocationUpdate];Math.random()>.7&&e[Math.floor(Math.random()*e.length)].call(this)}simulateBookingUpdate(){const e=["confirmed","in-progress","completed","cancelled"],n={id:Math.floor(Math.random()*1e3),status:e[Math.floor(Math.random()*e.length)],carId:Math.floor(Math.random()*6)+1,timestamp:new Date().toISOString(),message:"Booking status updated"};this.broadcast("booking-update",n),console.log("📡 Simulated booking update:",n)}simulateCarStatusUpdate(){const e={carId:Math.floor(Math.random()*6)+1,available:Math.random()>.3,location:this.getRandomLocation(),timestamp:new Date().toISOString(),message:"Car availability updated"};this.broadcast("car-status-update",e),console.log("📡 Simulated car status update:",e)}simulateNewMessage(){const e={conversationId:Math.floor(Math.random()*3)+1,senderId:`renter${Math.floor(Math.random()*3)+1}`,message:this.getRandomMessage(),timestamp:new Date().toISOString()};this.broadcast("new-message",e),console.log("📡 Simulated new message:",e)}simulateReviewUpdate(){const e={carId:Math.floor(Math.random()*6)+1,rating:Math.floor(Math.random()*5)+1,reviewCount:Math.floor(Math.random()*50)+1,newRating:(Math.random()*2+3).toFixed(1),timestamp:new Date().toISOString()};this.broadcast("review-update",e),console.log("📡 Simulated review update:",e)}simulateCarLocationUpdate(){const e={carId:Math.floor(Math.random()*6)+1,latitude:-1.2921+(Math.random()-.5)*.1,longitude:36.8219+(Math.random()-.5)*.1,address:this.getRandomLocation(),timestamp:new Date().toISOString(),speed:Math.floor(Math.random()*80),isMoving:Math.random()>.4};this.broadcast("car-location-update",e),console.log("📡 Simulated location update:",e)}sendNotification(e,n){const s={id:Date.now(),type:e,data:n,timestamp:new Date().toISOString(),read:!1};this.broadcast("notification",s),console.log("📡 Sent notification:",s)}getConnectionStatus(){return{connected:this.isConnected,subscribers:Array.from(this.subscribers.keys()),reconnectAttempts:this.reconnectAttempts}}reconnect(){return this.reconnectAttempts>=this.maxReconnectAttempts?(console.error("📡 Max reconnection attempts reached"),!1):(this.disconnect(),this.reconnectAttempts++,setTimeout(()=>{this.connect()},this.reconnectDelay*this.reconnectAttempts),!0)}getRandomLocation(){const e=["Nairobi CBD","Westlands","Karen","Kilimani","Upper Hill","Gigiri","Lavington","Parklands","JKIA","Wilson Airport"];return e[Math.floor(Math.random()*e.length)]}getRandomMessage(){const e=["Hi, is the car still available?","I need to extend my rental period","Can we change the pickup location?","The car has been great so far!","I have a question about the insurance","When should I return the car?","Thank you for the excellent service","I need roadside assistance","The GPS is not working properly","Can I add an additional driver?"];return e[Math.floor(Math.random()*e.length)]}triggerBookingUpdate(e){this.broadcast("booking-update",{...e,timestamp:new Date().toISOString()})}triggerCarUpdate(e){this.broadcast("car-status-update",{...e,timestamp:new Date().toISOString()})}triggerMessageUpdate(e){this.broadcast("new-message",{...e,timestamp:new Date().toISOString()})}}const ft=new Dv;class Lv{constructor(){this.provider=this.detectProvider(),this.isConfigured=!1,this.templates=this.initializeTemplates(),this.init()}detectProvider(){return{}.VITE_SENDGRID_API_KEY?"sendgrid":{}.VITE_AWS_ACCESS_KEY_ID?"aws-ses":{}.VITE_RESEND_API_KEY?"resend":{}.VITE_EMAILJS_SERVICE_ID?"emailjs":"mock"}async init(){try{switch(this.provider){case"sendgrid":await this.initSendGrid();break;case"aws-ses":await this.initAWS();break;case"resend":await this.initResend();break;case"emailjs":await this.initEmailJS();break;default:console.warn("📧 Email service running in mock mode - emails will be logged to console"),this.isConfigured=!0}}catch(e){console.error("📧 Email service initialization failed:",e),this.provider="mock",this.isConfigured=!0}}async initSendGrid(){({}).VITE_SENDGRID_API_KEY&&(console.log("📧 SendGrid email service initialized"),this.isConfigured=!0)}async initAWS(){console.log("📧 AWS SES email service initialized"),this.isConfigured=!0}async initResend(){console.log("📧 Resend email service initialized"),this.isConfigured=!0}async initEmailJS(){({}).VITE_EMAILJS_SERVICE_ID&&(console.log("📧 EmailJS email service initialized"),this.isConfigured=!0)}initializeTemplates(){return{bookingConfirmation:{subject:"Booking Confirmation - {carName}",template:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">Booking Confirmed! 🚗</h1>
            </div>
            
            <div style="padding: 30px; background: #f8f9fa;">
              <h2 style="color: #333; margin-bottom: 20px;">Hello {customerName},</h2>
              <p style="font-size: 16px; line-height: 1.6; color: #555;">
                Great news! Your booking for the <strong>{carName}</strong> has been confirmed.
              </p>
              
              <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea;">
                <h3 style="margin-top: 0; color: #667eea;">Booking Details</h3>
                <table style="width: 100%; border-collapse: collapse;">
                  <tr><td style="padding: 8px 0; font-weight: bold;">Booking ID:</td><td>{bookingId}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Car:</td><td>{carName}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Pickup Date:</td><td>{pickupDate}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Return Date:</td><td>{returnDate}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Pickup Location:</td><td>{pickupLocation}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Total Amount:</td><td style="font-size: 18px; font-weight: bold; color: #667eea;">KES {totalAmount}</td></tr>
                </table>
              </div>
              
              <div style="background: #e3f2fd; padding: 15px; border-radius: 8px; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #1976d2;">📋 Next Steps</h4>
                <ul style="margin: 10px 0; padding-left: 20px;">
                  <li>Bring a valid driving license</li>
                  <li>Arrive 15 minutes before pickup time</li>
                  <li>Have payment confirmation ready</li>
                </ul>
              </div>
              
              <div style="text-align: center; margin: 30px 0;">
                <a href="{dashboardUrl}" style="background: #667eea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold;">View Booking Details</a>
              </div>
              
              <p style="font-size: 14px; color: #666; margin-top: 30px;">
                Questions? Reply to this email or contact our support team.<br>
                <strong>Phone:</strong> +254 700 123 456<br>
                <strong>Email:</strong> support@carrental.co.ke
              </p>
            </div>
            
            <div style="background: #333; color: white; padding: 20px; text-align: center; font-size: 12px;">
              <p style="margin: 0;">© 2024 CarRental Kenya. All rights reserved.</p>
            </div>
          </div>
        `},paymentReceived:{subject:"Payment Received - Booking {bookingId}",template:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background: #4caf50; color: white; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">Payment Confirmed! ✅</h1>
            </div>
            
            <div style="padding: 30px; background: #f8f9fa;">
              <h2 style="color: #333; margin-bottom: 20px;">Hello {customerName},</h2>
              <p style="font-size: 16px; line-height: 1.6; color: #555;">
                We've successfully received your payment of <strong>KES {amount}</strong> for your car rental booking.
              </p>
              
              <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #4caf50;">
                <h3 style="margin-top: 0; color: #4caf50;">Payment Details</h3>
                <table style="width: 100%; border-collapse: collapse;">
                  <tr><td style="padding: 8px 0; font-weight: bold;">Transaction ID:</td><td>{transactionId}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Amount:</td><td>KES {amount}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Payment Method:</td><td>{paymentMethod}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Date:</td><td>{paymentDate}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Booking ID:</td><td>{bookingId}</td></tr>
                </table>
              </div>
              
              <p style="font-size: 16px; color: #555;">
                Your booking is now fully confirmed and ready for pickup!
              </p>
              
              <div style="text-align: center; margin: 30px 0;">
                <a href="{receiptUrl}" style="background: #4caf50; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold;">Download Receipt</a>
              </div>
            </div>
          </div>
        `},bookingReminder:{subject:"Pickup Reminder - Your car rental is tomorrow!",template:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background: #ff9800; color: white; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">Pickup Reminder 🕐</h1>
            </div>
            
            <div style="padding: 30px; background: #f8f9fa;">
              <h2 style="color: #333;">Hello {customerName},</h2>
              <p style="font-size: 16px; line-height: 1.6; color: #555;">
                Just a friendly reminder that your car rental pickup is scheduled for tomorrow!
              </p>
              
              <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ff9800;">
                <h3 style="margin-top: 0; color: #ff9800;">Pickup Details</h3>
                <table style="width: 100%; border-collapse: collapse;">
                  <tr><td style="padding: 8px 0; font-weight: bold;">Car:</td><td>{carName}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Date:</td><td>{pickupDate}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Time:</td><td>{pickupTime}</td></tr>
                  <tr><td style="padding: 8px 0; font-weight: bold;">Location:</td><td>{pickupLocation}</td></tr>
                </table>
              </div>
              
              <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin: 20px 0;">
                <h4 style="margin-top: 0; color: #f57c00;">📝 Checklist</h4>
                <ul style="margin: 10px 0; padding-left: 20px;">
                  <li>Valid driving license</li>
                  <li>Payment confirmation</li>
                  <li>Arrive 15 minutes early</li>
                </ul>
              </div>
            </div>
          </div>
        `},statusUpdate:{subject:"Booking Status Update - {status}",template:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background: {statusColor}; color: white; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">Status Update</h1>
            </div>
            
            <div style="padding: 30px; background: #f8f9fa;">
              <h2 style="color: #333;">Hello {customerName},</h2>
              <p style="font-size: 16px; line-height: 1.6; color: #555;">
                Your booking status has been updated to: <strong>{status}</strong>
              </p>
              
              <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <p style="font-size: 16px; color: #555;">{statusMessage}</p>
              </div>
            </div>
          </div>
        `},supportMessage:{subject:"New Message from CarRental Support",template:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <div style="background: #667eea; color: white; padding: 30px; text-align: center;">
              <h1 style="margin: 0; font-size: 28px;">New Message 💬</h1>
            </div>
            
            <div style="padding: 30px; background: #f8f9fa;">
              <h2 style="color: #333;">Hello {customerName},</h2>
              <p style="font-size: 16px; line-height: 1.6; color: #555;">
                You have a new message from our support team:
              </p>
              
              <div style="background: white; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #667eea;">
                <p style="font-size: 16px; line-height: 1.6; color: #333;">{message}</p>
              </div>
              
              <div style="text-align: center; margin: 30px 0;">
                <a href="{chatUrl}" style="background: #667eea; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: bold;">Reply to Message</a>
              </div>
            </div>
          </div>
        `}}}async sendBookingConfirmation(e){const n={customerName:e.customerName,carName:e.carName,bookingId:e.id,pickupDate:new Date(e.pickupDate).toLocaleDateString(),returnDate:new Date(e.returnDate).toLocaleDateString(),pickupLocation:e.pickupLocation,totalAmount:e.totalAmount.toLocaleString(),dashboardUrl:`${window.location.origin}/dashboard`};return this.sendEmail(e.customerEmail,"bookingConfirmation",n)}async sendPaymentConfirmation(e){const n={customerName:e.customerName,amount:e.amount.toLocaleString(),transactionId:e.transactionId,paymentMethod:e.paymentMethod,paymentDate:new Date(e.date).toLocaleDateString(),bookingId:e.bookingId,receiptUrl:`${window.location.origin}/receipt/${e.transactionId}`};return this.sendEmail(e.customerEmail,"paymentReceived",n)}async sendBookingReminder(e){const n={customerName:e.customerName,carName:e.carName,pickupDate:new Date(e.pickupDate).toLocaleDateString(),pickupTime:e.pickupTime,pickupLocation:e.pickupLocation};return this.sendEmail(e.customerEmail,"bookingReminder",n)}async sendStatusUpdate(e){const n={confirmed:"#4caf50","in-progress":"#ff9800",completed:"#2196f3",cancelled:"#f44336"},s={confirmed:"Your booking has been confirmed and is ready for pickup.","in-progress":"Your rental is currently active. Enjoy your drive!",completed:"Your rental has been completed. Thank you for choosing us!",cancelled:"Your booking has been cancelled. If you have questions, please contact support."},i={customerName:e.customerName,status:e.status,statusColor:n[e.status]||"#666",statusMessage:s[e.status]||"Your booking status has been updated."};return this.sendEmail(e.customerEmail,"statusUpdate",i)}async sendSupportMessage(e){const n={customerName:e.customerName,message:e.message,chatUrl:`${window.location.origin}/dashboard#messages`};return this.sendEmail(e.customerEmail,"supportMessage",n)}async sendEmail(e,n,s){try{if(!this.isConfigured)return console.warn("📧 Email service not configured"),{success:!1,error:"Email service not configured"};const i=this.templates[n];if(!i)throw new Error(`Template ${n} not found`);const a=this.interpolateTemplate(i.subject,s),o=this.interpolateTemplate(i.template,s);switch(this.provider){case"sendgrid":return this.sendWithSendGrid(e,a,o);case"aws-ses":return this.sendWithAWS(e,a,o);case"resend":return this.sendWithResend(e,a,o);case"emailjs":return this.sendWithEmailJS(e,a,o);default:return this.sendMockEmail(e,a,o)}}catch(i){return console.error("📧 Email sending failed:",i),{success:!1,error:i.message}}}interpolateTemplate(e,n){return e.replace(/\{(\w+)\}/g,(s,i)=>n[i]||s)}async sendMockEmail(e,n,s){return console.log(`
📧 ===== MOCK EMAIL =====`),console.log(`📧 To: ${e}`),console.log(`📧 Subject: ${n}`),console.log(`📧 HTML: ${s.substring(0,200)}...`),console.log(`📧 =====================
`),{success:!0,messageId:`mock_${Date.now()}`}}async sendWithSendGrid(e,n,s){return console.log("📧 Sending email via SendGrid...",{to:e,subject:n}),{success:!0,messageId:`sg_${Date.now()}`}}async sendWithAWS(e,n,s){return console.log("📧 Sending email via AWS SES...",{to:e,subject:n}),{success:!0,messageId:`aws_${Date.now()}`}}async sendWithResend(e,n,s){return console.log("📧 Sending email via Resend...",{to:e,subject:n}),{success:!0,messageId:`resend_${Date.now()}`}}async sendWithEmailJS(e,n,s){return console.log("📧 Sending email via EmailJS...",{to:e,subject:n}),{success:!0,messageId:`emailjs_${Date.now()}`}}getServiceStatus(){return{provider:this.provider,configured:this.isConfigured,templatesLoaded:Object.keys(this.templates).length}}}const Pa=new Lv,af=v.createContext(),Vl=()=>{const t=v.useContext(af);if(!t)throw new Error("useNotifications must be used within NotificationProvider");return t},Mv=({children:t})=>{const[e,n]=v.useState([]),[s,i]=v.useState([]),[a,o]=v.useState(0),[l,c]=v.useState({email:!0,push:!0,inApp:!0,sound:!0});v.useEffect(()=>{const j=s.map(S=>S.autoRemove!==!1?setTimeout(()=>{f(S.id)},S.duration||5e3):null).filter(Boolean);return()=>{j.forEach(S=>clearTimeout(S))}},[s]),v.useEffect(()=>{const j=ft.subscribe("notification",O=>{u({type:O.type,title:O.data.title||"New Notification",message:O.data.message,data:O.data,timestamp:O.timestamp})}),S=ft.subscribe("booking-update",O=>{u({type:"booking",title:"Booking Update",message:`Your booking status has been updated to ${O.status}`,data:O,timestamp:O.timestamp})}),L=ft.subscribe("new-message",O=>{O.senderId==="admin"&&u({type:"message",title:"New Message",message:O.message.length>50?O.message.substring(0,50)+"...":O.message,data:O,timestamp:O.timestamp})});return()=>{j(),S(),L()}},[]);const u=v.useCallback(j=>{const S={id:Date.now()+Math.random(),...j,read:!1,timestamp:j.timestamp||new Date().toISOString()};return n(L=>[S,...L]),o(L=>L+1),l.inApp&&d({type:j.type,title:j.title,message:j.message,icon:g(j.type)}),l.sound&&m(j.type),l.push&&"Notification"in window&&Notification.permission==="granted"&&new Notification(j.title,{body:j.message,icon:"/favicon.ico",tag:j.type}),S.id},[l]),d=v.useCallback(j=>{const S={id:Date.now()+Math.random(),type:j.type||"info",title:j.title,message:j.message,icon:j.icon,duration:j.duration||5e3,autoRemove:j.autoRemove!==!1,action:j.action,timestamp:new Date().toISOString()};return i(L=>[...L,S]),S.id},[]),f=v.useCallback(j=>{i(S=>S.filter(L=>L.id!==j))},[]),h=v.useCallback(j=>{n(S=>S.map(L=>L.id===j?{...L,read:!0}:L)),o(S=>Math.max(0,S-1))},[]),x=v.useCallback(()=>{n(j=>j.map(S=>({...S,read:!0}))),o(0)},[]),y=v.useCallback(()=>{n([]),o(0)},[]),w=v.useCallback(j=>{c(S=>({...S,...j})),localStorage.setItem("notificationPreferences",JSON.stringify({...l,...j}))},[l]);v.useEffect(()=>{const j=localStorage.getItem("notificationPreferences");if(j)try{c(JSON.parse(j))}catch(S){console.error("Failed to load notification preferences:",S)}},[]);const b=v.useCallback(async()=>"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":Notification.permission==="granted",[]),g=j=>({booking:"🚗",payment:"💳",message:"💬",reminder:"⏰",success:"✅",warning:"⚠️",error:"❌",info:"ℹ️"})[j]||"ℹ️",m=j=>{try{const S=new Audio;switch(j){case"message":S.src="/sounds/message.mp3";break;case"booking":S.src="/sounds/booking.mp3";break;case"payment":S.src="/sounds/payment.mp3";break;default:S.src="/sounds/notification.mp3"}S.volume=.3,S.play().catch(()=>{})}catch{}},p=v.useCallback((j,S,L={})=>u({type:"success",title:j,message:S,...L}),[u]),k=v.useCallback((j,S,L={})=>u({type:"error",title:j,message:S,...L}),[u]),P=v.useCallback((j,S,L={})=>u({type:"warning",title:j,message:S,...L}),[u]),_=v.useCallback((j,S,L={})=>u({type:"info",title:j,message:S,...L}),[u]),N=v.useCallback(j=>{const S=`Booking ${j.status}: ${j.carName}`;u({type:"booking",title:"Booking Update",message:S,data:j}),l.email&&Pa.sendStatusUpdate({customerEmail:j.customerEmail,customerName:j.customerName,status:j.status})},[u,l.email]),R=v.useCallback(j=>{u({type:"payment",title:"Payment Confirmed",message:`Payment of KES ${j.amount.toLocaleString()} received`,data:j}),l.email&&Pa.sendPaymentConfirmation(j)},[u,l.email]),E=v.useCallback(j=>{u({type:"message",title:"New Message",message:j.message,data:j}),l.email&&Pa.sendSupportMessage({customerEmail:j.customerEmail,customerName:j.customerName,message:j.message})},[u,l.email]),T={notifications:e,toasts:s,unreadCount:a,preferences:l,addNotification:u,addToast:d,removeToast:f,markAsRead:h,markAllAsRead:x,clearAll:y,updatePreferences:w,requestPermission:b,showSuccess:p,showError:k,showWarning:P,showInfo:_,showBookingNotification:N,showPaymentNotification:R,showMessageNotification:E,getNotificationIcon:g};return r.jsx(af.Provider,{value:T,children:t})};const Ov=()=>{const{notifications:t,unreadCount:e,markAsRead:n,markAllAsRead:s,clearAll:i,preferences:a,updatePreferences:o,requestPermission:l}=Vl(),[c,u]=v.useState(!1),[d,f]=v.useState(!1),h=v.useRef(null);v.useEffect(()=>{const m=p=>{h.current&&!h.current.contains(p.target)&&(u(!1),f(!1))};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const x=()=>{u(!c),f(!1)},y=m=>{m.read||n(m.id),m.type==="message"?window.location.hash="messages":m.type==="booking"&&(window.location.hash="bookings")},w=m=>{const p=new Date,k=new Date(m),P=Math.floor((p-k)/1e3);return P<60?"Just now":P<3600?`${Math.floor(P/60)}m ago`:P<86400?`${Math.floor(P/3600)}h ago`:P<604800?`${Math.floor(P/86400)}d ago`:k.toLocaleDateString()},b=async()=>{await l()&&o({push:!0})},g=t.slice(0,10);return r.jsxs("div",{className:"notification-center",ref:h,children:[r.jsxs("button",{className:"notification-bell",onClick:x,"aria-label":`Notifications ${e>0?`(${e} unread)`:""}`,children:[r.jsx("span",{className:"bell-icon",children:"🔔"}),e>0&&r.jsx("span",{className:"notification-badge",children:e>99?"99+":e})]}),c&&r.jsx("div",{className:"notification-dropdown",children:d?r.jsxs("div",{className:"notification-settings",children:[r.jsxs("div",{className:"settings-header",children:[r.jsx("button",{className:"back-btn",onClick:()=>f(!1),children:"← Back"}),r.jsx("h3",{children:"Notification Settings"})]}),r.jsx("div",{className:"settings-content",children:r.jsxs("div",{className:"setting-group",children:[r.jsx("h4",{children:"Delivery Methods"}),r.jsxs("div",{className:"setting-item",children:[r.jsxs("label",{className:"setting-label",children:[r.jsx("input",{type:"checkbox",checked:a.inApp,onChange:m=>o({inApp:m.target.checked})}),r.jsx("span",{className:"checkmark"}),"In-app notifications"]}),r.jsx("small",{children:"Show notifications within the app"})]}),r.jsxs("div",{className:"setting-item",children:[r.jsxs("label",{className:"setting-label",children:[r.jsx("input",{type:"checkbox",checked:a.push,onChange:m=>o({push:m.target.checked})}),r.jsx("span",{className:"checkmark"}),"Browser notifications"]}),r.jsx("small",{children:"Show desktop notifications"}),a.push&&"Notification"in window&&Notification.permission!=="granted"&&r.jsx("button",{className:"permission-btn",onClick:b,children:"Grant Permission"})]}),r.jsxs("div",{className:"setting-item",children:[r.jsxs("label",{className:"setting-label",children:[r.jsx("input",{type:"checkbox",checked:a.email,onChange:m=>o({email:m.target.checked})}),r.jsx("span",{className:"checkmark"}),"Email notifications"]}),r.jsx("small",{children:"Receive notifications via email"})]}),r.jsxs("div",{className:"setting-item",children:[r.jsxs("label",{className:"setting-label",children:[r.jsx("input",{type:"checkbox",checked:a.sound,onChange:m=>o({sound:m.target.checked})}),r.jsx("span",{className:"checkmark"}),"Sound alerts"]}),r.jsx("small",{children:"Play sound for new notifications"})]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"notification-header",children:[r.jsx("h3",{children:"Notifications"}),r.jsxs("div",{className:"notification-actions",children:[r.jsx("button",{className:"action-btn",onClick:()=>f(!0),title:"Settings",children:"⚙️"}),t.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"action-btn",onClick:s,title:"Mark all as read",disabled:e===0,children:"✓"}),r.jsx("button",{className:"action-btn",onClick:i,title:"Clear all",children:"🗑️"})]})]})]}),r.jsx("div",{className:"notification-list",children:g.length===0?r.jsxs("div",{className:"empty-notifications",children:[r.jsx("div",{className:"empty-icon",children:"🔕"}),r.jsx("p",{children:"No notifications yet"}),r.jsx("small",{children:"You'll see updates about your bookings and messages here"})]}):g.map(m=>r.jsx("div",{className:`notification-item ${m.read?"":"unread"}`,onClick:()=>y(m),children:r.jsxs("div",{className:"notification-content",children:[r.jsxs("div",{className:"notification-icon",children:[m.type==="booking"&&"🚗",m.type==="payment"&&"💳",m.type==="message"&&"💬",m.type==="reminder"&&"⏰",m.type==="success"&&"✅",m.type==="warning"&&"⚠️",m.type==="error"&&"❌",!["booking","payment","message","reminder","success","warning","error"].includes(m.type)&&"ℹ️"]}),r.jsxs("div",{className:"notification-text",children:[r.jsx("div",{className:"notification-title",children:m.title}),r.jsx("div",{className:"notification-message",children:m.message}),r.jsx("div",{className:"notification-time",children:w(m.timestamp)})]}),!m.read&&r.jsx("div",{className:"notification-unread-dot"})]})},m.id))}),t.length>10&&r.jsx("div",{className:"notification-footer",children:r.jsxs("button",{className:"view-all-btn",children:["View all ",t.length," notifications"]})})]})})]})};const $v=({onOpenAuth:t})=>{const[e,n]=v.useState(!1),{user:s,logout:i,isAuthenticated:a,isAdmin:o}=at(),l=mr(),c=()=>n(!e),u=f=>{f==="logout"?(i(),l("/")):t(f),n(!1)},d=()=>{l(o?"/admin":"/dashboard"),n(!1)};return r.jsx("nav",{className:"navigation",children:r.jsxs("div",{className:"nav-container",children:[r.jsxs(me,{to:"/",className:"nav-brand",children:[r.jsx("h3",{children:"🚗 RentKenya"}),r.jsx("span",{className:"nav-tagline",children:"Premium Car Rentals"})]}),r.jsxs("div",{className:`nav-menu ${e?"nav-menu-open":""}`,children:[r.jsx(me,{to:"/",className:"nav-link",onClick:()=>n(!1),children:"Home"}),r.jsx(me,{to:"/cars",className:"nav-link",onClick:()=>n(!1),children:"Our Cars"}),r.jsx(me,{to:"/about",className:"nav-link",onClick:()=>n(!1),children:"About"}),r.jsx(me,{to:"/contact",className:"nav-link",onClick:()=>n(!1),children:"Contact"}),r.jsx("div",{className:"nav-auth",children:a?r.jsxs("div",{className:"user-menu",children:[r.jsxs("span",{className:"user-greeting",children:["Hi, ",s.name,"! ",o&&r.jsx("span",{className:"admin-badge",children:"Admin"})]}),r.jsx(Ov,{}),r.jsx("button",{className:"btn-secondary",onClick:d,children:o?"🛡️ Admin Panel":"My Dashboard"}),r.jsx("button",{className:"btn-primary",onClick:()=>u("logout"),children:"Logout"})]}):r.jsxs("div",{className:"auth-buttons",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>u("login"),children:"Login"}),r.jsx("button",{className:"btn-primary",onClick:()=>u("register"),children:"Sign Up"})]})})]}),r.jsx("button",{className:"mobile-menu-btn",onClick:c,children:r.jsxs("span",{className:"hamburger",children:[r.jsx("span",{}),r.jsx("span",{}),r.jsx("span",{})]})})]})})},ct=[{id:1,name:"Toyota Vitz",category:"Economy",price:3500,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1566473179817-5d3e87501e1d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1555215695-3004980ad54e?w=500&h=300&fit=crop"],features:["Automatic","5 Seats","Air Conditioning","Bluetooth"],fuel:"Petrol",transmission:"Automatic",year:2020,available:!0,rating:4.5,reviewCount:127,ratingBreakdown:{5:78,4:32,3:12,2:3,1:2},reviews:[{id:1,userId:"user123",userName:"James Mwangi",userAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=64&h=64&fit=crop&crop=face",rating:5,title:"Excellent city car",comment:"Perfect for navigating Nairobi traffic. Very fuel efficient and the AC worked great even in the heat. Would definitely rent again!",date:"2024-01-15",helpful:12,tripDuration:"3 days",verified:!0},{id:2,userId:"user456",userName:"Sarah Kiprotich",userAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b1ab?w=64&h=64&fit=crop&crop=face",rating:4,title:"Good value for money",comment:"Clean car with good fuel economy. Perfect for weekend trips around the city. The pickup process was smooth and hassle-free.",date:"2024-01-10",helpful:8,tripDuration:"2 days",verified:!0},{id:3,userId:"user789",userName:"Peter Ochieng",userAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=64&h=64&fit=crop&crop=face",rating:5,title:"Reliable and comfortable",comment:"Used this for business meetings around town. Very reliable and comfortable. The Bluetooth connection worked perfectly for hands-free calls.",date:"2024-01-08",helpful:15,tripDuration:"5 days",verified:!0}],instantBook:!0,hostName:"KenyaCars Rental",hostRating:4.8,hostReviews:245,description:"Perfect for city driving in Nairobi. Fuel efficient and reliable for daily commutes and short trips.",pickupLocations:["Jomo Kenyatta Airport","Nairobi CBD","Westlands","Kisumu","Eldoret"],specifications:{engine:"1.3L 4-Cylinder",mileage:"18 km/l",doors:5,luggage:"2 large bags",insurance:"Comprehensive",minAge:21}},{id:2,name:"Nissan X-Trail",category:"SUV",price:8500,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1517026575980-3e1e2dedeab4?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1562789549-7ba1b06e7c69?w=500&h=300&fit=crop"],features:["AWD","7 Seats","Sunroof","Navigation","Leather Seats"],fuel:"Petrol",transmission:"CVT",year:2022,available:!0,rating:4.8,reviewCount:89,ratingBreakdown:{5:65,4:18,3:4,2:1,1:1},reviews:[{id:4,userId:"user234",userName:"Mary Wanjiku",userAvatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=64&h=64&fit=crop&crop=face",rating:5,title:"Perfect for safari!",comment:"Amazing vehicle for our Maasai Mara trip. The AWD handled rough roads perfectly and there was plenty of space for our family of 6. Highly recommend!",date:"2024-01-20",helpful:23,tripDuration:"7 days",verified:!0},{id:5,userId:"user567",userName:"David Kimani",userAvatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=64&h=64&fit=crop&crop=face",rating:5,title:"Excellent family car",comment:"Spacious and comfortable for our road trip to Mombasa. The navigation system was very helpful and fuel consumption was reasonable.",date:"2024-01-18",helpful:19,tripDuration:"4 days",verified:!0}],instantBook:!0,hostName:"Safari Adventures Kenya",hostRating:4.9,hostReviews:156,description:"Ideal for safari trips and family adventures across Kenya. Perfect for Maasai Mara and Amboseli expeditions.",pickupLocations:["Wilson Airport","Nairobi CBD","Karen","Gigiri","Mombasa","Nakuru"],specifications:{engine:"2.5L 4-Cylinder",mileage:"12 km/l",doors:5,luggage:"4 large bags",insurance:"Comprehensive + Safari Coverage",minAge:25}},{id:3,name:"Toyota Hilux",category:"Pickup",price:12e3,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1562349831-cf5ea95b3a31?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1562349831-cf5ea95b3a31?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1551830820-330a71b99659?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1553440569-bcc63803a83d?w=500&h=300&fit=crop"],features:["4WD","Double Cab","Towing Capacity","Off-road Ready"],fuel:"Diesel",transmission:"Manual",year:2021,available:!0,rating:4.7,reviewCount:156,ratingBreakdown:{5:89,4:45,3:15,2:5,1:2},reviews:[{id:6,userId:"user345",userName:"John Kariuki",userAvatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=64&h=64&fit=crop&crop=face",rating:5,title:"Tough and reliable",comment:"Used this for construction work in Kiambu. Handled heavy loads and rough terrain with ease. Excellent fuel efficiency for a pickup.",date:"2024-01-22",helpful:31,tripDuration:"10 days",verified:!0},{id:7,userId:"user678",userName:"Grace Mutua",userAvatar:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=64&h=64&fit=crop&crop=face",rating:4,title:"Great for adventure trips",comment:"Perfect for our camping trip to Mount Kenya. The 4WD was essential on mountain roads. Spacious cab for gear.",date:"2024-01-19",helpful:18,tripDuration:"5 days",verified:!0}],instantBook:!1,hostName:"WorkTruck Rentals",hostRating:4.6,hostReviews:98,description:"Perfect for construction work and off-road adventures. Built for Kenya's tough terrain.",pickupLocations:["Industrial Area","Mombasa Road","Thika Road","Machakos","Nyeri"],specifications:{engine:"2.4L Turbo Diesel",mileage:"10 km/l",doors:4,luggage:"Open bed + 2 bags",insurance:"Commercial Coverage",minAge:25}},{id:4,name:"Mercedes C-Class",category:"Luxury",price:15e3,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1558618666-fcd25c85cd64?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1555215695-3004980ad54e?w=500&h=300&fit=crop"],features:["Leather Interior","Premium Sound","Climate Control","Sport Mode"],fuel:"Petrol",transmission:"Automatic",year:2023,available:!1,rating:4.9,reviewCount:45,ratingBreakdown:{5:41,4:3,3:1,2:0,1:0},reviews:[{id:8,userId:"user456",userName:"Robert Njoroge",userAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=64&h=64&fit=crop&crop=face",rating:5,title:"Luxury at its finest",comment:"Exceptional vehicle for business meetings. The interior is immaculate and the ride quality is superb. Perfect for impressing clients.",date:"2024-01-25",helpful:27,tripDuration:"3 days",verified:!0},{id:9,userId:"user789",userName:"Linda Achieng",userAvatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=64&h=64&fit=crop&crop=face",rating:5,title:"Special occasion perfect",comment:"Used this for my wedding day. Absolutely perfect! The driver service was professional and the car was spotless.",date:"2024-01-20",helpful:35,tripDuration:"1 day",verified:!0}],instantBook:!1,hostName:"Luxury Motors Kenya",hostRating:4.9,hostReviews:67,description:"Luxury comfort for business meetings and special occasions. Executive class transportation.",pickupLocations:["Jomo Kenyatta Airport","Serena Hotel","Villa Rosa Kempinski","Mombasa","Kisumu"],specifications:{engine:"2.0L Turbo",mileage:"14 km/l",doors:4,luggage:"3 large bags",insurance:"Premium Coverage",minAge:25}},{id:5,name:"Honda Freed",category:"Van",price:6500,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1506764543633-6b5f8f82c78a?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1506764543633-6b5f8f82c78a?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=500&h=300&fit=crop"],features:["8 Seats","Sliding Doors","Family Friendly","Spacious"],fuel:"Hybrid",transmission:"CVT",year:2019,available:!0,rating:4.4,reviewCount:78,ratingBreakdown:{5:42,4:24,3:8,2:3,1:1},reviews:[{id:10,userId:"user567",userName:"Catherine Wanjiru",userAvatar:"https://images.unsplash.com/photo-1517841905240-472988babdf9?w=64&h=64&fit=crop&crop=face",rating:4,title:"Great for families",comment:"Perfect for our family of 7. The sliding doors made it easy for kids to get in and out. Good fuel economy for a van.",date:"2024-01-17",helpful:16,tripDuration:"6 days",verified:!0},{id:11,userId:"user890",userName:"Michael Otieno",userAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=64&h=64&fit=crop&crop=face",rating:5,title:"Comfortable group travel",comment:"Used this for a church retreat to Nakuru. Everyone was comfortable and we had plenty of space for luggage. Hybrid engine saved on fuel costs.",date:"2024-01-14",helpful:22,tripDuration:"3 days",verified:!0}],instantBook:!0,hostName:"Family Rentals Kenya",hostRating:4.7,hostReviews:134,description:"Perfect for family trips and group transportation. Ideal for large families visiting Kenya.",pickupLocations:["Nairobi CBD","Westlands","Kasarani","Mombasa","Nakuru"],specifications:{engine:"1.5L Hybrid",mileage:"20 km/l",doors:5,luggage:"5 large bags",insurance:"Family Coverage",minAge:23}},{id:6,name:"Subaru Forester",category:"SUV",price:9500,currency:"KSH",priceUnit:"per day",image:"https://images.unsplash.com/photo-1549399505-7e1bfbdc858a?w=500&h=300&fit=crop",images:["https://images.unsplash.com/photo-1549399505-7e1bfbdc858a?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1568605117036-5fe5e7bab0b7?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=500&h=300&fit=crop"],features:["AWD","Safety Features","Roof Rails","Ground Clearance"],fuel:"Petrol",transmission:"CVT",year:2021,available:!0,rating:4.6,reviewCount:92,ratingBreakdown:{5:54,4:28,3:7,2:2,1:1},reviews:[{id:12,userId:"user123",userName:"Paul Maina",userAvatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=64&h=64&fit=crop&crop=face",rating:5,title:"All-weather champion",comment:"Drove this from Nairobi to Mombasa during rainy season. The AWD system handled everything perfectly. Very comfortable ride.",date:"2024-01-23",helpful:29,tripDuration:"4 days",verified:!0},{id:13,userId:"user234",userName:"Joyce Nyambura",userAvatar:"https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=64&h=64&fit=crop&crop=face",rating:4,title:"Safe and reliable",comment:"Great safety features gave me confidence driving with my family. The ground clearance was helpful on rural roads in Meru.",date:"2024-01-16",helpful:14,tripDuration:"5 days",verified:!0}],instantBook:!0,hostName:"Adventure Drives Kenya",hostRating:4.8,hostReviews:178,description:"Reliable AWD for all weather conditions in Kenya. Excellent for highlands and coastal drives.",pickupLocations:["JKIA","Nairobi CBD","Upper Hill","Kiambu Road","Meru","Eldoret"],specifications:{engine:"2.5L Boxer",mileage:"13 km/l",doors:5,luggage:"4 large bags",insurance:"All-terrain Coverage",minAge:23}}],Io=[{id:"all",name:"All Cars",count:ct.length},{id:"economy",name:"Economy",count:ct.filter(t=>t.category==="Economy").length},{id:"suv",name:"SUV",count:ct.filter(t=>t.category==="SUV").length},{id:"luxury",name:"Luxury",count:ct.filter(t=>t.category==="Luxury").length},{id:"pickup",name:"Pickup",count:ct.filter(t=>t.category==="Pickup").length},{id:"van",name:"Van",count:ct.filter(t=>t.category==="Van").length}],of={nairobi:{name:"Nairobi County",locations:["Jomo Kenyatta International Airport (JKIA)","Wilson Airport","Nairobi CBD","Westlands","Karen","Gigiri","Upper Hill","Kilimani","Lavington","Parklands","Eastleigh","South B","South C","Industrial Area","Kasarani","Embakasi","Langata","Runda","Muthaiga"]},central:{name:"Central Kenya",locations:["Thika","Kiambu","Nyeri","Nanyuki","Meru","Embu","Murang'a","Kirinyaga","Machakos","Kitui"]},coast:{name:"Coastal Region",locations:["Moi International Airport Mombasa","Mombasa CBD","Diani Beach","Malindi","Watamu","Lamu","Kilifi","Mtwapa","Ukunda","Voi"]},western:{name:"Western Kenya",locations:["Kisumu","Eldoret","Kakamega","Bungoma","Kitale","Busia","Webuye","Mumias","Vihiga"]},riftValley:{name:"Rift Valley",locations:["Nakuru","Naivasha","Kericho","Bomet","Narok","Kajiado","Maasai Mara","Lake Bogoria","Thomson's Falls","Iten"]},northern:{name:"Northern Kenya",locations:["Isiolo","Marsabit","Moyale","Lodwar","Maralal","Samburu"]},eastern:{name:"Eastern Kenya",locations:["Garissa","Wajir","Mandera","Isiolo","Mwingi"]}},ar=Object.values(of).flatMap(t=>t.locations).sort(),Bv=[{name:"Maasai Mara National Reserve",region:"Rift Valley",type:"Safari",recommendedCars:["Nissan X-Trail","Subaru Forester","Toyota Hilux"]},{name:"Amboseli National Park",region:"Eastern",type:"Safari",recommendedCars:["Nissan X-Trail","Subaru Forester"]},{name:"Diani Beach",region:"Coast",type:"Beach",recommendedCars:["Toyota Vitz","Honda Freed","Mercedes C-Class"]},{name:"Mount Kenya",region:"Central",type:"Adventure",recommendedCars:["Subaru Forester","Toyota Hilux"]},{name:"Lake Nakuru",region:"Rift Valley",type:"Wildlife",recommendedCars:["Nissan X-Trail","Subaru Forester"]},{name:"Tsavo National Parks",region:"Eastern",type:"Safari",recommendedCars:["Nissan X-Trail","Toyota Hilux"]}];const Uv=()=>{const t=mr(),[e,n]=v.useState({pickupLocation:"",dropoffLocation:"",pickupDate:"",dropoffDate:"",carType:"all"}),s=a=>{n({...e,[a.target.name]:a.target.value})},i=a=>{a.preventDefault(),console.log("Search Data:",e);const o=new URLSearchParams(e);t(`/cars?${o.toString()}`)};return r.jsxs("section",{className:"hero-section",children:[r.jsxs("div",{className:"hero-background",children:[r.jsx("div",{className:"hero-overlay"}),r.jsx("img",{src:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=1200&h=600&fit=crop",alt:"Nairobi skyline",className:"hero-bg-image"})]}),r.jsx("div",{className:"hero-content",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"hero-text",children:[r.jsx("h1",{children:"Explore Kenya with Premium Car Rentals"}),r.jsx("p",{children:"From Nairobi's bustling streets to safari adventures in Maasai Mara, find the perfect vehicle for your journey across beautiful Kenya."})]}),r.jsxs("div",{className:"search-card",children:[r.jsx("h3",{children:"Find Your Perfect Ride"}),r.jsxs("form",{onSubmit:i,className:"search-form",children:[r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pickupLocation",children:"Pickup Location"}),r.jsxs("select",{id:"pickupLocation",name:"pickupLocation",value:e.pickupLocation,onChange:s,required:!0,children:[r.jsx("option",{value:"",children:"Select pickup location"}),ar.map((a,o)=>r.jsx("option",{value:a,children:a},o))]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"dropoffLocation",children:"Dropoff Location"}),r.jsxs("select",{id:"dropoffLocation",name:"dropoffLocation",value:e.dropoffLocation,onChange:s,required:!0,children:[r.jsx("option",{value:"",children:"Select dropoff location"}),ar.map((a,o)=>r.jsx("option",{value:a,children:a},o))]})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pickupDate",children:"Pickup Date"}),r.jsx("input",{type:"date",id:"pickupDate",name:"pickupDate",value:e.pickupDate,onChange:s,min:new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"dropoffDate",children:"Dropoff Date"}),r.jsx("input",{type:"date",id:"dropoffDate",name:"dropoffDate",value:e.dropoffDate,onChange:s,min:e.pickupDate||new Date().toISOString().split("T")[0],required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"carType",children:"Car Type"}),r.jsxs("select",{id:"carType",name:"carType",value:e.carType,onChange:s,children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"economy",children:"Economy"}),r.jsx("option",{value:"suv",children:"SUV"}),r.jsx("option",{value:"luxury",children:"Luxury"}),r.jsx("option",{value:"pickup",children:"Pickup"}),r.jsx("option",{value:"van",children:"Van"})]})]})]}),r.jsx("button",{type:"submit",className:"search-btn",children:"🔍 Search Available Cars"})]})]}),r.jsxs("div",{className:"hero-stats",children:[r.jsxs("div",{className:"stat-item",children:[r.jsx("h4",{children:"10,000+"}),r.jsx("p",{children:"Happy Customers"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h4",{children:"200+"}),r.jsx("p",{children:"Available Cars"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h4",{children:"15+"}),r.jsx("p",{children:"Pickup Locations"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h4",{children:"24/7"}),r.jsx("p",{children:"Customer Support"})]})]})]})})]})};const lf=({car:t,isOpen:e,onClose:n})=>{const[s,i]=v.useState("newest"),[a,o]=v.useState("all");if(!e||!t)return null;const l=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),c=h=>r.jsx("div",{className:"review-stars",children:[1,2,3,4,5].map(x=>r.jsx("span",{className:`star ${x<=h?"filled":"empty"}`,children:"★"},x))}),u=h=>({5:"Excellent",4:"Good",3:"Average",2:"Poor",1:"Terrible"})[h]||"Unknown",f=[...t.reviews].sort((h,x)=>s==="newest"?new Date(x.date)-new Date(h.date):s==="oldest"?new Date(h.date)-new Date(x.date):s==="highest"?x.rating-h.rating:s==="lowest"?h.rating-x.rating:0).filter(h=>a==="all"?!0:h.rating===parseInt(a));return r.jsx("div",{className:"reviews-modal-overlay",onClick:n,children:r.jsxs("div",{className:"reviews-modal",onClick:h=>h.stopPropagation(),children:[r.jsxs("div",{className:"reviews-modal-header",children:[r.jsxs("div",{className:"modal-title-section",children:[r.jsxs("h2",{className:"modal-title",children:["Reviews for ",t.name]}),r.jsx("button",{className:"close-button",onClick:n,children:r.jsx("span",{children:"×"})})]}),r.jsxs("div",{className:"overall-rating",children:[r.jsxs("div",{className:"rating-score",children:[r.jsx("span",{className:"score-number",children:t.rating}),r.jsxs("div",{className:"rating-details",children:[c(t.rating),r.jsxs("span",{className:"total-reviews",children:[t.reviewCount," reviews"]})]})]}),r.jsx("div",{className:"rating-breakdown",children:Object.entries(t.ratingBreakdown).sort(([h],[x])=>x-h).map(([h,x])=>r.jsxs("div",{className:"breakdown-row",children:[r.jsxs("span",{className:"star-label",children:[h,"★"]}),r.jsx("div",{className:"breakdown-bar",children:r.jsx("div",{className:"breakdown-fill",style:{width:`${x/t.reviewCount*100}%`}})}),r.jsx("span",{className:"count",children:x})]},h))})]})]}),r.jsxs("div",{className:"reviews-filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"sort-select",children:"Sort by:"}),r.jsxs("select",{id:"sort-select",value:s,onChange:h=>i(h.target.value),className:"filter-select",children:[r.jsx("option",{value:"newest",children:"Newest first"}),r.jsx("option",{value:"oldest",children:"Oldest first"}),r.jsx("option",{value:"highest",children:"Highest rated"}),r.jsx("option",{value:"lowest",children:"Lowest rated"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"filter-select",children:"Filter by rating:"}),r.jsxs("select",{id:"filter-select",value:a,onChange:h=>o(h.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"All ratings"}),r.jsx("option",{value:"5",children:"5 stars"}),r.jsx("option",{value:"4",children:"4 stars"}),r.jsx("option",{value:"3",children:"3 stars"}),r.jsx("option",{value:"2",children:"2 stars"}),r.jsx("option",{value:"1",children:"1 star"})]})]})]}),r.jsx("div",{className:"reviews-list",children:f.length===0?r.jsx("div",{className:"no-reviews",children:r.jsx("p",{children:"No reviews match your current filters."})}):f.map(h=>r.jsxs("div",{className:"review-item",children:[r.jsxs("div",{className:"review-header",children:[r.jsxs("div",{className:"reviewer-info",children:[r.jsx("img",{src:h.userAvatar,alt:h.userName,className:"reviewer-avatar"}),r.jsxs("div",{className:"reviewer-details",children:[r.jsx("h4",{className:"reviewer-name",children:h.userName}),r.jsx("span",{className:"review-date",children:l(h.date)}),h.verified&&r.jsx("span",{className:"verified-badge",children:"Verified"})]})]}),r.jsxs("div",{className:"review-rating-section",children:[c(h.rating),r.jsx("span",{className:"rating-text",children:u(h.rating)})]})]}),r.jsxs("div",{className:"review-content",children:[h.title&&r.jsx("h5",{className:"review-title",children:h.title}),r.jsx("p",{className:"review-comment",children:h.comment}),r.jsxs("div",{className:"review-meta",children:[r.jsxs("span",{className:"trip-duration",children:["Trip duration: ",h.tripDuration]}),r.jsx("div",{className:"review-actions",children:r.jsxs("button",{className:"helpful-button",children:["👍 Helpful (",h.helpful,")"]})})]})]})]},h.id))}),r.jsx("div",{className:"reviews-modal-footer",children:r.jsxs("div",{className:"host-info-modal",children:[r.jsx("h3",{children:"About the host"}),r.jsxs("div",{className:"host-details",children:[r.jsx("strong",{children:t.hostName}),r.jsxs("div",{className:"host-stats",children:[r.jsxs("span",{children:["★ ",t.hostRating," host rating"]}),r.jsxs("span",{children:["• ",t.hostReviews," host reviews"]})]})]})]})})]})})};const Fv=({car:t,onBookNow:e,onViewDetails:n})=>{var w,b;const s=mr(),[i,a]=v.useState(!1),[o,l]=v.useState(!1),[c,u]=v.useState(!1),d=(g,m)=>new Intl.NumberFormat("en-KE",{style:"currency",currency:m==="KSH"?"KES":m,minimumFractionDigits:0}).format(g),f=()=>{s(`/cars/${t.id}`)},h=g=>{g.stopPropagation(),l(!o)},x=g=>{g.stopPropagation(),u(!0)};return(()=>t.available?{text:"Available now",className:"available"}:{text:"Unavailable",className:"unavailable"})(),r.jsxs("div",{className:`car-card-simple ${t.available?"":"car-unavailable"}`,onClick:f,children:[r.jsxs("div",{className:"car-image-section",children:[!i&&r.jsx("div",{className:"image-skeleton",children:r.jsx("div",{className:"skeleton-shimmer"})}),r.jsx("img",{src:t.image,alt:t.name,className:`car-image ${i?"loaded":""}`,onLoad:()=>a(!0),loading:"lazy"}),r.jsx("button",{className:`favorite-btn ${o?"favorited":""}`,onClick:h,"aria-label":"Add to favorites",children:r.jsx("svg",{viewBox:"0 0 24 24",className:"heart-icon",children:r.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),t.instantBook&&r.jsx("div",{className:"instant-book-badge-overlay",children:"Instant Book"})]}),r.jsxs("div",{className:"car-content-simple",children:[r.jsxs("div",{className:"car-header-simple",children:[r.jsx("h3",{className:"car-name-simple",children:t.name}),r.jsxs("div",{className:"rating-simple",children:[r.jsx("span",{className:"rating-star",children:"★"}),r.jsx("span",{className:"rating-number",children:t.rating}),r.jsxs("span",{className:"reviews-count-simple",onClick:x,children:["(",t.reviewCount||0,")"]})]})]}),r.jsxs("div",{className:"features-simple",children:[r.jsxs("span",{className:"feature-simple",children:[((w=t.specifications)==null?void 0:w.doors)||4," seats"]}),r.jsx("span",{className:"feature-divider",children:"•"}),r.jsx("span",{className:"feature-simple",children:t.fuel}),r.jsx("span",{className:"feature-divider",children:"•"}),r.jsx("span",{className:"feature-simple",children:t.transmission})]}),r.jsxs("div",{className:"location-simple",children:[r.jsx("span",{className:"location-icon",children:"📍"}),r.jsx("span",{className:"location-text",children:((b=t.pickupLocations)==null?void 0:b[0])||"Nairobi CBD"})]}),r.jsxs("div",{className:"car-footer-simple",children:[r.jsxs("div",{className:"price-simple",children:[r.jsx("span",{className:"price-amount-simple",children:d(t.price,t.currency)}),r.jsx("span",{className:"price-period-simple",children:"/day"})]}),r.jsx("button",{className:`btn-book-simple ${t.available?"":"btn-disabled"}`,onClick:g=>{g.stopPropagation(),t.available&&e(t)},disabled:!t.available,children:t.available?"Book":"Unavailable"})]})]}),r.jsx(lf,{car:t,isOpen:c,onClose:()=>u(!1)})]})};const cf=({onBookCar:t})=>{const[e,n]=v.useState("all"),[s,i]=v.useState("recommended"),[a,o]=v.useState(!1),[l,c]=v.useState("grid"),u=v.useMemo(()=>{let h=[...ct];return e!=="all"&&(h=h.filter(x=>x.category.toLowerCase()===e.toLowerCase())),a&&(h=h.filter(x=>x.available)),h.sort((x,y)=>{switch(s){case"price-low":return x.price-y.price;case"price-high":return y.price-x.price;case"rating":return y.rating-x.rating;case"year":return y.year-x.year;case"recommended":return y.rating*y.reviews-x.rating*x.reviews;default:return x.name.localeCompare(y.name)}}),h},[e,s,a]),d=h=>{h.available&&t&&t(h)},f=u.filter(h=>h.available).length;return r.jsx("section",{id:"cars",className:"car-listing-section",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"listing-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsx("h2",{children:"Find Your Perfect Car"}),r.jsx("p",{children:"Choose from our premium collection of vehicles across Kenya"})]}),r.jsxs("div",{className:"view-controls",children:[r.jsx("button",{className:`view-btn ${l==="grid"?"active":""}`,onClick:()=>c("grid"),"aria-label":"Grid view",children:r.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:r.jsx("path",{fill:"currentColor",d:"M3 3h8v8H3V3zm10 0h8v8h-8V3zM3 13h8v8H3v-8zm10 0h8v8h-8v-8z"})})}),r.jsx("button",{className:`view-btn ${l==="list"?"active":""}`,onClick:()=>c("list"),"aria-label":"List view",children:r.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:r.jsx("path",{fill:"currentColor",d:"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"})})})]})]}),r.jsxs("div",{className:"listing-filters",children:[r.jsx("div",{className:"category-filters",children:Io.map(h=>r.jsxs("button",{className:`category-pill ${e===h.id?"active":""}`,onClick:()=>n(h.id),children:[h.name,r.jsx("span",{className:"count",children:h.count})]},h.id))}),r.jsxs("div",{className:"filter-controls",children:[r.jsx("div",{className:"filter-group",children:r.jsxs("label",{className:"toggle-filter",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:h=>o(h.target.checked)}),r.jsx("span",{className:"toggle-slider"}),r.jsx("span",{className:"toggle-label",children:"Available only"})]})}),r.jsxs("div",{className:"sort-group",children:[r.jsx("label",{htmlFor:"sortBy",className:"sort-label",children:"Sort by:"}),r.jsxs("select",{id:"sortBy",value:s,onChange:h=>i(h.target.value),className:"sort-select",children:[r.jsx("option",{value:"recommended",children:"Recommended"}),r.jsx("option",{value:"price-low",children:"Price: Low to High"}),r.jsx("option",{value:"price-high",children:"Price: High to Low"}),r.jsx("option",{value:"rating",children:"Highest Rated"}),r.jsx("option",{value:"year",children:"Newest First"}),r.jsx("option",{value:"name",children:"Name A-Z"})]})]})]})]}),r.jsxs("div",{className:"results-summary",children:[r.jsxs("div",{className:"results-count",children:[r.jsx("span",{className:"count-number",children:u.length}),r.jsx("span",{className:"count-text",children:"cars found"}),f!==u.length&&r.jsxs("span",{className:"available-note",children:["• ",f," available now"]})]}),e!=="all"&&r.jsxs("div",{className:"active-filters",children:[r.jsx("span",{className:"filter-label",children:"Category:"}),r.jsxs("button",{className:"active-filter",onClick:()=>n("all"),children:[e,r.jsx("span",{className:"remove-filter",children:"×"})]})]})]}),r.jsx("div",{className:`cars-container ${l}`,children:u.length>0?u.map(h=>r.jsx(Fv,{car:h,onBookNow:d},h.id)):r.jsx("div",{className:"no-results",children:r.jsxs("div",{className:"no-results-content",children:[r.jsx("div",{className:"no-results-icon",children:"🚗"}),r.jsx("h3",{children:"No cars found"}),r.jsx("p",{children:"Try adjusting your filters to see more options."}),r.jsx("button",{className:"btn btn-outline",onClick:()=>{n("all"),o(!1)},children:"Clear all filters"})]})})}),u.length>0&&r.jsx("div",{className:"load-more-section",children:r.jsxs("p",{className:"results-footer",children:["Showing all ",u.length," available cars"]})})]})})};const zv=({onBookCar:t})=>r.jsxs("div",{className:"home-page",children:[r.jsx(Uv,{}),r.jsx(cf,{onBookCar:t}),r.jsx("section",{className:"features-section section",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Why Choose RentKenya?"}),r.jsx("p",{children:"Experience the best car rental service in Kenya"})]}),r.jsxs("div",{className:"features-grid",children:[r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"🚗"}),r.jsx("h3",{children:"Premium Fleet"}),r.jsx("p",{children:"Well-maintained vehicles from trusted brands, perfect for Nairobi roads and safari adventures."})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"📍"}),r.jsx("h3",{children:"Multiple Locations"}),r.jsx("p",{children:"Convenient pickup and drop-off points across Kenya, from JKIA to Mombasa and beyond."})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"💰"}),r.jsx("h3",{children:"Best Prices"}),r.jsx("p",{children:"Competitive rates with transparent pricing. No hidden fees, pay in Kenyan Shillings."})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"🛡️"}),r.jsx("h3",{children:"Fully Insured"}),r.jsx("p",{children:"Comprehensive insurance coverage including safari and off-road protection."})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"📞"}),r.jsx("h3",{children:"24/7 Support"}),r.jsx("p",{children:"Round-the-clock customer support in English and Swahili to assist you."})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"⚡"}),r.jsx("h3",{children:"Instant Booking"}),r.jsx("p",{children:"Quick and easy online booking system. Reserve your car in just a few clicks."})]})]})]})}),r.jsx("section",{className:"destinations-section section",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Popular Destinations"}),r.jsx("p",{children:"Explore Kenya's most beautiful places with our rental cars"})]}),r.jsxs("div",{className:"destinations-grid",children:[r.jsxs("div",{className:"destination-card",children:[r.jsx("img",{src:"https://images.unsplash.com/photo-1516026672322-bc52d61a55d5?w=400&h=250&fit=crop",alt:"Maasai Mara"}),r.jsxs("div",{className:"destination-info",children:[r.jsx("h3",{children:"Maasai Mara"}),r.jsx("p",{children:"World-famous wildlife reserve perfect for safari adventures"}),r.jsx("div",{className:"destination-distance",children:"4 hours from Nairobi"})]})]}),r.jsxs("div",{className:"destination-card",children:[r.jsx("img",{src:"https://images.unsplash.com/photo-1544735716-392fe2489ffa?w=400&h=250&fit=crop",alt:"Diani Beach"}),r.jsxs("div",{className:"destination-info",children:[r.jsx("h3",{children:"Diani Beach"}),r.jsx("p",{children:"Pristine white sand beaches on the Indian Ocean coast"}),r.jsx("div",{className:"destination-distance",children:"5 hours from Nairobi"})]})]}),r.jsxs("div",{className:"destination-card",children:[r.jsx("img",{src:"https://images.unsplash.com/photo-1547036967-23d11aacaee0?w=400&h=250&fit=crop",alt:"Mount Kenya"}),r.jsxs("div",{className:"destination-info",children:[r.jsx("h3",{children:"Mount Kenya"}),r.jsx("p",{children:"Africa's second-highest peak with stunning highland scenery"}),r.jsx("div",{className:"destination-distance",children:"3 hours from Nairobi"})]})]})]})]})}),r.jsx("section",{className:"cta-section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"cta-content",children:[r.jsx("h2",{children:"Ready to Explore Kenya?"}),r.jsx("p",{children:"Book your perfect rental car today and start your adventure across beautiful Kenya."}),r.jsx("button",{className:"btn-primary cta-button",onClick:()=>{var e;return(e=document.getElementById("cars"))==null?void 0:e.scrollIntoView({behavior:"smooth"})},children:"Browse Our Cars"})]})})})]});const Kv=()=>r.jsxs("div",{className:"about-page",children:[r.jsx("section",{className:"about-hero",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"about-hero-content",children:[r.jsx("h1",{children:"About RentKenya"}),r.jsx("p",{children:"Your trusted partner for car rentals across beautiful Kenya"})]})})}),r.jsx("section",{className:"about-story section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"story-grid",children:[r.jsxs("div",{className:"story-content",children:[r.jsx("h2",{children:"Our Story"}),r.jsx("p",{children:"Founded in 2018, RentKenya began with a simple mission: to make car rental accessible, affordable, and reliable for everyone exploring Kenya. From our humble beginnings with just 5 vehicles in Nairobi, we have grown to become Kenya's leading car rental service."}),r.jsx("p",{children:"Today, we operate across all major Kenyan cities and tourist destinations, from the bustling streets of Nairobi to the pristine beaches of Diani and the world-famous Maasai Mara. Our fleet of over 200 vehicles serves thousands of satisfied customers each year."}),r.jsx("p",{children:"We understand the unique needs of travelers in Kenya, whether you're a business professional navigating Nairobi traffic, a family exploring our national parks, or an adventurer seeking off-road experiences in our beautiful highlands."})]}),r.jsx("div",{className:"story-image",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=600&h=400&fit=crop",alt:"Nairobi skyline"})})]})})}),r.jsx("section",{className:"mission-section section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"mission-grid",children:[r.jsxs("div",{className:"mission-card",children:[r.jsx("div",{className:"mission-icon",children:"🎯"}),r.jsx("h3",{children:"Our Mission"}),r.jsx("p",{children:"To provide reliable, affordable, and convenient car rental services that enable our customers to explore Kenya safely and comfortably."})]}),r.jsxs("div",{className:"mission-card",children:[r.jsx("div",{className:"mission-icon",children:"👁️"}),r.jsx("h3",{children:"Our Vision"}),r.jsx("p",{children:"To be East Africa's premier car rental company, known for exceptional service, modern fleet, and commitment to customer satisfaction."})]}),r.jsxs("div",{className:"mission-card",children:[r.jsx("div",{className:"mission-icon",children:"⭐"}),r.jsx("h3",{children:"Our Values"}),r.jsx("p",{children:"Integrity, reliability, customer focus, and respect for Kenya's beautiful environment and diverse communities."})]})]})})}),r.jsx("section",{className:"team-section section",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"Our Leadership Team"}),r.jsx("p",{children:"Experienced professionals passionate about serving Kenya"})]}),r.jsxs("div",{className:"team-grid",children:[r.jsxs("div",{className:"team-member",children:[r.jsx("div",{className:"member-photo",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=300&fit=crop",alt:"CEO"})}),r.jsxs("div",{className:"member-info",children:[r.jsx("h3",{children:"David Kimani"}),r.jsx("p",{className:"member-role",children:"Chief Executive Officer"}),r.jsx("p",{children:"With over 15 years in the automotive industry, David founded RentKenya with a vision to revolutionize car rental services in East Africa."})]})]}),r.jsxs("div",{className:"team-member",children:[r.jsx("div",{className:"member-photo",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=300&h=300&fit=crop",alt:"COO"})}),r.jsxs("div",{className:"member-info",children:[r.jsx("h3",{children:"Grace Wanjiku"}),r.jsx("p",{className:"member-role",children:"Chief Operations Officer"}),r.jsx("p",{children:"Grace oversees our nationwide operations, ensuring every customer receives exceptional service across all our locations."})]})]}),r.jsxs("div",{className:"team-member",children:[r.jsx("div",{className:"member-photo",children:r.jsx("img",{src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=300&fit=crop",alt:"CTO"})}),r.jsxs("div",{className:"member-info",children:[r.jsx("h3",{children:"Michael Ochieng"}),r.jsx("p",{className:"member-role",children:"Chief Technology Officer"}),r.jsx("p",{children:"Michael leads our digital transformation, developing innovative solutions to make car rental simple and convenient."})]})]})]})]})}),r.jsx("section",{className:"stats-section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"10,000+"}),r.jsx("p",{children:"Happy Customers"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"200+"}),r.jsx("p",{children:"Vehicles in Fleet"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"15+"}),r.jsx("p",{children:"Cities Served"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"24/7"}),r.jsx("p",{children:"Customer Support"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"6"}),r.jsx("p",{children:"Years of Excellence"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("h3",{children:"98%"}),r.jsx("p",{children:"Customer Satisfaction"})]})]})})}),r.jsx("section",{className:"commitment-section section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"commitment-content",children:[r.jsx("h2",{children:"Our Commitment to Kenya"}),r.jsxs("div",{className:"commitment-grid",children:[r.jsxs("div",{className:"commitment-item",children:[r.jsx("h3",{children:"🌍 Environmental Responsibility"}),r.jsx("p",{children:"We're committed to reducing our carbon footprint through fuel-efficient vehicles and supporting Kenya's green initiatives."})]}),r.jsxs("div",{className:"commitment-item",children:[r.jsx("h3",{children:"👥 Community Support"}),r.jsx("p",{children:"We employ locally and support community projects in education, healthcare, and wildlife conservation across Kenya."})]}),r.jsxs("div",{className:"commitment-item",children:[r.jsx("h3",{children:"🦁 Tourism Promotion"}),r.jsx("p",{children:"We actively promote Kenya as a premier tourist destination, supporting local businesses and conservation efforts."})]}),r.jsxs("div",{className:"commitment-item",children:[r.jsx("h3",{children:"🛡️ Safety First"}),r.jsx("p",{children:"All our vehicles undergo rigorous safety checks, and we provide comprehensive insurance for peace of mind."})]})]})]})})})]});let q=[{id:1,userId:1,carId:2,carName:"Nissan X-Trail",pickupDate:"2024-08-20",dropoffDate:"2024-08-25",pickupLocation:"JKIA Airport",dropoffLocation:"Maasai Mara",status:"confirmed",totalPrice:42500,createdAt:"2024-08-15T10:00:00Z"},{id:2,userId:2,carId:1,carName:"Toyota Vitz",pickupDate:"2024-08-22",dropoffDate:"2024-08-24",pickupLocation:"Nairobi CBD",dropoffLocation:"Nakuru",status:"confirmed",totalPrice:7e3,createdAt:"2024-08-18T14:30:00Z"}],Sn=[{id:1,name:"John Doe",email:"john@example.com",phone:"+254700123456",subject:"booking",message:"I need a car for safari trip next month",location:"Nairobi CBD",status:"pending",createdAt:"2024-08-10T09:00:00Z"}];const Oe={checkDateConflict:(t,e,n,s=null)=>{const i=new Date(e),a=new Date(n),o=q.filter(l=>{if(s&&l.id===s||l.carId!==t||l.status==="cancelled")return!1;const c=new Date(l.pickupDate),u=new Date(l.dropoffDate);return i<u&&a>c});return{hasConflict:o.length>0,conflicts:o}},getAvailableCars:(t,e)=>{const{cars:n}=require("../data/cars");return n.filter(s=>s.available?!Oe.checkDateConflict(s.id,t,e).hasConflict:!1)},createBooking:async(t,e)=>{try{if(!e)throw new Error("Authentication required to make a booking");const n=Oe.checkDateConflict(t.carId,t.pickupDate,t.dropoffDate);if(n.hasConflict)throw new Error(`Car is not available for the selected dates. Conflicts with existing booking: ${n.conflicts[0].pickupDate} - ${n.conflicts[0].dropoffDate}`);const s=new Date(t.pickupDate),i=new Date(t.dropoffDate),a=new Date;if(a.setHours(0,0,0,0),s<a)throw new Error("Pickup date cannot be in the past");if(i<=s)throw new Error("Dropoff date must be after pickup date");const o={id:Date.now(),userId:e.id,...t,status:"pending_payment",paymentStatus:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return q.push(o),{success:!0,booking:o,message:"Booking created successfully and is pending approval"}}catch(n){return{success:!1,error:n.message}}},getUserBookings:t=>q.filter(e=>e.userId===t).sort((e,n)=>new Date(n.createdAt)-new Date(e.createdAt)),getAllBookings:()=>q.sort((t,e)=>new Date(e.createdAt)-new Date(t.createdAt)),updateBookingStatus:(t,e,n)=>{if(!n||n.role!=="admin")throw new Error("Admin access required");const s=q.findIndex(i=>i.id===t);if(s===-1)throw new Error("Booking not found");return q[s]={...q[s],status:e,updatedAt:new Date().toISOString(),updatedBy:n.id},q[s]},updateBookingPaymentStatus:(t,e,n=null)=>{const s=q.findIndex(a=>a.id===t);if(s===-1)throw new Error("Booking not found");let i=q[s].status;switch(e){case"completed":i="confirmed";break;case"pending":i="pending_payment_verification";break;case"failed":i="payment_failed";break}return q[s]={...q[s],status:i,paymentStatus:e,paymentId:n,paidAt:e==="completed"?new Date().toISOString():null,updatedAt:new Date().toISOString()},q[s]},getBookingById:t=>q.find(e=>e.id===t),createContactRequest:async t=>{const e={id:Date.now(),...t,status:"pending",createdAt:new Date().toISOString()};return Sn.push(e),e},getAllRequests:()=>Sn.sort((t,e)=>new Date(e.createdAt)-new Date(t.createdAt)),updateRequestStatus:(t,e,n)=>{if(!n||n.role!=="admin")throw new Error("Admin access required");const s=Sn.findIndex(i=>i.id===t);if(s===-1)throw new Error("Request not found");return Sn[s]={...Sn[s],status:e,updatedAt:new Date().toISOString(),handledBy:n.id},Sn[s]},getBookingStats:()=>{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),1),n=new Date(t.getFullYear(),0,1);return{total:q.length,pending:q.filter(s=>s.status==="pending").length,pendingPayment:q.filter(s=>s.status==="pending_payment").length,confirmed:q.filter(s=>s.status==="confirmed").length,completed:q.filter(s=>s.status==="completed").length,cancelled:q.filter(s=>s.status==="cancelled").length,paymentFailed:q.filter(s=>s.status==="payment_failed").length,thisMonth:q.filter(s=>new Date(s.createdAt)>=e).length,thisYear:q.filter(s=>new Date(s.createdAt)>=n).length,revenue:q.filter(s=>(s.status==="completed"||s.status==="confirmed")&&s.paymentStatus==="completed").reduce((s,i)=>s+(i.totalPrice||0),0),paidBookings:q.filter(s=>s.paymentStatus==="completed").length}}},Hv=Object.freeze(Object.defineProperty({__proto__:null,bookingService:Oe},Symbol.toStringTag,{value:"Module"}));const Wv=()=>{const[t,e]=v.useState({name:"",email:"",phone:"",subject:"",message:"",location:""}),[n,s]=v.useState(!1),[i,a]=v.useState(null),o=c=>{e({...t,[c.target.name]:c.target.value})},l=async c=>{c.preventDefault(),s(!0);try{await Oe.createContactRequest(t),a("success"),e({name:"",email:"",phone:"",subject:"",message:"",location:""})}catch{a("error")}finally{s(!1)}};return r.jsxs("div",{className:"contact-page",children:[r.jsx("section",{className:"contact-hero",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"contact-hero-content",children:[r.jsx("h1",{children:"Get In Touch"}),r.jsx("p",{children:"We're here to help with all your car rental needs across Kenya"})]})})}),r.jsx("section",{className:"contact-content section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"contact-grid",children:[r.jsxs("div",{className:"contact-info",children:[r.jsx("h2",{children:"Contact Information"}),r.jsx("p",{children:"Whether you need assistance with booking, have questions about our vehicles, or need roadside support, our team is here to help."}),r.jsxs("div",{className:"contact-methods",children:[r.jsxs("div",{className:"contact-method",children:[r.jsx("div",{className:"method-icon",children:"📞"}),r.jsxs("div",{className:"method-details",children:[r.jsx("h3",{children:"Phone Support"}),r.jsx("p",{children:"+254 700 000 000"}),r.jsx("p",{children:"Available 24/7"})]})]}),r.jsxs("div",{className:"contact-method",children:[r.jsx("div",{className:"method-icon",children:"📧"}),r.jsxs("div",{className:"method-details",children:[r.jsx("h3",{children:"Email Support"}),r.jsx("p",{children:"info@rentkenya.com"}),r.jsx("p",{children:"Response within 2 hours"})]})]}),r.jsxs("div",{className:"contact-method",children:[r.jsx("div",{className:"method-icon",children:"💬"}),r.jsxs("div",{className:"method-details",children:[r.jsx("h3",{children:"WhatsApp"}),r.jsx("p",{children:"+254 700 000 001"}),r.jsx("p",{children:"Quick replies & support"})]})]}),r.jsxs("div",{className:"contact-method",children:[r.jsx("div",{className:"method-icon",children:"🕒"}),r.jsxs("div",{className:"method-details",children:[r.jsx("h3",{children:"Business Hours"}),r.jsx("p",{children:"Monday - Sunday"}),r.jsx("p",{children:"6:00 AM - 10:00 PM"})]})]})]}),r.jsxs("div",{className:"emergency-support",children:[r.jsx("h3",{children:"🚨 Emergency Roadside Assistance"}),r.jsxs("p",{children:[r.jsx("strong",{children:"24/7 Emergency Line: +254 700 000 911"}),r.jsx("br",{}),"Available throughout Kenya for breakdowns, accidents, or any emergency situation."]})]})]}),r.jsxs("div",{className:"contact-form-section",children:[r.jsx("h2",{children:"Send Us a Message"}),r.jsxs("form",{onSubmit:l,className:"contact-form",children:[i==="success"&&r.jsx("div",{className:"status-message success",children:"Thank you for your message! Your request has been submitted and will be reviewed by our team within 2 hours. You'll receive a response via email."}),i==="error"&&r.jsx("div",{className:"status-message error",children:"Sorry, there was an error sending your message. Please try again or contact us directly."}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:t.name,onChange:o,required:!0,placeholder:"Enter your full name"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:t.email,onChange:o,required:!0,placeholder:"your.email@example.com"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"phone",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:t.phone,onChange:o,placeholder:"+254700000000"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"location",children:"Your Location"}),r.jsxs("select",{id:"location",name:"location",value:t.location,onChange:o,children:[r.jsx("option",{value:"",children:"Select your location"}),Object.entries(of).map(([c,u])=>r.jsx("optgroup",{label:u.name,children:u.locations.map((d,f)=>r.jsx("option",{value:d,children:d},f))},c))]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"subject",children:"Subject *"}),r.jsxs("select",{id:"subject",name:"subject",value:t.subject,onChange:o,required:!0,children:[r.jsx("option",{value:"",children:"Select a subject"}),r.jsx("option",{value:"booking",children:"New Booking Inquiry"}),r.jsx("option",{value:"support",children:"Customer Support"}),r.jsx("option",{value:"modification",children:"Booking Modification"}),r.jsx("option",{value:"complaint",children:"Complaint/Feedback"}),r.jsx("option",{value:"partnership",children:"Business Partnership"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"message",children:"Message *"}),r.jsx("textarea",{id:"message",name:"message",value:t.message,onChange:o,required:!0,rows:"5",placeholder:"Please provide details about your inquiry..."})]}),r.jsx("button",{type:"submit",className:"btn-primary submit-btn",disabled:n,children:n?"Sending Message...":"Send Message"})]})]})]})})}),r.jsx("section",{className:"office-locations section",children:r.jsxs("div",{className:"container",children:[r.jsx("h2",{children:"Our Office Locations"}),r.jsxs("div",{className:"offices-grid",children:[r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"🏢 Nairobi Head Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," Westlands Square, Westlands Road",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 100",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," Mon-Sat 8AM-6PM, Sun 9AM-5PM"]})]}),r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"✈️ JKIA Airport Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Location:"})," Arrivals Terminal 1A",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 200",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," 24/7 Operations"]})]}),r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"🏖️ Mombasa Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," Moi Avenue, Mombasa CBD",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 300",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," Mon-Sat 8AM-6PM, Sun 9AM-5PM"]})]}),r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"🌄 Kisumu Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," Oginga Odinga Street",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 400",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," Mon-Sat 8AM-6PM, Sun 9AM-5PM"]})]}),r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"🏔️ Eldoret Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," Uganda Road, Eldoret",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 500",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," Mon-Sat 8AM-6PM, Sun Closed"]})]}),r.jsxs("div",{className:"office-card",children:[r.jsx("h3",{children:"🦁 Nakuru Office"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," Kenyatta Avenue, Nakuru",r.jsx("br",{}),r.jsx("strong",{children:"Phone:"})," +254 700 000 600",r.jsx("br",{}),r.jsx("strong",{children:"Hours:"})," Mon-Sat 8AM-6PM, Sun 9AM-5PM"]})]})]})]})})]})};const Vv=({onBookCar:t})=>r.jsxs("div",{className:"cars-page",children:[r.jsx("section",{className:"cars-hero",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"cars-hero-content",children:[r.jsx("h1",{children:"Our Vehicle Fleet"}),r.jsx("p",{children:"Choose from our extensive collection of premium rental cars across Kenya"})]})})}),r.jsx(cf,{onBookCar:t}),r.jsx("section",{className:"car-benefits section",children:r.jsx("div",{className:"container",children:r.jsxs("div",{className:"benefits-grid",children:[r.jsxs("div",{className:"benefit-item",children:[r.jsx("h3",{children:"🔧 Regular Maintenance"}),r.jsx("p",{children:"All vehicles undergo comprehensive maintenance checks every 5,000km"})]}),r.jsxs("div",{className:"benefit-item",children:[r.jsx("h3",{children:"🛡️ Full Insurance"}),r.jsx("p",{children:"Comprehensive coverage including third-party, theft, and accident protection"})]}),r.jsxs("div",{className:"benefit-item",children:[r.jsx("h3",{children:"🗺️ GPS Navigation"}),r.jsx("p",{children:"Most vehicles come equipped with GPS navigation systems for easy travel"})]}),r.jsxs("div",{className:"benefit-item",children:[r.jsx("h3",{children:"⛽ Fuel Efficient"}),r.jsx("p",{children:"Our fleet focuses on fuel-efficient vehicles to save you money"})]})]})})})]});const qv=({car:t,isOpen:e,onClose:n,onSubmitReview:s})=>{const{user:i}=at(),[a,o]=v.useState(0),[l,c]=v.useState(""),[u,d]=v.useState(""),[f,h]=v.useState(""),[x,y]=v.useState(0),[w,b]=v.useState(!1);if(!e||!t)return null;const g=async N=>{if(N.preventDefault(),!i){alert("Please log in to submit a review");return}if(a===0){alert("Please select a rating");return}if(!u.trim()){alert("Please write a review comment");return}b(!0);try{const R={id:Date.now(),userId:i.id,userName:i.name||"Anonymous",userAvatar:i.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=64&h=64&fit=crop&crop=face",rating:a,title:l.trim(),comment:u.trim(),date:new Date().toISOString().split("T")[0],helpful:0,tripDuration:f||"1 day",verified:!0};s(t.id,R),o(0),c(""),d(""),h(""),alert("Review submitted successfully!"),n()}catch(R){alert("Error submitting review: "+R.message)}finally{b(!1)}},m=N=>{o(N)},p=N=>{y(N)},k=()=>{y(0)},P=N=>({1:"Terrible",2:"Poor",3:"Average",4:"Good",5:"Excellent"})[N]||"",_=x||a;return r.jsx("div",{className:"add-review-modal-overlay",onClick:n,children:r.jsxs("div",{className:"add-review-modal",onClick:N=>N.stopPropagation(),children:[r.jsxs("div",{className:"add-review-modal-header",children:[r.jsx("h2",{className:"modal-title",children:"Write a Review"}),r.jsx("button",{className:"close-button",onClick:n,children:r.jsx("span",{children:"×"})})]}),r.jsxs("div",{className:"car-info-header",children:[r.jsx("img",{src:t.image,alt:t.name,className:"car-image-small"}),r.jsxs("div",{className:"car-details",children:[r.jsx("h3",{children:t.name}),r.jsxs("p",{children:[t.year," • ",t.category]})]})]}),r.jsxs("form",{onSubmit:g,className:"review-form",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("label",{className:"form-label",children:"Overall Rating *"}),r.jsxs("div",{className:"rating-input",children:[r.jsx("div",{className:"stars-input",children:[1,2,3,4,5].map(N=>r.jsx("button",{type:"button",className:`star-button ${N<=_?"filled":"empty"}`,onClick:()=>m(N),onMouseEnter:()=>p(N),onMouseLeave:k,children:"★"},N))}),_>0&&r.jsx("span",{className:"rating-text",children:P(_)})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("label",{htmlFor:"review-title",className:"form-label",children:"Review Title"}),r.jsx("input",{type:"text",id:"review-title",value:l,onChange:N=>c(N.target.value),placeholder:"Summarize your experience...",className:"form-input",maxLength:100}),r.jsxs("small",{className:"form-hint",children:[l.length,"/100 characters"]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("label",{htmlFor:"review-comment",className:"form-label",children:"Your Review *"}),r.jsx("textarea",{id:"review-comment",value:u,onChange:N=>d(N.target.value),placeholder:"Tell others about your experience with this car. Was it clean? How was the fuel efficiency? Any issues?",className:"form-textarea",rows:5,maxLength:500,required:!0}),r.jsxs("small",{className:"form-hint",children:[u.length,"/500 characters"]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("label",{htmlFor:"trip-duration",className:"form-label",children:"Trip Duration"}),r.jsxs("select",{id:"trip-duration",value:f,onChange:N=>h(N.target.value),className:"form-select",children:[r.jsx("option",{value:"",children:"Select duration..."}),r.jsx("option",{value:"1 day",children:"1 day"}),r.jsx("option",{value:"2 days",children:"2 days"}),r.jsx("option",{value:"3 days",children:"3 days"}),r.jsx("option",{value:"4 days",children:"4 days"}),r.jsx("option",{value:"5 days",children:"5 days"}),r.jsx("option",{value:"1 week",children:"1 week"}),r.jsx("option",{value:"2 weeks",children:"2 weeks"}),r.jsx("option",{value:"1 month",children:"1 month"}),r.jsx("option",{value:"More than 1 month",children:"More than 1 month"})]})]}),r.jsxs("div",{className:"review-guidelines",children:[r.jsx("h4",{children:"Review Guidelines"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Be honest and helpful to other users"}),r.jsx("li",{children:"Focus on the car's condition, performance, and service"}),r.jsx("li",{children:"Avoid personal attacks or inappropriate language"}),r.jsx("li",{children:"Include specific details about your experience"})]})]}),r.jsxs("div",{className:"form-actions",children:[r.jsx("button",{type:"button",className:"btn-cancel",onClick:n,disabled:w,children:"Cancel"}),r.jsx("button",{type:"submit",className:"btn-submit",disabled:w||a===0||!u.trim(),children:w?"Submitting...":"Submit Review"})]})]})]})})},Jv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>kn(()=>Promise.resolve().then(()=>ds),void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)};class ql extends Error{constructor(e,n="FunctionsError",s){super(e),this.name=n,this.context=s}}class Gv extends ql{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fu extends ql{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class mu extends ql{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Do;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Do||(Do={}));var Yv=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Qv{constructor(e,{headers:n={},customFetch:s,region:i=Do.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Jv(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var s;return Yv(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(w=>{throw new Gv(w)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new fu(f);if(!f.ok)throw new mu(f);let x=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),y;return x==="application/json"?y=yield f.json():x==="application/octet-stream"?y=yield f.blob():x==="text/event-stream"?y=f:x==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(i){return{data:null,error:i,response:i instanceof mu||i instanceof fu?i.context:void 0}}})}}var Ee={},Jl={},qi={},gr={},Ji={},Gi={},Xv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rs=Xv();const Zv=rs.fetch,uf=rs.fetch.bind(rs),df=rs.Headers,ey=rs.Request,ty=rs.Response,ds=Object.freeze(Object.defineProperty({__proto__:null,Headers:df,Request:ey,Response:ty,default:uf,fetch:Zv},Symbol.toStringTag,{value:"Module"})),ny=Df(ds);var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0});let sy=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Yi.default=sy;var hf=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gi,"__esModule",{value:!0});const ry=hf(ny),iy=hf(Yi);let ay=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ry.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let i=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,f=null,h=a.status,x=a.statusText;if(a.ok){if(this.method!=="HEAD"){const g=await a.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const w=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const w=await a.text();try{u=JSON.parse(w),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,x="OK")}catch{a.status===404&&w===""?(h=204,x="No Content"):u={message:w}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,x="OK"),u&&this.shouldThrowOnError)throw new iy.default(u)}return{error:u,data:d,count:f,status:h,statusText:x}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Gi.default=ay;var oy=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ji,"__esModule",{value:!0});const ly=oy(Gi);let cy=class extends ly.default{select(e){let n=!1;const s=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:s,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:s,referencedTable:i=s}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:s=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,n?"verbose":null,s?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ji.default=cy;var uy=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gr,"__esModule",{value:!0});const dy=uy(Ji);let hy=class extends dy.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const s=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:s,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${a}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(e,n,s){return this.url.searchParams.append(e,`not.${n}.${s}`),this}or(e,{foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,s){return this.url.searchParams.append(e,`${n}.${s}`),this}};gr.default=hy;var fy=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qi,"__esModule",{value:!0});const Ns=fy(gr);let my=class{constructor(e,{headers:n={},schema:s,fetch:i}){this.url=e,this.headers=n,this.schema=s,this.fetch=i}select(e,{head:n=!1,count:s}={}){const i=n?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),s&&(this.headers.Prefer=`count=${s}`),new Ns.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:s=!0}={}){const i="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ns.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:s=!1,count:i,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ns.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const s="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new Ns.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new Ns.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qi.default=my;var Qi={},Xi={};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.version=void 0;Xi.version="0.0.0-automated";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.DEFAULT_HEADERS=void 0;const py=Xi;Qi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${py.version}`};var ff=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jl,"__esModule",{value:!0});const gy=ff(qi),vy=ff(gr),yy=Qi;let xy=class mf{constructor(e,{headers:n={},schema:s,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},yy.DEFAULT_HEADERS),n),this.schemaName=s,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new gy.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new mf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:s=!1,get:i=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;s||i?(o=s?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=n);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new vy.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Jl.default=xy;var hs=He&&He.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.PostgrestError=Ee.PostgrestBuilder=Ee.PostgrestTransformBuilder=Ee.PostgrestFilterBuilder=Ee.PostgrestQueryBuilder=Ee.PostgrestClient=void 0;const pf=hs(Jl);Ee.PostgrestClient=pf.default;const gf=hs(qi);Ee.PostgrestQueryBuilder=gf.default;const vf=hs(gr);Ee.PostgrestFilterBuilder=vf.default;const yf=hs(Ji);Ee.PostgrestTransformBuilder=yf.default;const xf=hs(Gi);Ee.PostgrestBuilder=xf.default;const wf=hs(Yi);Ee.PostgrestError=wf.default;var wy=Ee.default={PostgrestClient:pf.default,PostgrestQueryBuilder:gf.default,PostgrestFilterBuilder:vf.default,PostgrestTransformBuilder:yf.default,PostgrestBuilder:xf.default,PostgrestError:wf.default};const{PostgrestClient:jy,PostgrestQueryBuilder:$x,PostgrestFilterBuilder:Bx,PostgrestTransformBuilder:Ux,PostgrestBuilder:Fx,PostgrestError:zx}=wy;class ky{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const s=this.getWebSocketConstructor();return new s(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ny="2.15.1",by=`realtime-js/${Ny}`,Sy="1.0.0",Lo=1e4,_y=1e3,Cy=100;var Bs;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bs||(Bs={}));var ae;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ae||(ae={}));var Xe;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Xe||(Xe={}));var Mo;(function(t){t.websocket="websocket"})(Mo||(Mo={}));var cn;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(cn||(cn={}));class Ey{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,n,s)}_decodeBroadcast(e,n,s){const i=n.getUint8(1),a=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(e.slice(o,o+i));o=o+i;const c=s.decode(e.slice(o,o+a));o=o+a;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class jf{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var W;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(W||(W={}));const pu=(t,e,n={})=>{var s;const i=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(e).reduce((a,o)=>(a[o]=Py(o,t,e,i),a),{})},Py=(t,e,n,s)=>{const i=e.find(l=>l.name===t),a=i==null?void 0:i.type,o=n[t];return a&&!s.includes(a)?kf(a,o):Oo(o)},kf=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Iy(e,n)}switch(t){case W.bool:return Ty(e);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return Ay(e);case W.json:case W.jsonb:return Ry(e);case W.timestamp:return Dy(e);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:return Oo(e);default:return Oo(e)}},Oo=t=>t,Ty=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ay=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Ry=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Iy=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,s=t[n];if(t[0]==="{"&&s==="}"){let a;const o=t.slice(1,n);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>kf(e,l))}return t},Dy=t=>typeof t=="string"?t.replace(" ","T"):t,Nf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Ta{constructor(e,n,s={},i=Lo){this.channel=e,this.event=n,this.payload=s,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var s;return this._hasReceived(e)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gu;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gu||(gu={}));class Us{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Us.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=Us.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Us.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,s,i){const a=this.cloneDeep(e),o=this.transformState(n),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const h=d.map(b=>b.presence_ref),x=f.map(b=>b.presence_ref),y=d.filter(b=>x.indexOf(b.presence_ref)<0),w=f.filter(b=>h.indexOf(b.presence_ref)<0);y.length>0&&(l[u]=y),w.length>0&&(c[u]=w)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},s,i)}static syncDiff(e,n,s,i){const{joins:a,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const f=e[l].map(x=>x.presence_ref),h=d.filter(x=>f.indexOf(x.presence_ref)<0);e[l].unshift(...h)}s(l,d,c)}),this.map(o,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(s=>n(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,s)=>{const i=e[s];return"metas"in i?n[s]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[s]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vu;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(vu||(vu={}));var Fs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fs||(Fs={}));var gt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gt||(gt={}));class Gl{constructor(e,n={config:{}},s){this.topic=e,this.params=n,this.socket=s,this.bindings={},this.state=ae.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ta(this,Xe.join,this.params,this.timeout),this.rejoinTimer=new jf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ae.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ae.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ae.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xe.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new Us(this),this.broadcastEndpointURL=Nf(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ae.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(i=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(h=>h.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Fs.PRESENCE]&&this.bindings[Fs.PRESENCE].length>0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>e==null?void 0:e(gt.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(gt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var x;if(this.socket.setAuth(),h===void 0){e==null||e(gt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,w=(x=y==null?void 0:y.length)!==null&&x!==void 0?x:0,b=[];for(let g=0;g<w;g++){const m=y[g],{filter:{event:p,schema:k,table:P,filter:_}}=m,N=h&&h[g];if(N&&N.event===p&&N.schema===k&&N.table===P&&N.filter===_)b.push(Object.assign(Object.assign({},m),{id:N.id}));else{this.unsubscribe(),this.state=ae.errored,e==null||e(gt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(gt.SUBSCRIBED);return}}).receive("error",h=>{this.state=ae.errored,e==null||e(gt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,s){return this.state===ae.joined&&e===Fs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,s)}async send(e,n={}){var s,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ae.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xe.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(i=>{s=new Ta(this,Xe.leave,{},e),s.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ae.closed,this.bindings={}}async _fetchWithTimeout(e,n,s){const i=new AbortController,a=setTimeout(()=>i.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),o}_push(e,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ta(this,e,n,s);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Cy){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,s){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,s){var i,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Xe;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let h=this._onMessage(o,n,s);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(x=>{var y,w,b;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(w=x.filter)===null||w===void 0?void 0:w.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(x=>x.callback(h,s)):(a=this.bindings[o])===null||a===void 0||a.filter(x=>{var y,w,b,g,m,p;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const k=x.id,P=(y=x.filter)===null||y===void 0?void 0:y.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const k=(m=(g=x==null?void 0:x.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return k==="*"||k===((p=n==null?void 0:n.event)===null||p===void 0?void 0:p.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:w,table:b,commit_timestamp:g,type:m,errors:p}=y;h=Object.assign(Object.assign({},{schema:w,table:b,commit_timestamp:g,eventType:m,new:{},old:{},errors:p}),this._getPayloadRecords(y))}x.callback(h,s)})}_isClosed(){return this.state===ae.closed}_isJoined(){return this.state===ae.joined}_isJoining(){return this.state===ae.joining}_isLeaving(){return this.state===ae.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,s){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:s};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===s&&Gl.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(e[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xe.close,{},e)}_onError(e){this._on(Xe.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ae.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=pu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=pu(e.columns,e.old_record)),n}}const yu=()=>{},$r={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Ly=[1e3,2e3,5e3,1e4],My=1e4,Oy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $y{constructor(e,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lo,this.transport=null,this.heartbeatIntervalMs=$r.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yu,this.ref=0,this.reconnectTimer=null,this.logger=yu,this.conn=null,this.sendBuffer=[],this.serializer=new Ey,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>kn(()=>Promise.resolve().then(()=>ds),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Mo.websocket}`,this.httpEndpoint=Nf(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ky.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sy}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,s){this.logger(e,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Bs.connecting:return cn.Connecting;case Bs.open:return cn.Open;case Bs.closing:return cn.Closing;default:return cn.Closed}}isConnected(){return this.connectionState()===cn.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const s=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===s);if(i)return i;{const a=new Gl(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:s,payload:i,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(_y,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$r.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{n.topic==="phoenix"&&n.event==="phx_reply"&&this.heartbeatCallback(n.payload.status==="ok"?"ok":"error"),n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:i,payload:a,ref:o}=n,l=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${s} ${i} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xe.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const s=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${s}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const s=new Blob([Oy],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:by};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Xe.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new jf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$r.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,s,i,a,o,l,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:Lo,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:$r.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:d=>Ly[d-1]||My,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Yl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class By extends Yl{constructor(e,n,s){super(e),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $o extends Yl{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Uy=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const bf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>kn(()=>Promise.resolve().then(()=>ds),void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},Fy=()=>Uy(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kn(()=>Promise.resolve().then(()=>ds),void 0)).Response:Response}),Bo=t=>{if(Array.isArray(t))return t.map(n=>Bo(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,s])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Bo(s)}),e},zy=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var Nn=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Aa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ky=(t,e,n)=>Nn(void 0,void 0,void 0,function*(){const s=yield Fy();t instanceof s&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const a=t.status||500,o=(i==null?void 0:i.statusCode)||a+"";e(new By(Aa(i),a,o))}).catch(i=>{e(new $o(Aa(i),i))}):e(new $o(Aa(t),t))}),Hy=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!s?i:(zy(s)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(s)):i.body=s,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function vr(t,e,n,s,i,a){return Nn(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(n,Hy(e,s,i,a)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Ky(c,l,s))})})}function Ci(t,e,n,s){return Nn(this,void 0,void 0,function*(){return vr(t,"GET",e,n,s)})}function vt(t,e,n,s,i){return Nn(this,void 0,void 0,function*(){return vr(t,"POST",e,s,i,n)})}function Uo(t,e,n,s,i){return Nn(this,void 0,void 0,function*(){return vr(t,"PUT",e,s,i,n)})}function Wy(t,e,n,s){return Nn(this,void 0,void 0,function*(){return vr(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Sf(t,e,n,s,i){return Nn(this,void 0,void 0,function*(){return vr(t,"DELETE",e,s,i,n)})}var _e=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const Vy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class qy{constructor(e,n={},s,i){this.url=e,this.headers=n,this.bucketId=s,this.fetch=bf(i)}uploadOrUpdate(e,n,s,i){return _e(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},xu),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",s)):typeof FormData<"u"&&s instanceof FormData?(a=s,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),f=yield(e=="PUT"?Uo:vt)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(a){if(ue(a))return{data:null,error:a};throw a}})}upload(e,n,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,s)})}uploadToSignedUrl(e,n,s,i){return _e(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:xu.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Uo(this.fetch,l.toString(),c,{headers:d});return{data:{path:a,fullPath:f.Key},error:null}}catch(c){if(ue(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,n){return _e(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const a=yield vt(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new Yl("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}update(e,n,s){return _e(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,s)})}move(e,n,s){return _e(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}copy(e,n,s){return _e(this,void 0,void 0,function*(){try{return{data:{path:(yield vt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,s){return _e(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield vt(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,s){return _e(this,void 0,void 0,function*(){try{const i=yield vt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}download(e,n){return _e(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ci(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ue(l))return{data:null,error:l};throw l}})}info(e){return _e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const s=yield Ci(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Bo(s),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}exists(e){return _e(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Wy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(ue(s)&&s instanceof $o){const i=s.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,n){const s=this._getFinalPath(e),i=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(e){return _e(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}list(e,n,s){return _e(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Vy),n),{prefix:e||""});return{data:yield vt(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},s),error:null}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Jy="2.10.5",Gy={"X-Client-Info":`storage-js/${Jy}`};var _n=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class Yy{constructor(e,n={},s,i){const a=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},Gy),n),this.fetch=bf(s)}listBuckets(){return _n(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ue(e))return{data:null,error:e};throw e}})}getBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return _n(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return _n(this,void 0,void 0,function*(){try{return{data:yield Uo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}emptyBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}deleteBucket(e){return _n(this,void 0,void 0,function*(){try{return{data:yield Sf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}}class Qy extends Yy{constructor(e,n={},s,i){super(e,n,s,i)}from(e){return new qy(this.url,this.headers,e,this.fetch)}}const Xy="2.55.0";let Ps="";typeof Deno<"u"?Ps="deno":typeof document<"u"?Ps="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ps="react-native":Ps="node";const Zy={"X-Client-Info":`supabase-js-${Ps}/${Xy}`},e0={headers:Zy},t0={schema:"public"},n0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},s0={};var r0=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};const i0=t=>{let e;return t?e=t:typeof fetch>"u"?e=uf:e=fetch,(...n)=>e(...n)},a0=()=>typeof Headers>"u"?df:Headers,o0=(t,e,n)=>{const s=i0(n),i=a0();return(a,o)=>r0(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(a,Object.assign(Object.assign({},o),{headers:u}))})};var l0=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};function c0(t){return t.endsWith("/")?t:t+"/"}function u0(t,e){var n,s;const{db:i,auth:a,realtime:o,global:l}=t,{db:c,auth:u,realtime:d,global:f}=e,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>l0(this,void 0,void 0,function*(){return""})};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}const _f="2.71.1",An=30*1e3,Fo=3,Ra=Fo*An,d0="http://localhost:9999",h0="supabase.auth.token",f0={"X-Client-Info":`gotrue-js/${_f}`},zo="X-Supabase-Api-Version",Cf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},m0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,p0=10*60*1e3;class Ql extends Error{constructor(e,n,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function U(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class g0 extends Ql{constructor(e,n,s){super(e,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function v0(t){return U(t)&&t.name==="AuthApiError"}class Ef extends Ql{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class en extends Ql{constructor(e,n,s,i){super(e,s,i),this.name=n,this.status=s}}class Rt extends en{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function y0(t){return U(t)&&t.name==="AuthSessionMissingError"}class Br extends en{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ur extends en{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fr extends en{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function x0(t){return U(t)&&t.name==="AuthImplicitGrantRedirectError"}class wu extends en{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ko extends en{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ia(t){return U(t)&&t.name==="AuthRetryableFetchError"}class ju extends en{constructor(e,n,s){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class Ho extends en{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ku=` 	
\r=`.split(""),w0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<ku.length;e+=1)t[ku[e].charCodeAt(0)]=-2;for(let e=0;e<Ei.length;e+=1)t[Ei[e].charCodeAt(0)]=e;return t})();function Nu(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ei[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;n(Ei[s]),e.queuedBits-=6}}function Pf(t,e,n){const s=w0[t];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function bu(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{N0(o,s,n)};for(let o=0;o<t.length;o+=1)Pf(t.charCodeAt(o),i,a);return e.join("")}function j0(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function k0(t,e){for(let n=0;n<t.length;n+=1){let s=t.charCodeAt(n);if(s>55295&&s<=56319){const i=(s-55296)*1024&65535;s=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}j0(s,e)}}function N0(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let s=1;s<6;s+=1)if(!(t>>7-s&1)){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function b0(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Pf(t.charCodeAt(i),n,s);return new Uint8Array(e)}function S0(t){const e=[];return k0(t,n=>e.push(n)),new Uint8Array(e)}function _0(t){const e=[],n={queue:0,queuedBits:0},s=i=>{e.push(i)};return t.forEach(i=>Nu(i,n,s)),Nu(null,n,s),e.join("")}function C0(t){return Math.round(Date.now()/1e3)+t}function E0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ge=()=>typeof window<"u"&&typeof document<"u",sn={tested:!1,writable:!1},Tf=()=>{if(!Ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sn.tested)return sn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),sn.tested=!0,sn.writable=!0}catch{sn.tested=!0,sn.writable=!1}return sn.writable};function P0(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((s,i)=>{e[i]=s}),e}const Af=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>kn(()=>Promise.resolve().then(()=>ds),void 0).then(({default:s})=>s(...n)):e=fetch,(...n)=>e(...n)},T0=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Rn=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},rn=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Tt=async(t,e)=>{await t.removeItem(e)};class Zi{constructor(){this.promise=new Zi.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Zi.promiseConstructor=Promise;function Da(t){const e=t.split(".");if(e.length!==3)throw new Ho("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!m0.test(e[s]))throw new Ho("JWT not in base64url format");return{header:JSON.parse(bu(e[0])),payload:JSON.parse(bu(e[1])),signature:b0(e[2]),raw:{header:e[0],payload:e[1]}}}async function A0(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function R0(t,e){return new Promise((s,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){s(o);return}}catch(o){if(!e(a,o)){i(o);return}}})()})}function I0(t){return("0"+t.toString(16)).substr(-2)}function D0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*s));return i}return crypto.getRandomValues(e),Array.from(e,I0).join("")}async function L0(t){const n=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(s);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function M0(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await L0(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cn(t,e,n=!1){const s=D0();let i=s;n&&(i+="/PASSWORD_RECOVERY"),await Rn(t,`${e}-code-verifier`,i);const a=await M0(s);return[a,s===a?"plain":"s256"]}const O0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $0(t){const e=t.headers.get(zo);if(!e||!e.match(O0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function B0(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function U0(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function En(t){if(!F0.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function La(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Su(t){return JSON.parse(JSON.stringify(t))}var z0=globalThis&&globalThis.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};const ln=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),K0=[502,503,504];async function _u(t){var e;if(!T0(t))throw new Ko(ln(t),0);if(K0.includes(t.status))throw new Ko(ln(t),t.status);let n;try{n=await t.json()}catch(a){throw new Ef(ln(a),a)}let s;const i=$0(t);if(i&&i.getTime()>=Cf["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new ju(ln(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new Rt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new ju(ln(n),t.status,n.weak_password.reasons);throw new g0(ln(n),t.status||500,s)}const H0=(t,e,n,s)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),n))};async function F(t,e,n,s){var i;const a=Object.assign({},s==null?void 0:s.headers);a[zo]||(a[zo]=Cf["2024-01-01"].name),s!=null&&s.jwt&&(a.Authorization=`Bearer ${s.jwt}`);const o=(i=s==null?void 0:s.query)!==null&&i!==void 0?i:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await W0(t,e,n+l,{headers:a,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function W0(t,e,n,s,i,a){const o=H0(e,s,i,a);let l;try{l=await t(n,Object.assign({},o))}catch(c){throw console.error(c),new Ko(ln(c),0)}if(l.ok||await _u(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await _u(c)}}function mt(t){var e;let n=null;G0(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=C0(t.expires_in)));const s=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:s},error:null}}function Cu(t){const e=mt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ot(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function V0(t){return{data:t,error:null}}function q0(t){const{action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a}=t,o=z0(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:n,hashed_token:s,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function J0(t){return t}function G0(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ma=["global","local","others"];var Y0=globalThis&&globalThis.__rest||function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n};class Q0{constructor({url:e="",headers:n={},fetch:s}){this.url=e,this.headers=n,this.fetch=Af(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Ma[0]){if(Ma.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ma.join(", ")}`);try{return await F(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,n={}){try{return await F(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ot})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:n}=e,s=Y0(e,["options"]),i=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(i.new_email=s==null?void 0:s.newEmail,delete i.newEmail),await F(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:q0,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(U(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await F(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ot})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,s,i,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await F(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(a=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:J0});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const w=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);u[`${b}Page`]=w}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(U(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){En(e);try{return await F(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ot})}catch(n){if(U(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){En(e);try{return await F(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ot})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,n=!1){En(e);try{return await F(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ot})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){En(e.userId);try{const{data:n,error:s}=await F(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:s}}catch(n){if(U(n))return{data:null,error:n};throw n}}async _deleteFactor(e){En(e.userId),En(e.id);try{return{data:await F(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}}function Eu(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function X0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Pn={debug:!!(globalThis&&Tf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rf extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Z0 extends Rf{}async function ex(t,e,n){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async i=>{if(i){Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Pn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Z0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}X0();const tx={url:d0,storageKey:h0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:f0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pu(t,e,n){return await n()}const Tn={};class or{constructor(e){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=or.nextInstanceID,or.nextInstanceID+=1,this.instanceID>0&&Ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},tx),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Q0({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Af(i.fetch),this.lock=i.lock||Pu,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ge()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=ex:this.lock=Pu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Tf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),Ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Tn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Tn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Tn[this.storageKey]=Object.assign(Object.assign({},Tn[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${_f}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=P0(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Ge()&&this.detectSessionInUrl&&s!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,s);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),x0(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return U(n)?{error:n}:{error:new Ef("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,s,i;try{const a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:mt}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,s,i;try{let a;if("email"in e){const{email:d,password:f,options:h}=e;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Cn(this.storage,this.storageKey)),a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:x,code_challenge_method:y},xform:mt})}else if("phone"in e){const{phone:d,password:f,options:h}=e;a=await F(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:mt})}else throw new Ur("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(U(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:o,options:l}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cu})}else if("phone"in e){const{phone:a,password:o,options:l}=e;n=await F(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Cu})}else throw new Ur("You must provide either an email or phone number and a password");const{data:s,error:i}=n;return i?{data:{user:null,session:null},error:i}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new Br}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:i})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,s,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,s,i,a,o,l,c,u,d,f,h,x;let y,w;if("message"in e)y=e.message,w=e.signature;else{const{chain:b,wallet:g,statement:m,options:p}=e;let k;if(Ge())if(typeof g=="object")k=g;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))k=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(p!=null&&p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const P=new URL((n=p==null?void 0:p.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const _=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},p==null?void 0:p.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),m?{statement:m}:null));let N;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")N=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)N=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),w=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${P.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(i=(s=p==null?void 0:p.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=p==null?void 0:p.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${p.signInWithSolana.notBefore}`]:[],...!((o=p==null?void 0:p.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${p.signInWithSolana.expirationTime}`]:[],...!((l=p==null?void 0:p.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${p.signInWithSolana.chainId}`]:[],...!((c=p==null?void 0:p.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${p.signInWithSolana.nonce}`]:[],...!((u=p==null?void 0:p.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${p.signInWithSolana.requestId}`]:[],...!((f=(d=p==null?void 0:p.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...p.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const _=await k.signMessage(new TextEncoder().encode(y),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=_}}try{const{data:b,error:g}=await F(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:_0(w)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:mt});if(g)throw g;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Br}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:g})}catch(b){if(U(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(e){const n=await rn(this.storage,`${this.storageKey}-code-verifier`),[s,i]=(n??"").split("/");try{const{data:a,error:o}=await F(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:mt});if(await Tt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Br}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(U(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:s,token:i,access_token:a,nonce:o}=e,l=await F(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:mt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Br}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,s,i,a,o;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Cn(this.storage,this.storageKey));const{error:f}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await F(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ur("You must provide either an email or phone number.")}catch(l){if(U(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var n,s;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await F(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:mt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(U(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,s,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Cn(this.storage,this.storageKey)),await F(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:V0})}catch(a){if(U(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;if(s)throw s;if(!n)throw new Rt;const{error:i}=await F(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(U(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:s,type:i,options:a}=e,{error:o}=await F(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:i,options:a}=e,{data:o,error:l}=await F(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ur("You must provide either an email or phone number and a type")}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await rn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<Ra:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const o=await rn(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=La()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ot}):await this._useSession(async n=>{var s,i,a;const{data:o,error:l}=n;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rt}:await F(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Ot})})}catch(n){if(U(n))return y0(n)&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async s=>{const{data:i,error:a}=s;if(a)throw a;if(!i.session)throw new Rt;const o=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Cn(this.storage,this.storageKey));const{data:u,error:d}=await F(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ot});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(U(s))return{data:{user:null},error:s};throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rt;const n=Date.now()/1e3;let s=n,i=!0,a=null;const{payload:o}=Da(e.access_token);if(o.exp&&(s=o.exp,i=s<=n),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(U(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var s;if(!e){const{data:o,error:l}=n;if(l)throw l;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Rt;const{session:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(U(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ge())throw new Fr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new wu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new wu("No code detected.");const{data:m,error:p}=await this._exchangeCodeForSession(e.code);if(p)throw p;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=e;if(!a||!l||!o||!u)throw new Fr("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const x=h-d;x*1e3<=An&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:w,error:b}=await this._getUser(a);if(b)throw b;const g={provider_token:s,provider_refresh_token:i,access_token:a,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(s){if(U(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await rn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{error:a};const o=(s=i.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(v0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Tt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=E0(),s={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async n=>{var s,i;try{const{data:{session:a},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let s=null,i=null;this.flowType==="pkce"&&([s,i]=await Cn(this.storage,this.storageKey,!0));try{return await F(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(U(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:s,error:i}=await this._useSession(async a=>{var o,l,c,u,d;const{data:f,error:h}=a;if(h)throw h;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await F(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ge()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:e.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(U(s))return{data:{provider:e.provider,url:null},error:s};throw s}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:o}=n;if(o)throw o;return await F(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await R0(async i=>(i>0&&await A0(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await F(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:mt})),(i,a)=>{const o=200*Math.pow(2,i);return a&&Ia(a)&&Date.now()+o-s<An})}catch(s){if(this._debug(n,"error",s),U(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",s),Ge()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const i=await rn(this.storage,this.storageKey);if(i&&this.userStorage){let o=await rn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await Rn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:La()}else if(i&&!i.user&&!i.user){const o=await rn(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Tt(this.storage,this.storageKey+"-user"),await Rn(this.storage,this.storageKey,i)):i.user=La()}if(this._debug(s,"session from storage",i),!this._isValidSession(i)){this._debug(s,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ra;if(this._debug(s,`session has${a?"":" not"} expired with margin of ${Ra}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Ia(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(s,"error",i),console.error(i);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var n,s;if(!e)throw new Rt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Zi;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new Rt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),U(a)){const o={session:null,error:a};return Ia(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,s=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,n)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await Rn(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=Su(i);await Rn(this.storage,this.storageKey,a)}else{const i=Su(n);await Rn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Tt(this.storage,this.storageKey),await Tt(this.storage,this.storageKey+"-code-verifier"),await Tt(this.storage,this.storageKey+"-user"),this.userStorage&&await Tt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ge()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),An);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((s.expires_at*1e3-e)/An);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${An}ms, refresh threshold is ${Fo} ticks`),i<=Fo&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Rf)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ge()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,s){const i=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&i.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&i.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[a,o]=await Cn(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(s!=null&&s.queryParams){const a=new URLSearchParams(s.queryParams);i.push(a.toString())}return s!=null&&s.skipBrowserRedirect&&i.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await F(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var s,i;const{data:a,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await F(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(U(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:i,error:a}=n;return a?{data:null,error:a}:await F(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(U(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(e==null?void 0:e.factors)||[],i=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,s;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Da(i.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let s=n.keys.find(l=>l.kid===e);if(s)return s;const i=Date.now();if(s=this.jwks.keys.find(l=>l.kid===e),s&&this.jwks_cached_at+p0>i)return s;const{data:a,error:o}=await F(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,s=a.keys.find(l=>l.kid===e),!s)?null:s}async getClaims(e,n={}){try{let s=e;if(!s){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};s=x.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:c}}=Da(s);n!=null&&n.allowExpired||B0(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:a,header:i,signature:o},error:null}}const d=U0(i.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,S0(`${l}.${c}`)))throw new Ho("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(s){if(U(s))return{data:null,error:s};throw s}}}or.nextInstanceID=0;const nx=or;class sx extends nx{constructor(e){super(e)}}var rx=globalThis&&globalThis.__awaiter||function(t,e,n,s){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function l(d){try{u(s.next(d))}catch(f){o(f)}}function c(d){try{u(s.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((s=s.apply(t,e||[])).next())})};class ix{constructor(e,n,s){var i,a,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=c0(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:t0,realtime:s0,auth:Object.assign(Object.assign({},n0),{storageKey:u}),global:e0},f=u0(s??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=o0(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new jy(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new Qy(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Qv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},s={}){return this.rest.rpc(e,n,s)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return rx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,storageKey:a,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sx({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:s,storage:i,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new $y(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,n,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ax=(t,e,n)=>new ix(t,e,n);function ox(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ox()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lx={}.REACT_APP_SUPABASE_URL||"your-project-url",cx={}.REACT_APP_SUPABASE_ANON_KEY||"your-anon-key",Je=ax(lx,cx);class ux{constructor(){this.isConnected=!1,this.init()}async init(){try{const{data:e}=await Je.auth.getSession();this.isConnected=!0,console.log("📨 Messaging service initialized")}catch(e){console.warn("📨 Messaging service using mock mode:",e.message),this.isConnected=!1}}async createConversation(e,n,s,i=null){try{if(this.isConnected){const{data:a}=await Je.from("conversations").select("*").eq("customer_id",e).eq("car_id",n).eq("status","active").single();if(a)return{data:a,error:null};const o={customer_id:e,car_id:n,subject:i||`Inquiry about ${s}`,status:"active",priority:"normal",last_message_at:new Date().toISOString(),unread_count_customer:0,unread_count_admin:1},{data:l,error:c}=await Je.from("conversations").insert([o]).select().single();return c||await this.sendMessage(l.id,"system",`Conversation started about ${s}. Our support team will respond shortly.`),{data:l,error:c}}else return{data:{id:`conv_${Date.now()}`,customer_id:e,car_id:n,subject:i||`Inquiry about ${s}`,status:"active",created_at:new Date().toISOString()},error:null}}catch(a){return console.error("Error creating conversation:",a),{data:null,error:a}}}async sendMessage(e,n,s,i="text"){try{if(this.isConnected){const a={conversation_id:e,sender_id:n,content:s,message_type:i,is_read:!1,is_system_message:n==="system"},{data:o,error:l}=await Je.from("messages").insert([a]).select().single();return l||(await Je.from("conversations").update({last_message_at:new Date().toISOString(),last_message_preview:s.substring(0,100),unread_count_customer:n==="admin"?1:0,unread_count_admin:n!=="admin"&&n!=="system"?1:0}).eq("id",e),ft.triggerMessageUpdate({conversationId:e,senderId:n,message:s,timestamp:o.created_at})),{data:o,error:l}}else{const a={id:Date.now(),conversation_id:e,sender_id:n,content:s,message_type:i,created_at:new Date().toISOString()};return setTimeout(()=>{ft.triggerMessageUpdate({conversationId:e,senderId:n,message:s,timestamp:a.created_at})},100),{data:a,error:null}}}catch(a){return console.error("Error sending message:",a),{data:null,error:a}}}async getMessages(e){try{if(this.isConnected){const{data:n,error:s}=await Je.from("messages").select(`
            id,
            sender_id,
            content,
            message_type,
            is_read,
            is_system_message,
            created_at,
            users(name, avatar_url)
          `).eq("conversation_id",e).eq("is_deleted",!1).order("created_at",{ascending:!0});return{data:n,error:s}}else return{data:[{id:1,sender_id:"user_123",content:"Hi, I'm interested in this car. Is it available?",message_type:"text",created_at:new Date(Date.now()-1e4).toISOString(),users:{name:"John Doe",avatar_url:null}}],error:null}}catch(n){return console.error("Error fetching messages:",n),{data:[],error:n}}}async getUserConversations(e){try{if(this.isConnected){const{data:n,error:s}=await Je.from("conversations").select(`
            id,
            subject,
            status,
            priority,
            last_message_at,
            last_message_preview,
            unread_count_customer,
            created_at,
            cars(id, name, primary_image_url)
          `).eq("customer_id",e).order("last_message_at",{ascending:!1});return{data:n,error:s}}else return{data:[],error:null}}catch(n){return console.error("Error fetching conversations:",n),{data:[],error:n}}}async markAsRead(e,n){try{return this.isConnected?(await Je.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("conversation_id",e).neq("sender_id",n),await Je.from("conversations").update({unread_count_customer:0}).eq("id",e).eq("customer_id",n),{error:null}):{error:null}}catch(s){return console.error("Error marking messages as read:",s),{error:s}}}subscribeToConversation(e,n){if(this.isConnected){const s=Je.channel(`conversation-${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${e}`},i=>{n(i.new)}).subscribe();return()=>s.unsubscribe()}else return ft.subscribe("new-message",s=>{s.conversationId===e&&n({id:s.id||Date.now(),sender_id:s.senderId,content:s.message,created_at:s.timestamp})})}async getAdminConversations(){try{if(this.isConnected){const{data:e,error:n}=await Je.from("conversations").select(`
            id,
            subject,
            status,
            priority,
            last_message_at,
            last_message_preview,
            unread_count_admin,
            created_at,
            users!customer_id(id, name, avatar_url),
            cars(id, name, primary_image_url)
          `).order("last_message_at",{ascending:!1});return{data:e,error:n}}else return{data:[{id:1,subject:"Inquiry about Toyota Vitz",status:"active",priority:"normal",last_message_at:new Date(Date.now()-6e4).toISOString(),last_message_preview:"Is this car still available?",unread_count_admin:1,users:{id:"user_123",name:"James Mwangi",avatar_url:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=64&h=64&fit=crop&crop=face"},cars:{id:1,name:"Toyota Vitz",primary_image_url:"https://images.unsplash.com/photo-1580414155951-6ec7abe9ac56"}}],error:null}}catch(e){return console.error("Error fetching admin conversations:",e),{data:[],error:e}}}isSupabaseConnected(){return this.isConnected}}const bs=new ux;const dx=({carId:t,carName:e,onClose:n})=>{const{user:s}=at();Vl();const[i,a]=v.useState([]),[o,l]=v.useState(""),[c,u]=v.useState(!1),[d,f]=v.useState(null),[h,x]=v.useState(!1),y=v.useRef(null),w=v.useRef(null);v.useEffect(()=>{if(!s)return;b();const _=realTimeService.subscribe("new-message",R=>{if(R.conversationId===d){const E={id:Date.now(),senderId:R.senderId,senderName:R.senderId==="admin"?"CarRental Support":s.name,message:R.message,timestamp:R.timestamp,type:"text"};a(T=>[...T,E]),R.senderId==="admin"&&m("New message from support")}}),N=realTimeService.subscribe("connection",R=>{x(R.status==="connected")});return()=>{_(),N()}},[s,d]),v.useEffect(()=>{g()},[i]);const b=async()=>{try{u(!0);const{data:_,error:N}=await bs.createConversation(s.id,t,e);if(N){console.error("Error creating conversation:",N);return}f(_.id);const{data:R}=await bs.getMessages(_.id);R&&R.length>0?a(R.map(E=>{var T;return{id:E.id,senderId:E.sender_id,senderName:((T=E.users)==null?void 0:T.name)||(E.sender_id==="admin"?"CarRental Support":s.name),message:E.content,timestamp:E.created_at,type:E.message_type||"text"}})):await bs.sendMessage(_.id,s.id,`Hi, I'm interested in renting the ${e}. Is it available?`),x(bs.isSupabaseConnected())}catch(_){console.error("Error initializing conversation:",_)}finally{u(!1)}},g=()=>{var _;(_=y.current)==null||_.scrollIntoView({behavior:"smooth"})},m=_=>{"Notification"in window&&Notification.permission==="granted"&&new Notification("CarRental",{body:_,icon:"/favicon.ico"})},p=async()=>{var N;if(!o.trim()||!d)return;const _=o.trim();l("");try{const{data:R,error:E}=await bs.sendMessage(d,s.id,_);if(E){console.error("Error sending message:",E),l(_);return}const T={id:R.id,senderId:s.id,senderName:s.name,message:_,timestamp:R.created_at,type:"text"};a(j=>[...j,T]),(N=w.current)==null||N.focus()}catch(R){console.error("Error sending message:",R),l(_)}},k=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),p())},P=_=>new Date(_).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return s?r.jsxs("div",{className:"user-messaging",children:[r.jsxs("div",{className:"messaging-header",children:[r.jsxs("div",{className:"header-info",children:[r.jsx("h3",{children:"Support Chat"}),r.jsxs("div",{className:"connection-status",children:[r.jsx("span",{className:`status-dot ${h?"connected":"disconnected"}`}),r.jsx("span",{className:"status-text",children:h?"Connected":"Connecting..."})]})]}),n&&r.jsx("button",{className:"close-button",onClick:n,"aria-label":"Close chat",children:"✕"})]}),r.jsxs("div",{className:"chat-info",children:[r.jsxs("p",{children:["Discussing: ",r.jsx("strong",{children:e})]}),r.jsx("small",{children:"Our support team typically responds within 5 minutes"})]}),r.jsx("div",{className:"messages-container",children:c?r.jsxs("div",{className:"loading-state",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading conversation..."})]}):r.jsxs(r.Fragment,{children:[i.map(_=>r.jsx("div",{className:`message ${_.senderId===s.id?"sent":"received"}`,children:r.jsxs("div",{className:"message-content",children:[r.jsxs("div",{className:"message-header",children:[r.jsx("span",{className:"sender-name",children:_.senderName}),r.jsx("span",{className:"message-time",children:P(_.timestamp)})]}),r.jsx("p",{className:"message-text",children:_.message})]})},_.id)),r.jsx("div",{ref:y})]})}),r.jsxs("div",{className:"message-input-container",children:[r.jsxs("div",{className:"message-input-wrapper",children:[r.jsx("textarea",{ref:w,value:o,onChange:_=>l(_.target.value),onKeyPress:k,placeholder:"Type your message...",className:"message-input",rows:2,disabled:!h}),r.jsx("button",{onClick:p,disabled:!o.trim()||!h,className:"send-button",children:h?"Send":"Connecting..."})]}),r.jsx("div",{className:"input-help",children:r.jsx("small",{children:"Press Enter to send, Shift+Enter for new line"})})]})]}):r.jsx("div",{className:"user-messaging",children:r.jsxs("div",{className:"auth-required",children:[r.jsx("h3",{children:"Login Required"}),r.jsx("p",{children:"Please log in to chat with our support team."})]})})};const hx=({carId:t,carName:e})=>{const[n,s]=v.useState(!1),[i,a]=v.useState(!1),[o,l]=v.useState(!0);v.useEffect(()=>{const d=ft.subscribe("new-message",f=>{!n&&f.senderId==="admin"&&(a(!0),"Notification"in window&&(Notification.permission==="default"&&Notification.requestPermission(),Notification.permission==="granted"&&new Notification("New message from CarRental Support",{body:f.message.length>50?f.message.substring(0,50)+"...":f.message,icon:"/favicon.ico",tag:"support-message"})))});return()=>{d()}},[n]);const c=()=>{s(!n),n||a(!1)},u=()=>{s(!1)};return o?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"support-chat-button-container",children:[r.jsx("button",{className:`support-chat-button ${n?"active":""}`,onClick:c,"aria-label":"Open support chat",children:n?r.jsx("span",{className:"chat-icon",children:"✕"}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"chat-icon",children:"💬"}),i&&r.jsx("span",{className:"unread-badge"})]})}),!n&&r.jsxs("div",{className:"chat-tooltip",children:["Need help? Chat with us!",i&&r.jsx("div",{className:"tooltip-badge",children:"New message"})]})]}),n&&r.jsx("div",{className:"support-chat-overlay",children:r.jsx("div",{className:"support-chat-window",children:r.jsx(dx,{carId:t,carName:e,onClose:u})})})]}):null};const fx=({onBookCar:t})=>{var E,T,j,S,L,O,X,A,B;const{id:e}=$g(),[n,s]=v.useState(null),[i,a]=v.useState(0),[o,l]=v.useState({}),[c,u]=v.useState(!1),[d,f]=v.useState("overview"),[h,x]=v.useState(!1),[y,w]=v.useState(null);v.useEffect(()=>{const C=ct.find(D=>D.id===parseInt(e));s(C),w(C)},[e]);const b=(C,D)=>{const $={...y,reviews:[...y.reviews||[],D],reviewCount:(y.reviewCount||0)+1,rating:g([...y.reviews||[],D])};w($),s($)},g=C=>{if(C.length===0)return 0;const D=C.reduce(($,Z)=>$+Z.rating,0);return Math.round(D/C.length*10)/10};if(!n)return r.jsx("div",{className:"car-detail-page",children:r.jsx("div",{className:"container",children:r.jsx("div",{className:"not-found",children:r.jsxs("div",{className:"not-found-content",children:[r.jsx("h2",{children:"Car not found"}),r.jsx("p",{children:"The vehicle you're looking for doesn't exist or may have been removed."}),r.jsx(me,{to:"/cars",className:"btn btn-primary",children:"Browse All Cars"})]})})})});const m=(C,D)=>new Intl.NumberFormat("en-KE",{style:"currency",currency:D==="KSH"?"KES":D,minimumFractionDigits:0}).format(C),p=C=>(C||(C=0),r.jsxs("div",{className:"rating-display",children:[r.jsx("div",{className:"stars-container",children:[1,2,3,4,5].map(D=>r.jsx("span",{className:`star ${D<=Math.floor(C)?"filled":D<=C?"half":"empty"}`,children:"★"},D))}),r.jsx("span",{className:"rating-value",children:C}),r.jsxs("span",{className:"rating-count",children:["(",n.reviewCount||0," reviews)"]})]})),k=n!=null&&n.image?[n.image,n.image.replace("w=500","w=500&sat=-20"),n.image.replace("w=500","w=500&brightness=10"),n.image.replace("w=500","w=500&contrast=10"),n.image.replace("h=300","h=300&blur=1")]:[],P=n!=null&&n.name?Bv.filter(C=>C.recommendedCars&&C.recommendedCars.includes(n.name)):[],_=C=>{l(D=>({...D,[C]:!0}))},N=()=>{u(!c)},R=[{id:"overview",label:"Overview"},{id:"reviews",label:`Reviews (${(y==null?void 0:y.reviewCount)||(n==null?void 0:n.reviewCount)||0})`},{id:"features",label:"Features"},{id:"location",label:"Location"},{id:"policies",label:"Policies"}];return r.jsxs("div",{className:"car-detail-page",children:[r.jsx("div",{className:"breadcrumb-container",children:r.jsx("div",{className:"container",children:r.jsxs("nav",{className:"breadcrumb",children:[r.jsx(me,{to:"/",children:"Home"}),r.jsx("span",{className:"breadcrumb-separator",children:"›"}),r.jsx(me,{to:"/cars",children:"Cars"}),r.jsx("span",{className:"breadcrumb-separator",children:"›"}),r.jsx("span",{className:"breadcrumb-current",children:n.name})]})})}),r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"car-detail-content",children:[r.jsx("div",{className:"car-gallery-section",children:r.jsxs("div",{className:"main-gallery",children:[r.jsxs("div",{className:"main-image-container",children:[!o[i]&&r.jsx("div",{className:"image-skeleton",children:r.jsx("div",{className:"skeleton-shimmer"})}),r.jsx("img",{src:k[i]||(n==null?void 0:n.image)||"",alt:`${(n==null?void 0:n.name)||"Car"} - View ${i+1}`,className:`main-image ${o[i]?"loaded":""}`,onLoad:()=>_(i)}),r.jsx("button",{className:`favorite-btn-detail ${c?"favorited":""}`,onClick:N,"aria-label":"Add to favorites",children:r.jsx("svg",{viewBox:"0 0 24 24",className:"heart-icon",children:r.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),r.jsxs("div",{className:"image-counter",children:[i+1," / ",k.length]}),!n.available&&r.jsx("div",{className:"unavailable-overlay",children:r.jsx("span",{children:"Currently Unavailable"})})]}),r.jsx("div",{className:"image-thumbnails",children:k.map((C,D)=>r.jsx("button",{className:`thumbnail ${i===D?"active":""}`,onClick:()=>a(D),children:r.jsx("img",{src:C,alt:`${n.name} thumbnail ${D+1}`,onLoad:()=>_(D)})},D))})]})}),r.jsxs("div",{className:"car-info-section",children:[r.jsxs("div",{className:"car-info-header",children:[r.jsxs("div",{className:"car-title-area",children:[r.jsx("div",{className:"category-badge",children:(n==null?void 0:n.category)||"Unknown"}),r.jsx("h1",{className:"car-title",children:(n==null?void 0:n.name)||"Car Details"}),r.jsxs("div",{className:"car-subtitle",children:[(n==null?void 0:n.year)||"N/A"," • ",(n==null?void 0:n.fuel)||"N/A"," • ",(n==null?void 0:n.transmission)||"N/A"]})]}),p((n==null?void 0:n.rating)||0)]}),r.jsx("div",{className:"car-description",children:r.jsx("p",{children:(n==null?void 0:n.description)||"No description available."})}),r.jsxs("div",{className:"quick-stats-detail",children:[r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-icon",children:"👥"}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Seats"}),r.jsx("div",{className:"stat-value",children:((E=n.specifications)==null?void 0:E.doors)||4})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-icon",children:"🧳"}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Luggage"}),r.jsx("div",{className:"stat-value",children:((T=n.specifications)==null?void 0:T.luggage)||"2 bags"})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-icon",children:"⛽"}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Fuel Type"}),r.jsx("div",{className:"stat-value",children:n.fuel})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-icon",children:"📊"}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-label",children:"Mileage"}),r.jsx("div",{className:"stat-value",children:((j=n.specifications)==null?void 0:j.mileage)||"N/A"})]})]})]}),r.jsxs("div",{className:"features-preview-detail",children:[r.jsx("h3",{children:"Key Features"}),r.jsx("div",{className:"features-grid",children:(n.features||[]).slice(0,6).map((C,D)=>r.jsxs("div",{className:"feature-item",children:[r.jsx("span",{className:"feature-icon",children:"✓"}),r.jsx("span",{className:"feature-text",children:C})]},D))})]})]})]}),r.jsx("div",{className:"booking-bar",children:r.jsxs("div",{className:"booking-bar-content",children:[r.jsxs("div",{className:"pricing-info",children:[r.jsxs("div",{className:"price-display",children:[r.jsx("span",{className:"price-amount",children:m(n.price,n.currency)}),r.jsx("span",{className:"price-period",children:"per day"})]}),r.jsx("div",{className:"price-note",children:"All fees included"})]}),r.jsxs("div",{className:"booking-actions",children:[r.jsx("button",{className:`btn-book-detail ${n.available?"":"btn-disabled"}`,onClick:()=>n.available&&t(n),disabled:!n.available,children:n.available?"Book now":"Unavailable"}),r.jsx("button",{className:"btn-contact",children:"Contact host"})]})]})}),r.jsxs("div",{className:"detail-tabs",children:[r.jsx("div",{className:"tab-navigation",children:R.map(C=>r.jsx("button",{className:`tab-btn ${d===C.id?"active":""}`,onClick:()=>f(C.id),children:C.label},C.id))}),r.jsxs("div",{className:"tab-content",children:[d==="overview"&&r.jsxs("div",{className:"tab-panel",children:[r.jsxs("div",{className:"specifications-detailed",children:[r.jsx("h3",{children:"Vehicle Specifications"}),r.jsxs("div",{className:"specs-grid-detailed",children:[r.jsxs("div",{className:"spec-group",children:[r.jsx("h4",{children:"Engine & Performance"}),r.jsxs("div",{className:"spec-list",children:[r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Engine"}),r.jsx("span",{className:"spec-value",children:((S=n.specifications)==null?void 0:S.engine)||"N/A"})]}),r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Fuel Economy"}),r.jsx("span",{className:"spec-value",children:((L=n.specifications)==null?void 0:L.mileage)||"N/A"})]}),r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Transmission"}),r.jsx("span",{className:"spec-value",children:n.transmission})]})]})]}),r.jsxs("div",{className:"spec-group",children:[r.jsx("h4",{children:"Capacity & Dimensions"}),r.jsxs("div",{className:"spec-list",children:[r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Doors"}),r.jsx("span",{className:"spec-value",children:((O=n.specifications)==null?void 0:O.doors)||4})]}),r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Luggage Space"}),r.jsx("span",{className:"spec-value",children:((X=n.specifications)==null?void 0:X.luggage)||"N/A"})]}),r.jsxs("div",{className:"spec-item-detailed",children:[r.jsx("span",{className:"spec-label",children:"Year"}),r.jsx("span",{className:"spec-value",children:n.year})]})]})]})]})]}),P.length>0&&r.jsxs("div",{className:"destinations-section",children:[r.jsx("h3",{children:"Perfect for These Destinations"}),r.jsx("div",{className:"destinations-grid",children:P.map((C,D)=>r.jsxs("div",{className:"destination-card",children:[r.jsx("h4",{children:C.name}),r.jsxs("p",{children:[C.region," • ",C.type]})]},D))})]})]}),d==="reviews"&&r.jsx("div",{className:"tab-panel",children:r.jsxs("div",{className:"reviews-section",children:[r.jsxs("div",{className:"reviews-header",children:[r.jsx("div",{className:"reviews-summary-detailed",children:r.jsxs("div",{className:"rating-overview",children:[r.jsxs("div",{className:"overall-rating-large",children:[r.jsx("span",{className:"rating-number",children:(y==null?void 0:y.rating)||n.rating}),r.jsx("div",{className:"rating-stars-large",children:p((y==null?void 0:y.rating)||n.rating)}),r.jsxs("span",{className:"total-reviews-text",children:["Based on ",(y==null?void 0:y.reviewCount)||n.reviewCount," reviews"]})]}),(y==null?void 0:y.ratingBreakdown)&&r.jsx("div",{className:"rating-breakdown-detailed",children:Object.entries(y.ratingBreakdown).sort(([C],[D])=>D-C).map(([C,D])=>r.jsxs("div",{className:"breakdown-row-detailed",children:[r.jsxs("span",{className:"star-label",children:[C,"★"]}),r.jsx("div",{className:"breakdown-bar-detailed",children:r.jsx("div",{className:"breakdown-fill-detailed",style:{width:`${D/((y==null?void 0:y.reviewCount)||n.reviewCount)*100}%`}})}),r.jsx("span",{className:"count-detailed",children:D})]},C))})]})}),r.jsx("div",{className:"add-review-section",children:r.jsx("button",{className:"btn-add-review",onClick:()=>x(!0),children:"Write a Review"})})]}),r.jsx("div",{className:"reviews-list-detailed",children:((y==null?void 0:y.reviews)||n.reviews||[]).length===0?r.jsxs("div",{className:"no-reviews-yet",children:[r.jsx("h3",{children:"No reviews yet"}),r.jsx("p",{children:"Be the first to share your experience with this car!"})]}):((y==null?void 0:y.reviews)||n.reviews||[]).sort((C,D)=>new Date(D.date)-new Date(C.date)).map(C=>r.jsxs("div",{className:"review-item-detailed",children:[r.jsxs("div",{className:"review-header-detailed",children:[r.jsxs("div",{className:"reviewer-info-detailed",children:[r.jsx("img",{src:C.userAvatar,alt:C.userName,className:"reviewer-avatar-detailed"}),r.jsxs("div",{className:"reviewer-details-detailed",children:[r.jsx("h4",{className:"reviewer-name-detailed",children:C.userName}),r.jsx("span",{className:"review-date-detailed",children:new Date(C.date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),C.verified&&r.jsx("span",{className:"verified-badge-detailed",children:"Verified"})]})]}),r.jsx("div",{className:"review-rating-detailed",children:p(C.rating)})]}),r.jsxs("div",{className:"review-content-detailed",children:[C.title&&r.jsx("h5",{className:"review-title-detailed",children:C.title}),r.jsx("p",{className:"review-comment-detailed",children:C.comment}),r.jsxs("div",{className:"review-meta-detailed",children:[r.jsxs("span",{className:"trip-duration-detailed",children:["Trip: ",C.tripDuration]}),r.jsxs("button",{className:"helpful-button-detailed",children:["👍 Helpful (",C.helpful,")"]})]})]})]},C.id))})]})}),d==="features"&&r.jsx("div",{className:"tab-panel",children:r.jsxs("div",{className:"features-detailed",children:[r.jsx("h3",{children:"Features & Amenities"}),r.jsx("div",{className:"features-grid-detailed",children:(n.features||[]).map((C,D)=>r.jsxs("div",{className:"feature-item-detailed",children:[r.jsx("span",{className:"feature-icon",children:"✓"}),r.jsx("span",{className:"feature-text",children:C})]},D))})]})}),d==="location"&&r.jsx("div",{className:"tab-panel",children:r.jsxs("div",{className:"locations-detailed",children:[r.jsx("h3",{children:"Pickup Locations"}),r.jsx("div",{className:"locations-grid-detailed",children:(n.pickupLocations||[]).map((C,D)=>r.jsxs("div",{className:"location-card",children:[r.jsx("div",{className:"location-icon",children:"📍"}),r.jsxs("div",{className:"location-details",children:[r.jsx("div",{className:"location-name",children:C}),r.jsx("div",{className:"location-type",children:"Pickup & Return Available"})]})]},D))})]})}),d==="policies"&&r.jsx("div",{className:"tab-panel",children:r.jsx("div",{className:"policies-detailed",children:r.jsxs("div",{className:"policy-section",children:[r.jsx("h3",{children:"Rental Requirements"}),r.jsxs("div",{className:"policy-grid",children:[r.jsxs("div",{className:"policy-item",children:[r.jsx("div",{className:"policy-icon",children:"🆔"}),r.jsxs("div",{className:"policy-content",children:[r.jsx("h4",{children:"Valid License Required"}),r.jsxs("p",{children:["Kenyan or International driving license required. Minimum age: ",((A=n.specifications)==null?void 0:A.minAge)||21," years."]})]})]}),r.jsxs("div",{className:"policy-item",children:[r.jsx("div",{className:"policy-icon",children:"💳"}),r.jsxs("div",{className:"policy-content",children:[r.jsx("h4",{children:"Security Deposit"}),r.jsx("p",{children:"KSH 20,000 - 50,000 security deposit required. Refunded within 7 business days."})]})]}),r.jsxs("div",{className:"policy-item",children:[r.jsx("div",{className:"policy-icon",children:"⛽"}),r.jsxs("div",{className:"policy-content",children:[r.jsx("h4",{children:"Fuel Policy"}),r.jsx("p",{children:"Full-to-full policy. Vehicle provided with full tank, return with full tank."})]})]}),r.jsxs("div",{className:"policy-item",children:[r.jsx("div",{className:"policy-icon",children:"🛡️"}),r.jsxs("div",{className:"policy-content",children:[r.jsx("h4",{children:"Insurance Coverage"}),r.jsxs("p",{children:[((B=n.specifications)==null?void 0:B.insurance)||"Comprehensive"," insurance included with third-party liability."]})]})]})]})]})})})]})]})]}),r.jsx(qv,{car:y||n,isOpen:h,onClose:()=>x(!1),onSubmitReview:b}),r.jsx(hx,{carId:n.id,carName:`${n.year} ${n.make} ${n.model}`})]})};const mx=()=>{const{user:t,isAuthenticated:e}=at(),[n,s]=v.useState("bookings"),[i,a]=v.useState([]),[o,l]=v.useState({name:"",email:"",phone:""});if(v.useEffect(()=>{t&&(l({name:t.name||"",email:t.email||"",phone:t.phone||""}),a([{id:1,carName:"Toyota Vitz",carImage:"https://images.unsplash.com/photo-1552519507-da3b142c6e3d?w=300&h=200&fit=crop",pickupDate:"2024-08-20",dropoffDate:"2024-08-25",pickupLocation:"JKIA Airport",dropoffLocation:"Nairobi CBD",totalAmount:17500,status:"confirmed",bookingDate:"2024-08-15"},{id:2,carName:"Nissan X-Trail",carImage:"https://images.unsplash.com/photo-1544636331-e26879cd4d9b?w=300&h=200&fit=crop",pickupDate:"2024-07-10",dropoffDate:"2024-07-15",pickupLocation:"Wilson Airport",dropoffLocation:"Maasai Mara",totalAmount:42500,status:"completed",bookingDate:"2024-07-05"},{id:3,carName:"Honda Freed",carImage:"https://images.unsplash.com/photo-1506764543633-6b5f8f82c78a?w=300&h=200&fit=crop",pickupDate:"2024-09-01",dropoffDate:"2024-09-07",pickupLocation:"Nairobi CBD",dropoffLocation:"Mombasa",totalAmount:45500,status:"upcoming",bookingDate:"2024-08-10"}]))},[t]),!e)return r.jsx(Xh,{to:"/"});const c=f=>{switch(f){case"confirmed":return"#2563eb";case"completed":return"#16a34a";case"upcoming":return"#ea580c";case"cancelled":return"#dc2626";default:return"#64748b"}},u=f=>new Date(f).toLocaleDateString("en-KE",{day:"numeric",month:"short",year:"numeric"}),d=f=>{f.preventDefault(),alert("Profile updated successfully!")};return r.jsx("div",{className:"user-dashboard",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"dashboard-header",children:[r.jsxs("h1",{children:["Welcome back, ",t.name,"!"]}),r.jsx("p",{children:"Manage your bookings and profile"})]}),r.jsxs("div",{className:"dashboard-nav",children:[r.jsx("button",{className:`nav-tab ${n==="bookings"?"active":""}`,onClick:()=>s("bookings"),children:"My Bookings"}),r.jsx("button",{className:`nav-tab ${n==="profile"?"active":""}`,onClick:()=>s("profile"),children:"Profile Settings"}),r.jsx("button",{className:`nav-tab ${n==="favorites"?"active":""}`,onClick:()=>s("favorites"),children:"Favorite Cars"})]}),r.jsxs("div",{className:"dashboard-content",children:[n==="bookings"&&r.jsxs("div",{className:"bookings-section",children:[r.jsxs("div",{className:"section-header",children:[r.jsx("h2",{children:"My Bookings"}),r.jsx(me,{to:"/cars",className:"btn-primary",children:"Book New Car"})]}),i.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("h3",{children:"No bookings yet"}),r.jsx("p",{children:"Start exploring our fleet and book your first rental!"}),r.jsx(me,{to:"/cars",className:"btn-primary",children:"Browse Cars"})]}):r.jsx("div",{className:"bookings-list",children:i.map(f=>r.jsxs("div",{className:"booking-card",children:[r.jsx("div",{className:"booking-image",children:r.jsx("img",{src:f.carImage,alt:f.carName})}),r.jsxs("div",{className:"booking-details",children:[r.jsxs("div",{className:"booking-header",children:[r.jsx("h3",{children:f.carName}),r.jsx("div",{className:"booking-status",style:{backgroundColor:c(f.status)},children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),r.jsxs("div",{className:"booking-info",children:[r.jsx("div",{className:"booking-dates",children:r.jsxs("span",{children:["📅 ",u(f.pickupDate)," - ",u(f.dropoffDate)]})}),r.jsx("div",{className:"booking-locations",children:r.jsxs("span",{children:["📍 ",f.pickupLocation," → ",f.dropoffLocation]})}),r.jsx("div",{className:"booking-amount",children:r.jsxs("span",{children:["💰 Total: KSH ",f.totalAmount.toLocaleString()]})})]})]}),r.jsxs("div",{className:"booking-actions",children:[r.jsx("button",{className:"btn-secondary",children:"View Details"}),f.status==="upcoming"&&r.jsx("button",{className:"btn-primary",children:"Modify Booking"}),f.status==="completed"&&r.jsx("button",{className:"btn-secondary",children:"Leave Review"})]})]},f.id))})]}),n==="profile"&&r.jsxs("div",{className:"profile-section",children:[r.jsx("h2",{children:"Profile Settings"}),r.jsxs("form",{onSubmit:d,className:"profile-form",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{children:"Personal Information"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name"}),r.jsx("input",{type:"text",id:"name",value:o.name,onChange:f=>l({...o,name:f.target.value}),required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address"}),r.jsx("input",{type:"email",id:"email",value:o.email,onChange:f=>l({...o,email:f.target.value}),required:!0})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"phone",children:"Phone Number"}),r.jsx("input",{type:"tel",id:"phone",value:o.phone,onChange:f=>l({...o,phone:f.target.value}),placeholder:"+254700000000"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Member Since"}),r.jsx("input",{type:"text",value:u(t.joinDate),disabled:!0})]})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h3",{children:"Preferences"}),r.jsx("div",{className:"preference-group",children:r.jsxs("label",{className:"checkbox-label",children:[r.jsx("input",{type:"checkbox"}),r.jsx("span",{className:"checkmark"}),"Email notifications for booking confirmations"]})}),r.jsx("div",{className:"preference-group",children:r.jsxs("label",{className:"checkbox-label",children:[r.jsx("input",{type:"checkbox"}),r.jsx("span",{className:"checkmark"}),"SMS notifications for pickup reminders"]})}),r.jsx("div",{className:"preference-group",children:r.jsxs("label",{className:"checkbox-label",children:[r.jsx("input",{type:"checkbox"}),r.jsx("span",{className:"checkmark"}),"Marketing emails about special offers"]})})]}),r.jsx("button",{type:"submit",className:"btn-primary",children:"Save Changes"})]})]}),n==="favorites"&&r.jsxs("div",{className:"favorites-section",children:[r.jsx("h2",{children:"Favorite Cars"}),r.jsxs("div",{className:"empty-state",children:[r.jsx("h3",{children:"No favorite cars yet"}),r.jsx("p",{children:"Add cars to your favorites while browsing our fleet!"}),r.jsx(me,{to:"/cars",className:"btn-primary",children:"Browse Cars"})]})]})]})]})})};const px=({onRefresh:t})=>{var _,N,R;const{user:e}=at(),[n,s]=v.useState([]),[i,a]=v.useState([]),[o,l]=v.useState("all"),[c,u]=v.useState("all"),[d,f]=v.useState(""),[h,x]=v.useState(null),[y,w]=v.useState(!1);v.useEffect(()=>{b()},[]),v.useEffect(()=>{g()},[n,o,c,d]);const b=()=>{const E=Oe.getAllBookings();s(E)},g=()=>{let E=[...n];o!=="all"&&(E=E.filter(j=>j.status===o));const T=new Date;if(c==="today")E=E.filter(j=>new Date(j.createdAt).toDateString()===T.toDateString());else if(c==="week"){const j=new Date(T.getTime()-6048e5);E=E.filter(S=>new Date(S.createdAt)>=j)}else if(c==="month"){const j=new Date(T.getTime()-2592e6);E=E.filter(S=>new Date(S.createdAt)>=j)}d&&(E=E.filter(j=>j.carName.toLowerCase().includes(d.toLowerCase())||j.pickupLocation.toLowerCase().includes(d.toLowerCase())||j.dropoffLocation.toLowerCase().includes(d.toLowerCase())||j.id.toString().includes(d))),a(E)},m=async(E,T)=>{try{await Oe.updateBookingStatus(E,T,e),b(),t(),alert(`Booking status updated to ${T}`)}catch(j){alert(`Failed to update booking: ${j.message}`)}},p=E=>{switch(E){case"pending":return"#f59e0b";case"confirmed":return"#10b981";case"completed":return"#6366f1";case"cancelled":return"#ef4444";default:return"#6b7280"}},k=E=>new Date(E).toLocaleDateString("en-KE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),P=E=>{x(E),w(!0)};return r.jsxs("div",{className:"admin-bookings",children:[r.jsxs("div",{className:"bookings-header",children:[r.jsx("h2",{children:"📋 Booking Management"}),r.jsxs("div",{className:"bookings-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:b,children:"🔄 Refresh"}),r.jsx("button",{className:"btn-primary",children:"📥 Export Data"})]})]}),r.jsxs("div",{className:"bookings-filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"statusFilter",children:"Status:"}),r.jsxs("select",{id:"statusFilter",value:o,onChange:E=>l(E.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"confirmed",children:"Confirmed"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"dateFilter",children:"Date Range:"}),r.jsxs("select",{id:"dateFilter",value:c,onChange:E=>u(E.target.value),children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"This Week"}),r.jsx("option",{value:"month",children:"This Month"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"searchTerm",children:"Search:"}),r.jsx("input",{type:"text",id:"searchTerm",value:d,onChange:E=>f(E.target.value),placeholder:"Search by car, location, or booking ID..."})]})]}),r.jsx("div",{className:"bookings-stats",children:r.jsxs("div",{className:"stat-summary",children:["Showing ",i.length," of ",n.length," bookings"]})}),r.jsxs("div",{className:"bookings-table",children:[r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Booking ID"}),r.jsx("th",{children:"Car"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Dates"}),r.jsx("th",{children:"Location"}),r.jsx("th",{children:"Amount"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.map(E=>{var T;return r.jsxs("tr",{children:[r.jsxs("td",{children:[r.jsxs("div",{className:"booking-id",children:["#",E.id]}),r.jsx("div",{className:"booking-date",children:k(E.createdAt)})]}),r.jsx("td",{children:r.jsxs("div",{className:"car-info",children:[r.jsx("div",{className:"car-name",children:E.carName}),r.jsxs("div",{className:"car-details",children:[E.days," days"]})]})}),r.jsx("td",{children:r.jsxs("div",{className:"customer-info",children:[r.jsxs("div",{className:"customer-name",children:["User #",E.userId]}),r.jsx("div",{className:"customer-license",children:E.driverLicense})]})}),r.jsx("td",{children:r.jsxs("div",{className:"booking-dates",children:[r.jsxs("div",{className:"pickup-date",children:["📅 ",new Date(E.pickupDate).toLocaleDateString()]}),r.jsxs("div",{className:"dropoff-date",children:["📅 ",new Date(E.dropoffDate).toLocaleDateString()]})]})}),r.jsx("td",{children:r.jsxs("div",{className:"locations",children:[r.jsxs("div",{className:"pickup",children:["📍 ",E.pickupLocation]}),r.jsxs("div",{className:"dropoff",children:["📍 ",E.dropoffLocation]})]})}),r.jsx("td",{children:r.jsxs("div",{className:"amount",children:["KSH ",(T=E.totalPrice)==null?void 0:T.toLocaleString()]})}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:p(E.status)},children:E.status.charAt(0).toUpperCase()+E.status.slice(1)})}),r.jsx("td",{children:r.jsxs("div",{className:"booking-actions",children:[r.jsx("button",{className:"btn-small btn-secondary",onClick:()=>P(E),children:"View"}),E.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn-small btn-success",onClick:()=>m(E.id,"confirmed"),children:"Approve"}),r.jsx("button",{className:"btn-small btn-danger",onClick:()=>m(E.id,"cancelled"),children:"Reject"})]}),E.status==="confirmed"&&r.jsx("button",{className:"btn-small btn-primary",onClick:()=>m(E.id,"completed"),children:"Complete"})]})})]},E.id)})})]}),i.length===0&&r.jsxs("div",{className:"no-bookings",children:[r.jsx("h3",{children:"No bookings found"}),r.jsx("p",{children:"No bookings match your current filters."})]})]}),y&&h&&r.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:r.jsxs("div",{className:"booking-details-modal",onClick:E=>E.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:"×"}),r.jsxs("h3",{children:["Booking Details #",h.id]}),r.jsxs("div",{className:"details-grid",children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Car Information"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Car:"})," ",h.carName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Duration:"})," ",h.days," days"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Base Price:"})," KSH ",(_=h.basePrice)==null?void 0:_.toLocaleString()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tax (16%):"})," KSH ",(N=h.tax)==null?void 0:N.toLocaleString()]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Total:"})," KSH ",(R=h.totalPrice)==null?void 0:R.toLocaleString()]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Booking Details"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Pickup Date:"})," ",h.pickupDate," at ",h.pickupTime]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Dropoff Date:"})," ",h.dropoffDate," at ",h.dropoffTime]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Pickup Location:"})," ",h.pickupLocation]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Dropoff Location:"})," ",h.dropoffLocation]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Customer Information"}),r.jsxs("p",{children:[r.jsx("strong",{children:"User ID:"})," ",h.userId]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Driver License:"})," ",h.driverLicense]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Special Requests:"})," ",h.specialRequests||"None"]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Booking Status"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Current Status:"}),r.jsx("span",{className:"status-badge",style:{backgroundColor:p(h.status),marginLeft:"8px"},children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Created:"})," ",k(h.createdAt)]}),h.updatedAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",k(h.updatedAt)]})]})]}),r.jsxs("div",{className:"modal-actions",children:[h.status==="pending"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"btn-success",onClick:()=>{m(h.id,"confirmed"),w(!1)},children:"Approve Booking"}),r.jsx("button",{className:"btn-danger",onClick:()=>{m(h.id,"cancelled"),w(!1)},children:"Reject Booking"})]}),h.status==="confirmed"&&r.jsx("button",{className:"btn-primary",onClick:()=>{m(h.id,"completed"),w(!1)},children:"Mark as Completed"})]})]})})]})};const gx=({onRefresh:t})=>{const[e,n]=v.useState(ct),[s,i]=v.useState(ct),[a,o]=v.useState("all"),[l,c]=v.useState("all"),[u,d]=v.useState(""),[f,h]=v.useState(!1),[x,y]=v.useState(!1),[w,b]=v.useState(!1),[g,m]=v.useState(null),[p,k]=v.useState({name:"",category:"Economy",price:"",currency:"KSH",priceUnit:"per day",image:"",features:[],fuel:"Petrol",transmission:"Automatic",year:new Date().getFullYear(),available:!0,rating:4.5,reviews:0,description:"",pickupLocations:[],specifications:{engine:"",mileage:"",doors:4,luggage:"",insurance:"Comprehensive",minAge:21}});v.useEffect(()=>{P()},[e,a,l,u]);const P=()=>{let A=[...e];a!=="all"&&(A=A.filter(B=>B.category===a)),l==="available"?A=A.filter(B=>B.available):l==="unavailable"&&(A=A.filter(B=>!B.available)),u&&(A=A.filter(B=>B.name.toLowerCase().includes(u.toLowerCase())||B.description.toLowerCase().includes(u.toLowerCase())||B.category.toLowerCase().includes(u.toLowerCase()))),i(A)},_=()=>{k({name:"",category:"Economy",price:"",currency:"KSH",priceUnit:"per day",image:"",features:[],fuel:"Petrol",transmission:"Automatic",year:new Date().getFullYear(),available:!0,rating:4.5,reviews:0,description:"",pickupLocations:[],specifications:{engine:"",mileage:"",doors:4,luggage:"",insurance:"Comprehensive",minAge:21}}),h(!0)},N=A=>{m(A),k({...A}),y(!0)},R=A=>{if(window.confirm("Are you sure you want to delete this car? This action cannot be undone.")){const B=e.filter(C=>C.id!==A);n(B),t(),alert("Car deleted successfully!")}},E=A=>{const B=e.map(C=>C.id===A?{...C,available:!C.available}:C);n(B),t()},T=A=>{m(A),b(!0)},j=()=>{try{if(!p.name||!p.price||!p.description){alert("Please fill in all required fields");return}if(f){const A={...p,id:Date.now(),price:parseInt(p.price),features:p.features.filter(B=>B.trim()!==""),pickupLocations:p.pickupLocations.filter(B=>B.trim()!=="")};n([...e,A]),h(!1),alert("Car added successfully!")}else{const A=e.map(B=>B.id===g.id?{...p,id:g.id,price:parseInt(p.price),features:p.features.filter(C=>C.trim()!==""),pickupLocations:p.pickupLocations.filter(C=>C.trim()!=="")}:B);n(A),y(!1),alert("Car updated successfully!")}t()}catch(A){alert("Error saving car: "+A.message)}},S=(A,B)=>{if(A.includes(".")){const[C,D]=A.split(".");k({...p,[C]:{...p[C],[D]:B}})}else k({...p,[A]:B})},L=(A,B,C)=>{const D=[...p[A]];D[B]=C,k({...p,[A]:D})},O=A=>{k({...p,[A]:[...p[A],""]})},X=(A,B)=>{const C=p[A].filter((D,$)=>$!==B);k({...p,[A]:C})};return r.jsxs("div",{className:"admin-cars",children:[r.jsxs("div",{className:"cars-header",children:[r.jsx("h2",{children:"🚗 Car Fleet Management"}),r.jsxs("div",{className:"cars-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>P(),children:"🔄 Refresh"}),r.jsx("button",{className:"btn-primary",onClick:_,children:"➕ Add New Car"})]})]}),r.jsxs("div",{className:"cars-filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"categoryFilter",children:"Category:"}),r.jsxs("select",{id:"categoryFilter",value:a,onChange:A=>o(A.target.value),children:[r.jsx("option",{value:"all",children:"All Categories"}),Io.slice(1).map(A=>r.jsx("option",{value:A.name,children:A.name},A.id))]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"statusFilter",children:"Status:"}),r.jsxs("select",{id:"statusFilter",value:l,onChange:A=>c(A.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"available",children:"Available"}),r.jsx("option",{value:"unavailable",children:"Unavailable"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"searchTerm",children:"Search:"}),r.jsx("input",{type:"text",id:"searchTerm",value:u,onChange:A=>d(A.target.value),placeholder:"Search cars..."})]})]}),r.jsx("div",{className:"cars-stats",children:r.jsxs("div",{className:"stat-summary",children:["Showing ",s.length," of ",e.length," cars"]})}),r.jsx("div",{className:"cars-grid",children:s.map(A=>r.jsxs("div",{className:"admin-car-card",children:[r.jsxs("div",{className:"car-image",children:[r.jsx("img",{src:A.image,alt:A.name}),r.jsx("div",{className:`availability-badge ${A.available?"available":"unavailable"}`,children:A.available?"Available":"Unavailable"})]}),r.jsxs("div",{className:"car-details",children:[r.jsx("h3",{children:A.name}),r.jsx("p",{className:"car-category",children:A.category}),r.jsxs("p",{className:"car-price",children:["KSH ",A.price.toLocaleString()," / day"]}),r.jsx("p",{className:"car-description",children:A.description}),r.jsxs("div",{className:"car-specs",children:[r.jsxs("span",{children:["⭐ ",A.rating," (",A.reviewCount||A.reviews," reviews)"]}),r.jsxs("span",{children:["🚗 ",A.year]}),r.jsxs("span",{children:["⛽ ",A.fuel]}),r.jsxs("span",{children:["⚙️ ",A.transmission]})]}),r.jsxs("div",{className:"car-actions",children:[r.jsx("button",{className:"btn-small btn-info",onClick:()=>T(A),children:"📝 Reviews"}),r.jsx("button",{className:"btn-small btn-secondary",onClick:()=>N(A),children:"✏️ Edit"}),r.jsx("button",{className:`btn-small ${A.available?"btn-warning":"btn-success"}`,onClick:()=>E(A.id),children:A.available?"🚫 Disable":"✅ Enable"}),r.jsx("button",{className:"btn-small btn-danger",onClick:()=>R(A.id),children:"🗑️ Delete"})]})]})]},A.id))}),s.length===0&&r.jsxs("div",{className:"no-cars",children:[r.jsx("h3",{children:"No cars found"}),r.jsx("p",{children:"No cars match your current filters."})]}),(f||x)&&r.jsx("div",{className:"modal-overlay",onClick:()=>{h(!1),y(!1)},children:r.jsxs("div",{className:"car-modal",onClick:A=>A.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:()=>{h(!1),y(!1)},children:"×"}),r.jsx("h3",{children:f?"Add New Car":"Edit Car"}),r.jsxs("div",{className:"car-form",children:[r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Basic Information"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Car Name *"}),r.jsx("input",{type:"text",value:p.name,onChange:A=>S("name",A.target.value),placeholder:"e.g., Toyota Camry",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Category *"}),r.jsx("select",{value:p.category,onChange:A=>S("category",A.target.value),children:Io.slice(1).map(A=>r.jsx("option",{value:A.name,children:A.name},A.id))})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Price per Day (KSH) *"}),r.jsx("input",{type:"number",value:p.price,onChange:A=>S("price",A.target.value),placeholder:"e.g., 5000",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Year"}),r.jsx("input",{type:"number",value:p.year,onChange:A=>S("year",parseInt(A.target.value)),min:"2000",max:new Date().getFullYear()+1})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Fuel Type"}),r.jsxs("select",{value:p.fuel,onChange:A=>S("fuel",A.target.value),children:[r.jsx("option",{value:"Petrol",children:"Petrol"}),r.jsx("option",{value:"Diesel",children:"Diesel"}),r.jsx("option",{value:"Hybrid",children:"Hybrid"}),r.jsx("option",{value:"Electric",children:"Electric"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Transmission"}),r.jsxs("select",{value:p.transmission,onChange:A=>S("transmission",A.target.value),children:[r.jsx("option",{value:"Automatic",children:"Automatic"}),r.jsx("option",{value:"Manual",children:"Manual"}),r.jsx("option",{value:"CVT",children:"CVT"})]})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Image URL *"}),r.jsx("input",{type:"url",value:p.image,onChange:A=>S("image",A.target.value),placeholder:"https://example.com/car-image.jpg",required:!0})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Description *"}),r.jsx("textarea",{value:p.description,onChange:A=>S("description",A.target.value),placeholder:"Describe the car...",rows:"3",required:!0})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Features"}),p.features.map((A,B)=>r.jsxs("div",{className:"array-input",children:[r.jsx("input",{type:"text",value:A,onChange:C=>L("features",B,C.target.value),placeholder:"e.g., Air Conditioning"}),r.jsx("button",{type:"button",className:"btn-small btn-danger",onClick:()=>X("features",B),children:"Remove"})]},B)),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>O("features"),children:"Add Feature"})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Pickup Locations"}),p.pickupLocations.map((A,B)=>r.jsxs("div",{className:"array-input",children:[r.jsxs("select",{value:A,onChange:C=>L("pickupLocations",B,C.target.value),children:[r.jsx("option",{value:"",children:"Select location"}),ar.map((C,D)=>r.jsx("option",{value:C,children:C},D))]}),r.jsx("button",{type:"button",className:"btn-small btn-danger",onClick:()=>X("pickupLocations",B),children:"Remove"})]},B)),r.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>O("pickupLocations"),children:"Add Location"})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Specifications"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Engine"}),r.jsx("input",{type:"text",value:p.specifications.engine,onChange:A=>S("specifications.engine",A.target.value),placeholder:"e.g., 2.0L 4-Cylinder"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Mileage"}),r.jsx("input",{type:"text",value:p.specifications.mileage,onChange:A=>S("specifications.mileage",A.target.value),placeholder:"e.g., 15 km/l"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Doors"}),r.jsx("input",{type:"number",value:p.specifications.doors,onChange:A=>S("specifications.doors",parseInt(A.target.value)),min:"2",max:"5"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Luggage Capacity"}),r.jsx("input",{type:"text",value:p.specifications.luggage,onChange:A=>S("specifications.luggage",A.target.value),placeholder:"e.g., 2 large bags"})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Minimum Age"}),r.jsx("input",{type:"number",value:p.specifications.minAge,onChange:A=>S("specifications.minAge",parseInt(A.target.value)),min:"18",max:"30"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Available"}),r.jsxs("select",{value:p.available,onChange:A=>S("available",A.target.value==="true"),children:[r.jsx("option",{value:"true",children:"Available"}),r.jsx("option",{value:"false",children:"Unavailable"})]})]})]})]}),r.jsxs("div",{className:"modal-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>{h(!1),y(!1)},children:"Cancel"}),r.jsx("button",{className:"btn-primary",onClick:j,children:f?"Add Car":"Update Car"})]})]})]})}),r.jsx(lf,{car:g,isOpen:w,onClose:()=>b(!1)})]})};const vx=({onRefresh:t})=>{const{user:e}=at(),[n,s]=v.useState([]),[i,a]=v.useState([]),[o,l]=v.useState("all"),[c,u]=v.useState("all"),[d,f]=v.useState(""),[h,x]=v.useState(null),[y,w]=v.useState(!1),[b,g]=v.useState("");v.useEffect(()=>{m()},[]),v.useEffect(()=>{p()},[n,o,c,d]);const m=()=>{const j=Oe.getAllRequests();s(j)},p=()=>{let j=[...n];o!=="all"&&(j=j.filter(S=>S.status===o)),c!=="all"&&(j=j.filter(S=>S.subject===c)),d&&(j=j.filter(S=>S.name.toLowerCase().includes(d.toLowerCase())||S.email.toLowerCase().includes(d.toLowerCase())||S.message.toLowerCase().includes(d.toLowerCase())||S.location.toLowerCase().includes(d.toLowerCase()))),a(j)},k=async(j,S)=>{try{await Oe.updateRequestStatus(j,S,e),m(),t(),alert(`Request status updated to ${S}`)}catch(L){alert(`Failed to update request: ${L.message}`)}},P=j=>{switch(j){case"pending":return"#f59e0b";case"in_progress":return"#3b82f6";case"resolved":return"#10b981";case"closed":return"#6b7280";default:return"#6b7280"}},_=j=>{switch(j){case"complaint":return"High";case"booking":return"Medium";case"support":return"Medium";case"modification":return"Low";case"partnership":return"Low";default:return"Low"}},N=j=>new Date(j).toLocaleDateString("en-KE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"}),R=j=>{x(j),g(""),w(!0)},E=()=>{if(!b.trim()){alert("Please enter a reply message");return}alert(`Reply sent to ${h.email}:

${b}`),k(h.id,"resolved"),w(!1),g("")},T=j=>{switch(j){case"booking":return"📅";case"support":return"🛠️";case"modification":return"✏️";case"complaint":return"⚠️";case"partnership":return"🤝";default:return"📧"}};return r.jsxs("div",{className:"admin-requests",children:[r.jsxs("div",{className:"requests-header",children:[r.jsx("h2",{children:"📨 Customer Requests"}),r.jsxs("div",{className:"requests-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:m,children:"🔄 Refresh"}),r.jsx("button",{className:"btn-primary",children:"📧 Send Newsletter"})]})]}),r.jsxs("div",{className:"requests-filters",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"statusFilter",children:"Status:"}),r.jsxs("select",{id:"statusFilter",value:o,onChange:j=>l(j.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"resolved",children:"Resolved"}),r.jsx("option",{value:"closed",children:"Closed"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"subjectFilter",children:"Subject:"}),r.jsxs("select",{id:"subjectFilter",value:c,onChange:j=>u(j.target.value),children:[r.jsx("option",{value:"all",children:"All Subjects"}),r.jsx("option",{value:"booking",children:"Booking Inquiry"}),r.jsx("option",{value:"support",children:"Customer Support"}),r.jsx("option",{value:"modification",children:"Booking Modification"}),r.jsx("option",{value:"complaint",children:"Complaint/Feedback"}),r.jsx("option",{value:"partnership",children:"Business Partnership"}),r.jsx("option",{value:"other",children:"Other"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{htmlFor:"searchTerm",children:"Search:"}),r.jsx("input",{type:"text",id:"searchTerm",value:d,onChange:j=>f(j.target.value),placeholder:"Search by name, email, or message..."})]})]}),r.jsxs("div",{className:"requests-stats",children:[r.jsxs("div",{className:"stat-summary",children:["Showing ",i.length," of ",n.length," requests"]}),r.jsxs("div",{className:"priority-stats",children:[r.jsxs("span",{className:"priority high",children:["High: ",i.filter(j=>_(j.subject)==="High").length]}),r.jsxs("span",{className:"priority medium",children:["Medium: ",i.filter(j=>_(j.subject)==="Medium").length]}),r.jsxs("span",{className:"priority low",children:["Low: ",i.filter(j=>_(j.subject)==="Low").length]})]})]}),r.jsxs("div",{className:"requests-table",children:[r.jsxs("table",{children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{children:"Request ID"}),r.jsx("th",{children:"Customer"}),r.jsx("th",{children:"Subject"}),r.jsx("th",{children:"Priority"}),r.jsx("th",{children:"Location"}),r.jsx("th",{children:"Created"}),r.jsx("th",{children:"Status"}),r.jsx("th",{children:"Actions"})]})}),r.jsx("tbody",{children:i.map(j=>r.jsxs("tr",{children:[r.jsx("td",{children:r.jsxs("div",{className:"request-id",children:["#",j.id]})}),r.jsx("td",{children:r.jsxs("div",{className:"customer-info",children:[r.jsx("div",{className:"customer-name",children:j.name}),r.jsx("div",{className:"customer-email",children:j.email}),j.phone&&r.jsx("div",{className:"customer-phone",children:j.phone})]})}),r.jsx("td",{children:r.jsxs("div",{className:"subject-info",children:[r.jsx("span",{className:"subject-icon",children:T(j.subject)}),r.jsx("span",{className:"subject-text",children:j.subject.charAt(0).toUpperCase()+j.subject.slice(1)})]})}),r.jsx("td",{children:r.jsx("span",{className:`priority-badge ${_(j.subject).toLowerCase()}`,children:_(j.subject)})}),r.jsx("td",{children:r.jsx("div",{className:"location",children:j.location||"Not specified"})}),r.jsx("td",{children:r.jsx("div",{className:"request-date",children:N(j.createdAt)})}),r.jsx("td",{children:r.jsx("span",{className:"status-badge",style:{backgroundColor:P(j.status)},children:j.status.charAt(0).toUpperCase()+j.status.slice(1)})}),r.jsx("td",{children:r.jsxs("div",{className:"request-actions",children:[r.jsx("button",{className:"btn-small btn-secondary",onClick:()=>R(j),children:"View"}),j.status==="pending"&&r.jsx("button",{className:"btn-small btn-primary",onClick:()=>k(j.id,"in_progress"),children:"Start"}),j.status==="in_progress"&&r.jsx("button",{className:"btn-small btn-success",onClick:()=>k(j.id,"resolved"),children:"Resolve"}),(j.status==="resolved"||j.status==="pending")&&r.jsx("button",{className:"btn-small btn-danger",onClick:()=>k(j.id,"closed"),children:"Close"})]})})]},j.id))})]}),i.length===0&&r.jsxs("div",{className:"no-requests",children:[r.jsx("h3",{children:"No requests found"}),r.jsx("p",{children:"No requests match your current filters."})]})]}),y&&h&&r.jsx("div",{className:"modal-overlay",onClick:()=>w(!1),children:r.jsxs("div",{className:"request-details-modal",onClick:j=>j.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:()=>w(!1),children:"×"}),r.jsxs("h3",{children:["Request Details #",h.id]}),r.jsxs("div",{className:"details-grid",children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Customer Information"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Name:"})," ",h.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," ",h.email]}),h.phone&&r.jsxs("p",{children:[r.jsx("strong",{children:"Phone:"})," ",h.phone]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Location:"})," ",h.location||"Not specified"]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Request Details"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Subject:"})," ",h.subject.charAt(0).toUpperCase()+h.subject.slice(1)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Priority:"}),r.jsx("span",{className:`priority-badge ${_(h.subject).toLowerCase()}`,children:_(h.subject)})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Status:"}),r.jsx("span",{className:"status-badge",style:{backgroundColor:P(h.status)},children:h.status.charAt(0).toUpperCase()+h.status.slice(1)})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Created:"})," ",N(h.createdAt)]}),h.updatedAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Last Updated:"})," ",N(h.updatedAt)]})]})]}),r.jsxs("div",{className:"message-section",children:[r.jsx("h4",{children:"Customer Message"}),r.jsx("div",{className:"message-content",children:h.message})]}),r.jsxs("div",{className:"reply-section",children:[r.jsx("h4",{children:"Send Reply"}),r.jsx("textarea",{value:b,onChange:j=>g(j.target.value),placeholder:"Type your reply to the customer...",rows:"4"}),r.jsxs("div",{className:"reply-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>g(""),children:"Clear"}),r.jsx("button",{className:"btn-primary",onClick:E,children:"Send Reply"})]})]}),r.jsxs("div",{className:"modal-actions",children:[h.status==="pending"&&r.jsx("button",{className:"btn-primary",onClick:()=>{k(h.id,"in_progress"),w(!1)},children:"Start Working"}),h.status==="in_progress"&&r.jsx("button",{className:"btn-success",onClick:()=>{k(h.id,"resolved"),w(!1)},children:"Mark as Resolved"}),r.jsx("button",{className:"btn-secondary",onClick:()=>w(!1),children:"Close"})]})]})})]})};const yx=({stats:t,onRefresh:e})=>{const n=Oe.getAllBookings(),s=Oe.getAllRequests(),i=n.slice(0,5),a=n.reduce((c,u)=>(c[u.carName]=(c[u.carName]||0)+1,c),{}),o=Object.entries(a).sort(([,c],[,u])=>u-c).slice(0,3),l={pending:"#f59e0b",confirmed:"#10b981",completed:"#6366f1",cancelled:"#ef4444"};return r.jsxs("div",{className:"admin-analytics",children:[r.jsxs("div",{className:"analytics-header",children:[r.jsx("h2",{children:"📊 Business Analytics"}),r.jsx("button",{className:"btn-secondary",onClick:e,children:"🔄 Refresh Data"})]}),r.jsxs("div",{className:"analytics-grid",children:[r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"Booking Overview"}),r.jsxs("div",{className:"booking-stats",children:[r.jsxs("div",{className:"stats-grid",children:[r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-number",children:t.total||0}),r.jsx("div",{className:"stat-label",children:"Total Bookings"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-number",children:t.pending||0}),r.jsx("div",{className:"stat-label",children:"Pending"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-number",children:t.confirmed||0}),r.jsx("div",{className:"stat-label",children:"Confirmed"})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-number",children:t.completed||0}),r.jsx("div",{className:"stat-label",children:"Completed"})]})]}),r.jsxs("div",{className:"status-chart",children:[r.jsx("h4",{children:"Booking Status Distribution"}),r.jsx("div",{className:"status-bars",children:Object.entries({pending:t.pending||0,confirmed:t.confirmed||0,completed:t.completed||0,cancelled:t.cancelled||0}).map(([c,u])=>r.jsxs("div",{className:"status-bar",children:[r.jsxs("div",{className:"status-info",children:[r.jsx("span",{className:"status-name",children:c.charAt(0).toUpperCase()+c.slice(1)}),r.jsx("span",{className:"status-count",children:u})]}),r.jsx("div",{className:"status-progress",children:r.jsx("div",{className:"status-fill",style:{width:`${t.total?u/t.total*100:0}%`,backgroundColor:l[c]}})})]},c))})]})]})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"Revenue Analytics"}),r.jsx("div",{className:"revenue-stats",children:r.jsxs("div",{className:"revenue-cards",children:[r.jsxs("div",{className:"revenue-card",children:[r.jsx("h4",{children:"Total Revenue"}),r.jsxs("div",{className:"revenue-amount",children:["KSH ",(t.revenue||0).toLocaleString()]})]}),r.jsxs("div",{className:"revenue-card",children:[r.jsx("h4",{children:"This Month"}),r.jsxs("div",{className:"revenue-amount",children:["KSH ",Math.floor((t.revenue||0)*.3).toLocaleString()]})]}),r.jsxs("div",{className:"revenue-card",children:[r.jsx("h4",{children:"Average per Booking"}),r.jsxs("div",{className:"revenue-amount",children:["KSH ",t.total?Math.floor((t.revenue||0)/t.total).toLocaleString():"0"]})]})]})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"Popular Cars"}),r.jsx("div",{className:"popular-cars",children:o.length>0?o.map(([c,u],d)=>r.jsxs("div",{className:"car-ranking",children:[r.jsxs("div",{className:"rank-number",children:["#",d+1]}),r.jsxs("div",{className:"car-info",children:[r.jsx("div",{className:"car-name",children:c}),r.jsxs("div",{className:"car-bookings",children:[u," bookings"]})]}),r.jsx("div",{className:"booking-bar",children:r.jsx("div",{className:"booking-fill",style:{width:`${u/Math.max(...o.map(([,f])=>f))*100}%`}})})]},c)):r.jsx("div",{className:"no-data",children:"No booking data available"})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"Recent Activity"}),r.jsx("div",{className:"recent-activity",children:r.jsxs("div",{className:"activity-list",children:[i.map(c=>{var u;return r.jsxs("div",{className:"activity-item",children:[r.jsx("div",{className:"activity-icon",children:"🚗"}),r.jsxs("div",{className:"activity-details",children:[r.jsxs("div",{className:"activity-text",children:["New booking for ",r.jsx("strong",{children:c.carName})]}),r.jsxs("div",{className:"activity-meta",children:[new Date(c.createdAt).toLocaleDateString()," • KSH ",(u=c.totalPrice)==null?void 0:u.toLocaleString()]})]}),r.jsx("div",{className:"activity-status",style:{backgroundColor:l[c.status]},children:c.status})]},c.id)}),s.slice(0,3).map(c=>r.jsxs("div",{className:"activity-item",children:[r.jsx("div",{className:"activity-icon",children:"📨"}),r.jsxs("div",{className:"activity-details",children:[r.jsxs("div",{className:"activity-text",children:["New contact request from ",r.jsx("strong",{children:c.name})]}),r.jsxs("div",{className:"activity-meta",children:[new Date(c.createdAt).toLocaleDateString()," •",c.subject]})]}),r.jsx("div",{className:"activity-status",style:{backgroundColor:c.status==="pending"?"#f59e0b":"#10b981"},children:c.status})]},c.id))]})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"System Status"}),r.jsx("div",{className:"system-status",children:r.jsxs("div",{className:"status-items",children:[r.jsxs("div",{className:"status-item",children:[r.jsx("div",{className:"status-indicator active"}),r.jsx("span",{children:"Booking System"}),r.jsx("span",{className:"status-text",children:"Operational"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("div",{className:"status-indicator active"}),r.jsx("span",{children:"Payment Processing"}),r.jsx("span",{className:"status-text",children:"Operational"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("div",{className:"status-indicator active"}),r.jsx("span",{children:"Customer Support"}),r.jsx("span",{className:"status-text",children:"Available"})]}),r.jsxs("div",{className:"status-item",children:[r.jsx("div",{className:"status-indicator warning"}),r.jsx("span",{children:"Fleet Management"}),r.jsx("span",{className:"status-text",children:"Maintenance Due"})]})]})})]}),r.jsxs("div",{className:"analytics-section",children:[r.jsx("h3",{children:"Quick Actions"}),r.jsxs("div",{className:"quick-actions",children:[r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"📋"}),r.jsx("span",{children:"Export Bookings"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"📊"}),r.jsx("span",{children:"Generate Report"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"📧"}),r.jsx("span",{children:"Send Notifications"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx("span",{className:"action-icon",children:"🔧"}),r.jsx("span",{children:"System Settings"})]})]})]})]})]})};const xx=[{id:1,renterId:"renter1",renterName:"James Mwangi",renterAvatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=64&h=64&fit=crop&crop=face",carId:1,carName:"Toyota Vitz",lastMessage:"Is the car still available for next week?",lastMessageTime:"2024-01-20T10:30:00Z",unreadCount:2,status:"active"},{id:2,renterId:"renter2",renterName:"Sarah Kiprotich",renterAvatar:"https://images.unsplash.com/photo-1494790108755-2616b612b1ab?w=64&h=64&fit=crop&crop=face",carId:2,carName:"Nissan X-Trail",lastMessage:"Thank you for the excellent service!",lastMessageTime:"2024-01-19T15:45:00Z",unreadCount:0,status:"completed"},{id:3,renterId:"renter3",renterName:"Peter Ochieng",renterAvatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=64&h=64&fit=crop&crop=face",carId:4,carName:"Mercedes C-Class",lastMessage:"I need help with the pickup location",lastMessageTime:"2024-01-18T09:15:00Z",unreadCount:1,status:"pending"}],wx={1:[{id:1,senderId:"renter1",senderName:"James Mwangi",message:"Hi, I'm interested in renting the Toyota Vitz for next week. Is it available?",timestamp:"2024-01-20T09:00:00Z",type:"text"},{id:2,senderId:"admin",senderName:"CarRental Admin",message:"Hello James! Yes, the Toyota Vitz is available for next week. What dates were you looking at?",timestamp:"2024-01-20T09:15:00Z",type:"text"},{id:3,senderId:"renter1",senderName:"James Mwangi",message:"I need it from Monday 22nd to Friday 26th. Is the pickup location flexible?",timestamp:"2024-01-20T10:30:00Z",type:"text"}],2:[{id:4,senderId:"renter2",senderName:"Sarah Kiprotich",message:"The Nissan X-Trail was perfect for our safari trip. Clean and reliable!",timestamp:"2024-01-19T15:45:00Z",type:"text"},{id:5,senderId:"admin",senderName:"CarRental Admin",message:"Thank you for the feedback, Sarah! We're glad you enjoyed your trip. Please consider leaving a review.",timestamp:"2024-01-19T16:00:00Z",type:"text"}],3:[{id:6,senderId:"renter3",senderName:"Peter Ochieng",message:"I booked the Mercedes C-Class but I'm not sure about the pickup location. Can we meet at JKIA instead?",timestamp:"2024-01-18T09:15:00Z",type:"text"}]},jx=()=>{var _;const{user:t}=at(),[e,n]=v.useState(xx),[s,i]=v.useState(null),[a,o]=v.useState({}),[l,c]=v.useState(""),[u,d]=v.useState(""),[f,h]=v.useState("all");v.useState(!1);const x=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{o(wx);const N=ft.subscribe("new-message",E=>{const{conversationId:T,senderId:j,message:S,timestamp:L}=E;o(O=>({...O,[T]:[...O[T]||[],{id:Date.now(),senderId:j,senderName:j==="admin"?"Admin":"Renter",message:S,timestamp:L,type:"text"}]})),n(O=>O.map(X=>X.id===T?{...X,lastMessage:S,lastMessageTime:L,unreadCount:j!=="admin"?(X.unreadCount||0)+1:0}:X)),(!s||s.id!==T)&&ft.sendNotification("new-message",{conversationId:T,message:`New message: ${S.substring(0,50)}...`})}),R=ft.subscribe("connection",E=>{console.log("Real-time connection status:",E.status)});return()=>{N(),R()}},[]),v.useEffect(()=>{w()},[a,s]);const w=()=>{var N;(N=x.current)==null||N.scrollIntoView({behavior:"smooth"})},b=N=>{i(N),N.unreadCount>0&&n(R=>R.map(E=>E.id===N.id?{...E,unreadCount:0}:E))},g=()=>{var R;if(!l.trim()||!s)return;const N={id:Date.now(),senderId:"admin",senderName:(t==null?void 0:t.name)||"Admin",message:l.trim(),timestamp:new Date().toISOString(),type:"text"};o(E=>({...E,[s.id]:[...E[s.id]||[],N]})),n(E=>E.map(T=>T.id===s.id?{...T,lastMessage:l.trim(),lastMessageTime:new Date().toISOString()}:T)),c(""),(R=y.current)==null||R.focus()},m=N=>{N.key==="Enter"&&!N.shiftKey&&(N.preventDefault(),g())},p=N=>{const R=new Date(N),T=Math.floor((new Date-R)/(1e3*60));return T<1?"Just now":T<60?`${T}m ago`:T<1440?`${Math.floor(T/60)}h ago`:R.toLocaleDateString()},k=e.filter(N=>f==="unread"?N.unreadCount>0:f==="active"?N.status==="active":f==="completed"?N.status==="completed":!0).filter(N=>N.renterName.toLowerCase().includes(u.toLowerCase())||N.carName.toLowerCase().includes(u.toLowerCase())).sort((N,R)=>new Date(R.lastMessageTime)-new Date(N.lastMessageTime)),P=e.reduce((N,R)=>N+R.unreadCount,0);return r.jsxs("div",{className:"admin-messaging",children:[r.jsxs("div",{className:"messaging-header",children:[r.jsx("h2",{children:"Messages"}),r.jsxs("div",{className:"header-stats",children:[r.jsxs("span",{className:"total-conversations",children:[e.length," conversations"]}),P>0&&r.jsxs("span",{className:"unread-badge",children:[P," unread"]})]})]}),r.jsxs("div",{className:"messaging-container",children:[r.jsxs("div",{className:"conversations-sidebar",children:[r.jsxs("div",{className:"sidebar-header",children:[r.jsx("div",{className:"search-container",children:r.jsx("input",{type:"text",placeholder:"Search conversations...",value:u,onChange:N=>d(N.target.value),className:"search-input"})}),r.jsxs("div",{className:"filter-tabs",children:[r.jsx("button",{className:`filter-tab ${f==="all"?"active":""}`,onClick:()=>h("all"),children:"All"}),r.jsxs("button",{className:`filter-tab ${f==="unread"?"active":""}`,onClick:()=>h("unread"),children:["Unread (",e.filter(N=>N.unreadCount>0).length,")"]}),r.jsx("button",{className:`filter-tab ${f==="active"?"active":""}`,onClick:()=>h("active"),children:"Active"})]})]}),r.jsx("div",{className:"conversations-list",children:k.map(N=>r.jsxs("div",{className:`conversation-item ${(s==null?void 0:s.id)===N.id?"selected":""}`,onClick:()=>b(N),children:[r.jsxs("div",{className:"conversation-avatar",children:[r.jsx("img",{src:N.renterAvatar,alt:N.renterName}),r.jsx("div",{className:`status-dot ${N.status}`})]}),r.jsxs("div",{className:"conversation-content",children:[r.jsxs("div",{className:"conversation-header",children:[r.jsx("h4",{className:"renter-name",children:N.renterName}),r.jsx("span",{className:"last-time",children:p(N.lastMessageTime)})]}),r.jsxs("div",{className:"conversation-meta",children:[r.jsx("span",{className:"car-name",children:N.carName}),N.unreadCount>0&&r.jsx("span",{className:"unread-count",children:N.unreadCount})]}),r.jsx("p",{className:"last-message",children:N.lastMessage})]})]},N.id))})]}),r.jsx("div",{className:"chat-area",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"chat-header",children:[r.jsxs("div",{className:"chat-header-info",children:[r.jsx("img",{src:s.renterAvatar,alt:s.renterName,className:"chat-avatar"}),r.jsxs("div",{className:"chat-header-text",children:[r.jsx("h3",{children:s.renterName}),r.jsxs("p",{children:["Rental: ",s.carName]})]})]}),r.jsxs("div",{className:"chat-actions",children:[r.jsx("button",{className:"action-btn",children:"📞 Call"}),r.jsx("button",{className:"action-btn",children:"📧 Email"}),r.jsx("button",{className:"action-btn",children:"🚗 View Booking"})]})]}),r.jsxs("div",{className:"messages-container",children:[(_=a[s.id])==null?void 0:_.map(N=>r.jsx("div",{className:`message ${N.senderId==="admin"?"sent":"received"}`,children:r.jsxs("div",{className:"message-content",children:[r.jsx("p",{children:N.message}),r.jsx("span",{className:"message-time",children:new Date(N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},N.id)),r.jsx("div",{ref:x})]}),r.jsx("div",{className:"message-input-container",children:r.jsxs("div",{className:"message-input-wrapper",children:[r.jsx("textarea",{ref:y,value:l,onChange:N=>c(N.target.value),onKeyPress:m,placeholder:"Type your message...",className:"message-input",rows:2}),r.jsx("button",{onClick:g,disabled:!l.trim(),className:"send-button",children:"Send"})]})})]}):r.jsx("div",{className:"no-conversation",children:r.jsxs("div",{className:"no-conversation-content",children:[r.jsx("h3",{children:"Select a conversation"}),r.jsx("p",{children:"Choose a conversation from the sidebar to start messaging with renters."})]})})})]})]})};const kx=()=>{const{user:t,isAuthenticated:e,isAdmin:n}=at(),[s,i]=v.useState("analytics"),[a,o]=v.useState({}),[l,c]=v.useState(0);if(v.useEffect(()=>{if(n){const f=Oe.getBookingStats();o(f)}},[n,l]),!e||!n)return r.jsx(Xh,{to:"/"});const u=()=>{c(f=>f+1)},d=[{id:"analytics",label:"Analytics",icon:"📊"},{id:"bookings",label:"Bookings",icon:"📋"},{id:"cars",label:"Cars",icon:"🚗"},{id:"requests",label:"Requests",icon:"📨"},{id:"messaging",label:"Messages",icon:"💬"}];return r.jsxs("div",{className:"admin-dashboard",children:[r.jsx("div",{className:"admin-header",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"admin-welcome",children:[r.jsx("h1",{children:"🛡️ Admin Dashboard"}),r.jsxs("p",{children:["Welcome back, ",t.name,"! Manage your car rental business from here."]})]}),r.jsxs("div",{className:"quick-stats",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:"📋"}),r.jsxs("div",{className:"stat-details",children:[r.jsx("h3",{children:a.pending||0}),r.jsx("p",{children:"Pending Bookings"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:"✅"}),r.jsxs("div",{className:"stat-details",children:[r.jsx("h3",{children:a.confirmed||0}),r.jsx("p",{children:"Active Bookings"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:"💰"}),r.jsxs("div",{className:"stat-details",children:[r.jsxs("h3",{children:["KSH ",(a.revenue||0).toLocaleString()]}),r.jsx("p",{children:"Total Revenue"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:"📈"}),r.jsxs("div",{className:"stat-details",children:[r.jsx("h3",{children:a.thisMonth||0}),r.jsx("p",{children:"This Month"})]})]})]})]})}),r.jsx("div",{className:"admin-content",children:r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"admin-nav",children:d.map(f=>r.jsxs("button",{className:`admin-tab ${s===f.id?"active":""}`,onClick:()=>i(f.id),children:[r.jsx("span",{className:"tab-icon",children:f.icon}),r.jsx("span",{className:"tab-label",children:f.label})]},f.id))}),r.jsxs("div",{className:"admin-tab-content",children:[s==="analytics"&&r.jsx(yx,{stats:a,onRefresh:u}),s==="bookings"&&r.jsx(px,{onRefresh:u}),s==="cars"&&r.jsx(gx,{onRefresh:u}),s==="requests"&&r.jsx(vx,{onRefresh:u}),s==="messaging"&&r.jsx(jx,{})]})]})})]})};const Nx=({isOpen:t,onClose:e,initialMode:n="login"})=>{const[s,i]=v.useState(n),[a,o]=v.useState({email:"",password:"",name:"",phone:"",confirmPassword:""}),[l,c]=v.useState({}),[u,d]=v.useState(!1),[f,h]=v.useState(!1),[x,y]=v.useState(""),{login:w,register:b,isLoading:g}=at();if(v.useEffect(()=>{t&&(o({email:"",password:"",name:"",phone:"",confirmPassword:""}),c({}),y(""),d(!1),h(!1),i(n))},[t,n]),!t)return null;const m=T=>{const{name:j,value:S}=T.target;o({...a,[j]:S}),l[j]&&c({...l,[j]:""}),l.general&&c({...l,general:""})},p=T=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(T),k=T=>/^\+254[17]\d{8}$/.test(T),P=T=>({length:T.length>=8,uppercase:/[A-Z]/.test(T),lowercase:/[a-z]/.test(T),number:/\d/.test(T),special:/[!@#$%^&*(),.?":{}|<>]/.test(T)}),_=()=>{const T={};if(a.email.trim()?p(a.email)||(T.email="Please enter a valid email address"):T.email="Email is required",!a.password)T.password="Password is required";else if(s==="register"){const j=P(a.password);j.length?!j.uppercase||!j.lowercase?T.password="Password must contain both uppercase and lowercase letters":j.number||(T.password="Password must contain at least one number"):T.password="Password must be at least 8 characters long"}else a.password.length<6&&(T.password="Password must be at least 6 characters");return s==="register"&&(a.name.trim()?a.name.trim().length<2&&(T.name="Name must be at least 2 characters"):T.name="Full name is required",a.phone.trim()?k(a.phone)||(T.phone="Phone must be in format +254XXXXXXXXX (Kenyan number)"):T.phone="Phone number is required",a.confirmPassword?a.password!==a.confirmPassword&&(T.confirmPassword="Passwords do not match"):T.confirmPassword="Please confirm your password"),c(T),Object.keys(T).length===0},N=async T=>{if(T.preventDefault(),!_())return;let j;try{s==="login"?j=await w(a.email.trim(),a.password):j=await b({name:a.name.trim(),email:a.email.trim(),phone:a.phone.trim(),password:a.password}),j.success?(y(s==="login"?"Welcome back! You have been successfully signed in.":"Account created successfully! Welcome to RentKenya."),setTimeout(()=>{e(),o({email:"",password:"",name:"",phone:"",confirmPassword:""}),y("")},1500)):c({general:j.error||`${s==="login"?"Login":"Registration"} failed. Please try again.`})}catch{c({general:"An unexpected error occurred. Please try again."})}},R=()=>{i(s==="login"?"register":"login"),c({}),y(""),o({email:a.email,password:"",name:"",phone:"",confirmPassword:""})},E=T=>{const j=P(T),S=Object.values(j).filter(Boolean).length;return S<2?{level:"weak",color:"#ef4444"}:S<4?{level:"medium",color:"#f59e0b"}:{level:"strong",color:"#10b981"}};return r.jsx("div",{className:"modal-overlay",onClick:e,children:r.jsxs("div",{className:"auth-modal",onClick:T=>T.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:e,children:"×"}),r.jsxs("div",{className:"modal-header",children:[r.jsx("h2",{children:s==="login"?"Welcome Back":"Create Account"}),r.jsx("p",{children:s==="login"?"Sign in to access your bookings and preferences":"Join RentKenya and start your journey across beautiful Kenya"})]}),x&&r.jsxs("div",{className:"success-message",children:[r.jsx("span",{className:"success-icon",children:"✓"}),x]}),r.jsxs("form",{onSubmit:N,className:"auth-form",children:[l.general&&r.jsxs("div",{className:"error-message general-error",children:[r.jsx("span",{className:"error-icon",children:"⚠"}),l.general]}),s==="register"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"name",children:"Full Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:m,className:l.name?"error":"",placeholder:"Enter your full name",autoComplete:"name"}),l.name&&r.jsx("span",{className:"error-message",children:l.name})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"email",children:"Email Address *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:m,className:l.email?"error":"",placeholder:"your.email@example.com",autoComplete:"email"}),l.email&&r.jsx("span",{className:"error-message",children:l.email})]}),s==="register"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:m,className:l.phone?"error":"",placeholder:"+254700000000",autoComplete:"tel"}),l.phone&&r.jsx("span",{className:"error-message",children:l.phone}),r.jsx("small",{className:"field-help",children:"Format: +254XXXXXXXXX (Kenyan mobile number)"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"password",children:"Password *"}),r.jsxs("div",{className:"password-input-wrapper",children:[r.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:a.password,onChange:m,className:l.password?"error":"",placeholder:s==="login"?"Enter your password":"Create a strong password",autoComplete:s==="login"?"current-password":"new-password"}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>d(!u),children:u?"👁️":"👁️‍🗨️"})]}),l.password&&r.jsx("span",{className:"error-message",children:l.password}),s==="register"&&a.password&&r.jsxs("div",{className:"password-strength",children:[r.jsx("div",{className:"strength-bar",children:r.jsx("div",{className:"strength-fill",style:{width:`${Object.values(P(a.password)).filter(Boolean).length/5*100}%`,backgroundColor:E(a.password).color}})}),r.jsxs("span",{className:"strength-label",style:{color:E(a.password).color},children:[E(a.password).level," password"]})]})]}),s==="register"&&r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),r.jsxs("div",{className:"password-input-wrapper",children:[r.jsx("input",{type:f?"text":"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:m,className:l.confirmPassword?"error":"",placeholder:"Confirm your password",autoComplete:"new-password"}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>h(!f),children:f?"👁️":"👁️‍🗨️"})]}),l.confirmPassword&&r.jsx("span",{className:"error-message",children:l.confirmPassword})]}),s==="register"&&r.jsx("div",{className:"terms-notice",children:r.jsx("p",{children:"By creating an account, you agree to our Terms of Service and Privacy Policy."})}),r.jsx("button",{type:"submit",className:"btn-primary auth-submit",disabled:g,children:g?r.jsxs("span",{className:"loading-spinner",children:[r.jsx("span",{className:"spinner"}),s==="login"?"Signing in...":"Creating account..."]}):s==="login"?"Sign In":"Create Account"})]}),r.jsx("div",{className:"auth-switch",children:r.jsxs("p",{children:[s==="login"?"Don't have an account? ":"Already have an account? ",r.jsx("button",{type:"button",onClick:R,className:"switch-button",disabled:g,children:s==="login"?"Sign up here":"Sign in here"})]})}),s==="login"&&r.jsxs("div",{className:"demo-accounts",children:[r.jsx("h4",{children:"Demo Accounts:"}),r.jsxs("div",{className:"demo-account-list",children:[r.jsxs("div",{className:"demo-account",children:[r.jsx("strong",{children:"Admin:"})," admin@rentkenya.com (any password)"]}),r.jsxs("div",{className:"demo-account",children:[r.jsx("strong",{children:"User:"})," user@example.com (any password)"]})]})]})]})})};let je=[];const bx=[{code:"equity",name:"Equity Bank Kenya Limited"},{code:"kcb",name:"Kenya Commercial Bank (KCB)"},{code:"cooperative",name:"Co-operative Bank of Kenya"},{code:"absa",name:"Absa Bank Kenya PLC"},{code:"stanbic",name:"Stanbic Bank Kenya Limited"},{code:"ncba",name:"NCBA Bank Kenya PLC"},{code:"dtb",name:"Diamond Trust Bank Kenya Limited"},{code:"familybank",name:"Family Bank Limited"},{code:"iban",name:"I&M Bank Limited"},{code:"gureysbank",name:"Guaranty Trust Bank Kenya Limited"}];class Sx{constructor(){this.apiBaseUrl="https://api.yourcarrental.com"}async processPayment(e){const{paymentMethod:n,amount:s,currency:i,bookingId:a}=e;try{switch(await this.delay(2e3),n){case"mpesa":return await this.processMpesaPayment(e);case"card":return await this.processCardPayment(e);case"bank":return await this.processBankTransfer(e);default:throw new Error("Unsupported payment method")}}catch(o){return console.error("Payment processing error:",o),{success:!1,error:o.message||"Payment processing failed"}}}async processMpesaPayment(e){const{amount:n,paymentData:{mpesaNumber:s},booking:i,customer:a}=e,o=s.replace(/\s/g,"");if(!/^(254|0)(7|1)\d{8}$/.test(o))throw new Error("Invalid M-Pesa number format");const l=await this.simulateMpesaSTKPush({phoneNumber:o,amount:n,reference:`CAR-${i.id}`,description:`Car rental payment for ${i.carName}`});if(l.success){const c=this.recordPayment({...e,transactionId:l.transactionId,providerResponse:l,status:"completed"});return await this.updateBookingPaymentStatus(i.id,"confirmed_paid",c.id),{success:!0,transactionId:l.transactionId,message:"M-Pesa payment completed successfully",payment:c,receiptNumber:l.receiptNumber}}else throw new Error(l.error||"M-Pesa payment failed")}async processCardPayment(e){const{amount:n,paymentData:s,booking:i}=e;this.validateCardDetails(s);const a=await this.simulateCardProcessing({cardNumber:s.cardNumber.replace(/\s/g,""),expiryDate:s.expiryDate,cvv:s.cvv,cardName:s.cardName,amount:n,currency:"KES",reference:`CAR-${i.id}`});if(a.success){const o=this.recordPayment({...e,transactionId:a.transactionId,providerResponse:a,status:"completed"});return await this.updateBookingPaymentStatus(i.id,"confirmed_paid",o.id),{success:!0,transactionId:a.transactionId,message:"Card payment completed successfully",payment:o,last4:s.cardNumber.slice(-4)}}else throw new Error(a.error||"Card payment failed")}async processBankTransfer(e){const{amount:n,paymentData:s,booking:i}=e;if(!s.bankCode||!s.bankAccount)throw new Error("Bank details are required");const a=await this.simulateBankTransfer({bankCode:s.bankCode,accountNumber:s.bankAccount,amount:n,reference:`CAR-${i.id}`,narration:`Car rental payment for ${i.carName}`});if(a.success){const o=this.recordPayment({...e,transactionId:a.transactionId,providerResponse:a,status:"pending"});return await this.updateBookingPaymentStatus(i.id,"confirmed_pending_payment",o.id),{success:!0,transactionId:a.transactionId,message:"Bank transfer initiated successfully. Payment will be verified within 24 hours.",payment:o,bankName:this.getBankName(s.bankCode)}}else throw new Error(a.error||"Bank transfer failed")}async simulateMpesaSTKPush(e){return await this.delay(1500),Math.random()>.05?{success:!0,transactionId:`MP${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`,receiptNumber:`MP${Date.now()}`,phoneNumber:e.phoneNumber,amount:e.amount,timestamp:new Date().toISOString()}:{success:!1,error:"Transaction cancelled by user or insufficient funds"}}async simulateCardProcessing(e){return await this.delay(2e3),e.cardNumber.startsWith("4000000000000002")?{success:!1,error:"Card declined - insufficient funds"}:e.cardNumber.startsWith("4000000000000119")?{success:!1,error:"Card declined - processing error"}:Math.random()>.08?{success:!0,transactionId:`CH${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`,authCode:`AUTH${Math.random().toString(36).substr(2,6).toUpperCase()}`,cardType:this.getCardType(e.cardNumber),last4:e.cardNumber.slice(-4),timestamp:new Date().toISOString()}:{success:!1,error:"Card processing failed. Please try again or use a different card."}}async simulateBankTransfer(e){return await this.delay(1e3),Math.random()>.02?{success:!0,transactionId:`BT${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`,referenceNumber:`REF${Date.now()}`,bankCode:e.bankCode,accountNumber:e.accountNumber,status:"pending_verification",timestamp:new Date().toISOString()}:{success:!1,error:"Bank transfer initiation failed. Please check your account details."}}validateCardDetails(e){const{cardNumber:n,expiryDate:s,cvv:i,cardName:a}=e;if(!n||n.replace(/\s/g,"").length!==16)throw new Error("Invalid card number");if(!s||!/^(0[1-9]|1[0-2])\/\d{2}$/.test(s))throw new Error("Invalid expiry date format");const[o,l]=s.split("/");if(new Date(`20${l}`,o-1)<new Date)throw new Error("Card has expired");if(!i||!/^\d{3,4}$/.test(i))throw new Error("Invalid CVV");if(!a||a.trim().length<2)throw new Error("Cardholder name is required")}getCardType(e){const n=e.replace(/\s/g,"");return n.startsWith("4")?"Visa":/^5[1-5]/.test(n)||/^2[2-7]/.test(n)?"Mastercard":/^3[47]/.test(n)?"American Express":/^6(?:011|5)/.test(n)?"Discover":"Unknown"}getBankName(e){const n=bx.find(s=>s.code===e);return n?n.name:"Unknown Bank"}recordPayment(e){const n={id:Date.now(),bookingId:e.bookingId,amount:e.amount,currency:e.currency,paymentMethod:e.paymentMethod,status:e.status,transactionId:e.transactionId,providerResponse:e.providerResponse,customerInfo:{id:e.customer.id,name:e.customer.name,email:e.customer.email},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return je.push(n),n}async updateBookingPaymentStatus(e,n,s){console.log(`Updating booking ${e} status to ${n} with payment ${s}`);try{const{bookingService:i}=await kn(()=>Promise.resolve().then(()=>Hv),void 0)}catch(i){console.error("Error updating booking status:",i)}}getPaymentHistory(e){return je.filter(n=>n.customerInfo.id===e).sort((n,s)=>new Date(s.createdAt)-new Date(n.createdAt))}getPaymentById(e){return je.find(n=>n.id===e)}getPaymentByTransactionId(e){return je.find(n=>n.transactionId===e)}getAllPayments(){return je.sort((e,n)=>new Date(n.createdAt)-new Date(e.createdAt))}verifyBankPayment(e,n,s){if(!s||s.role!=="admin")throw new Error("Admin access required");const i=je.findIndex(o=>o.id===e);if(i===-1)throw new Error("Payment not found");const a=je[i];return a.status=n?"completed":"failed",a.verifiedBy=s.id,a.verifiedAt=new Date().toISOString(),a.updatedAt=new Date().toISOString(),n&&this.updateBookingPaymentStatus(a.bookingId,"confirmed_paid",a.id),a}async refundPayment(e,n,s){if(!s||s.role!=="admin")throw new Error("Admin access required");const i=this.getPaymentById(e);if(!i)throw new Error("Payment not found");if(i.status!=="completed")throw new Error("Only completed payments can be refunded");await this.delay(1e3);const a={id:Date.now(),originalPaymentId:e,amount:i.amount,currency:i.currency,reason:n,status:"completed",refundTransactionId:`RF${Date.now()}${Math.random().toString(36).substr(2,9).toUpperCase()}`,processedBy:s.id,createdAt:new Date().toISOString()};return i.refunded=!0,i.refundId=a.id,i.updatedAt=new Date().toISOString(),je.push({...a,type:"refund"}),a}getPaymentStats(){const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),0,1),i=je.filter(o=>o.status==="completed"&&o.type!=="refund"),a=i.reduce((o,l)=>o+l.amount,0);return{totalPayments:je.length,completedPayments:i.length,pendingPayments:je.filter(o=>o.status==="pending").length,failedPayments:je.filter(o=>o.status==="failed").length,totalRevenue:a,thisMonthRevenue:i.filter(o=>new Date(o.createdAt)>=n).reduce((o,l)=>o+l.amount,0),thisYearRevenue:i.filter(o=>new Date(o.createdAt)>=s).reduce((o,l)=>o+l.amount,0),paymentMethods:{mpesa:je.filter(o=>o.paymentMethod==="mpesa").length,card:je.filter(o=>o.paymentMethod==="card").length,bank:je.filter(o=>o.paymentMethod==="bank").length}}}delay(e){return new Promise(n=>setTimeout(n,e))}formatAmount(e,n="KES"){return new Intl.NumberFormat("en-KE",{style:"currency",currency:n,minimumFractionDigits:0}).format(e)}validateAmount(e){const n=parseFloat(e);if(isNaN(n)||n<=0)throw new Error("Invalid payment amount");if(n<100)throw new Error("Minimum payment amount is KES 100");if(n>1e6)throw new Error("Maximum payment amount is KES 1,000,000");return n}}const _x=new Sx;const Cx=({isOpen:t,onClose:e,booking:n,onPaymentSuccess:s})=>{const{user:i}=at(),[a,o]=v.useState("mpesa"),[l,c]=v.useState({mpesaNumber:"",cardNumber:"",expiryDate:"",cvv:"",cardName:"",bankAccount:"",bankCode:""}),[u,d]=v.useState({}),[f,h]=v.useState(!1),[x,y]=v.useState("method"),[w,b]=v.useState(null);if(v.useEffect(()=>{t&&(y("method"),b(null),d({}),h(!1))},[t]),!t||!n)return null;const g=S=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES",minimumFractionDigits:0}).format(S),m=()=>{const S={};return a==="mpesa"&&(l.mpesaNumber?/^(254|0)(7|1)\d{8}$/.test(l.mpesaNumber.replace(/\s/g,""))||(S.mpesaNumber="Please enter a valid Kenyan phone number"):S.mpesaNumber="M-Pesa number is required"),a==="card"&&(l.cardNumber?/^\d{16}$/.test(l.cardNumber.replace(/\s/g,""))||(S.cardNumber="Please enter a valid 16-digit card number"):S.cardNumber="Card number is required",l.expiryDate?/^(0[1-9]|1[0-2])\/\d{2}$/.test(l.expiryDate)||(S.expiryDate="Please enter date in MM/YY format"):S.expiryDate="Expiry date is required",l.cvv?/^\d{3,4}$/.test(l.cvv)||(S.cvv="Please enter a valid CVV"):S.cvv="CVV is required",l.cardName||(S.cardName="Name on card is required")),a==="bank"&&(l.bankAccount||(S.bankAccount="Bank account number is required"),l.bankCode||(S.bankCode="Please select your bank")),d(S),Object.keys(S).length===0},p=(S,L)=>{c(O=>({...O,[S]:L})),u[S]&&d(O=>({...O,[S]:""}))},k=S=>S.replace(/\s/g,"").replace(/(.{4})/g,"$1 ").trim(),P=S=>{const L=S.replace(/\D/g,"");return L.startsWith("254")?L.replace(/(\d{3})(\d{3})(\d{3})(\d{3})/,"$1 $2 $3 $4"):L.startsWith("0")?L.replace(/(\d{4})(\d{3})(\d{3})/,"$1 $2 $3"):L},_=async()=>{if(m()){h(!0),y("processing");try{const S={bookingId:n.id,amount:n.totalPrice,currency:"KES",paymentMethod:a,paymentData:{...l,customerName:i.name,customerEmail:i.email},booking:n,customer:i},L=await _x.processPayment(S);L.success?(b(L),y("success"),setTimeout(()=>{s(L)},2e3)):(b(L),y("failed"))}catch{b({success:!1,error:"Payment processing failed. Please try again."}),y("failed")}finally{h(!1)}}},N=()=>r.jsxs("div",{className:"payment-step",children:[r.jsx("h3",{children:"Choose Payment Method"}),r.jsxs("div",{className:"payment-methods",children:[r.jsxs("div",{className:`payment-method ${a==="mpesa"?"selected":""}`,onClick:()=>o("mpesa"),children:[r.jsx("div",{className:"method-icon",children:"📱"}),r.jsxs("div",{className:"method-info",children:[r.jsx("h4",{children:"M-Pesa"}),r.jsx("p",{children:"Pay with your mobile money"}),r.jsx("span",{className:"method-badge popular",children:"Most Popular"})]}),r.jsx("div",{className:"method-radio",children:r.jsx("input",{type:"radio",checked:a==="mpesa",onChange:()=>o("mpesa")})})]}),r.jsxs("div",{className:`payment-method ${a==="card"?"selected":""}`,onClick:()=>o("card"),children:[r.jsx("div",{className:"method-icon",children:"💳"}),r.jsxs("div",{className:"method-info",children:[r.jsx("h4",{children:"Credit/Debit Card"}),r.jsx("p",{children:"Visa, Mastercard accepted"}),r.jsxs("div",{className:"card-logos",children:[r.jsx("span",{children:"VISA"}),r.jsx("span",{children:"MC"})]})]}),r.jsx("div",{className:"method-radio",children:r.jsx("input",{type:"radio",checked:a==="card",onChange:()=>o("card")})})]}),r.jsxs("div",{className:`payment-method ${a==="bank"?"selected":""}`,onClick:()=>o("bank"),children:[r.jsx("div",{className:"method-icon",children:"🏦"}),r.jsxs("div",{className:"method-info",children:[r.jsx("h4",{children:"Bank Transfer"}),r.jsx("p",{children:"Direct bank payment"}),r.jsx("span",{className:"method-badge",children:"Secure"})]}),r.jsx("div",{className:"method-radio",children:r.jsx("input",{type:"radio",checked:a==="bank",onChange:()=>o("bank")})})]})]}),r.jsxs("button",{className:"btn-primary next-step",onClick:()=>y("details"),children:["Continue with ",a==="mpesa"?"M-Pesa":a==="card"?"Card":"Bank Transfer"]})]}),R=()=>r.jsxs("div",{className:"payment-step",children:[r.jsxs("div",{className:"step-header",children:[r.jsx("button",{className:"back-button",onClick:()=>y("method"),children:"← Back"}),r.jsx("h3",{children:"Payment Details"})]}),a==="mpesa"&&r.jsxs("div",{className:"payment-form",children:[r.jsxs("div",{className:"mpesa-info",children:[r.jsx("div",{className:"mpesa-icon",children:"📱"}),r.jsx("h4",{children:"M-Pesa Payment"}),r.jsx("p",{children:"You'll receive a prompt on your phone to complete the payment"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"M-Pesa Phone Number"}),r.jsx("input",{type:"tel",value:l.mpesaNumber,onChange:S=>p("mpesaNumber",P(S.target.value)),placeholder:"0712 345 678 or 254 712 345 678",className:u.mpesaNumber?"error":""}),u.mpesaNumber&&r.jsx("span",{className:"error-message",children:u.mpesaNumber})]}),r.jsxs("div",{className:"mpesa-instructions",children:[r.jsx("h5",{children:"How it works:"}),r.jsxs("ol",{children:[r.jsx("li",{children:'Click "Pay Now" below'}),r.jsx("li",{children:"You'll receive an STK push notification"}),r.jsx("li",{children:"Enter your M-Pesa PIN to complete payment"}),r.jsx("li",{children:"You'll receive a confirmation SMS"})]})]})]}),a==="card"&&r.jsxs("div",{className:"payment-form",children:[r.jsxs("div",{className:"card-info",children:[r.jsx("div",{className:"card-icon",children:"💳"}),r.jsx("h4",{children:"Card Payment"}),r.jsx("p",{children:"Your card information is encrypted and secure"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Card Number"}),r.jsx("input",{type:"text",value:l.cardNumber,onChange:S=>p("cardNumber",k(S.target.value)),placeholder:"1234 5678 9012 3456",maxLength:"19",className:u.cardNumber?"error":""}),u.cardNumber&&r.jsx("span",{className:"error-message",children:u.cardNumber})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Expiry Date"}),r.jsx("input",{type:"text",value:l.expiryDate,onChange:S=>p("expiryDate",S.target.value),placeholder:"MM/YY",maxLength:"5",className:u.expiryDate?"error":""}),u.expiryDate&&r.jsx("span",{className:"error-message",children:u.expiryDate})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"CVV"}),r.jsx("input",{type:"text",value:l.cvv,onChange:S=>p("cvv",S.target.value),placeholder:"123",maxLength:"4",className:u.cvv?"error":""}),u.cvv&&r.jsx("span",{className:"error-message",children:u.cvv})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Name on Card"}),r.jsx("input",{type:"text",value:l.cardName,onChange:S=>p("cardName",S.target.value),placeholder:"John Doe",className:u.cardName?"error":""}),u.cardName&&r.jsx("span",{className:"error-message",children:u.cardName})]})]}),a==="bank"&&r.jsxs("div",{className:"payment-form",children:[r.jsxs("div",{className:"bank-info",children:[r.jsx("div",{className:"bank-icon",children:"🏦"}),r.jsx("h4",{children:"Bank Transfer"}),r.jsx("p",{children:"Pay directly from your bank account"})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Select Bank"}),r.jsxs("select",{value:l.bankCode,onChange:S=>p("bankCode",S.target.value),className:u.bankCode?"error":"",children:[r.jsx("option",{value:"",children:"Choose your bank"}),r.jsx("option",{value:"equity",children:"Equity Bank"}),r.jsx("option",{value:"kcb",children:"KCB Bank"}),r.jsx("option",{value:"cooperative",children:"Co-operative Bank"}),r.jsx("option",{value:"absa",children:"Absa Bank Kenya"}),r.jsx("option",{value:"stanbic",children:"Stanbic Bank"}),r.jsx("option",{value:"ncba",children:"NCBA Bank"}),r.jsx("option",{value:"dtb",children:"Diamond Trust Bank"})]}),u.bankCode&&r.jsx("span",{className:"error-message",children:u.bankCode})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{children:"Account Number"}),r.jsx("input",{type:"text",value:l.bankAccount,onChange:S=>p("bankAccount",S.target.value),placeholder:"Enter your account number",className:u.bankAccount?"error":""}),u.bankAccount&&r.jsx("span",{className:"error-message",children:u.bankAccount})]})]}),r.jsx("button",{className:"btn-primary payment-submit",onClick:_,disabled:f,children:f?"Processing...":`Pay ${g(n.totalPrice)}`})]}),E=()=>r.jsxs("div",{className:"payment-step processing",children:[r.jsx("div",{className:"processing-animation",children:r.jsx("div",{className:"spinner"})}),r.jsx("h3",{children:"Processing Payment"}),r.jsx("p",{children:"Please don't close this window..."}),a==="mpesa"&&r.jsxs("div",{className:"mpesa-prompt",children:[r.jsx("p",{children:r.jsx("strong",{children:"Check your phone for M-Pesa prompt"})}),r.jsx("p",{children:"Enter your M-Pesa PIN to complete the payment"})]})]}),T=()=>r.jsxs("div",{className:"payment-step success",children:[r.jsx("div",{className:"success-icon",children:"✅"}),r.jsx("h3",{children:"Payment Successful!"}),r.jsxs("div",{className:"payment-details",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Transaction ID:"})," ",w==null?void 0:w.transactionId]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Amount:"})," ",g(n.totalPrice)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Method:"})," ",a==="mpesa"?"M-Pesa":a==="card"?"Card":"Bank Transfer"]})]}),r.jsxs("div",{className:"success-message",children:[r.jsx("p",{children:"Your booking has been confirmed and paid for. You'll receive a confirmation email shortly."}),r.jsxs("p",{children:[r.jsx("strong",{children:"Booking Status:"})," Confirmed & Paid"]})]})]}),j=()=>r.jsxs("div",{className:"payment-step failed",children:[r.jsx("div",{className:"error-icon",children:"❌"}),r.jsx("h3",{children:"Payment Failed"}),r.jsx("div",{className:"error-details",children:r.jsx("p",{children:(w==null?void 0:w.error)||"Something went wrong with your payment."})}),r.jsxs("div",{className:"failed-actions",children:[r.jsx("button",{className:"btn-secondary",onClick:()=>y("details"),children:"Try Again"}),r.jsx("button",{className:"btn-primary",onClick:()=>y("method"),children:"Change Payment Method"})]})]});return r.jsx("div",{className:"modal-overlay payment-overlay",onClick:e,children:r.jsxs("div",{className:"payment-modal",onClick:S=>S.stopPropagation(),children:[r.jsxs("div",{className:"payment-header",children:[r.jsx("h2",{children:"Complete Payment"}),r.jsx("button",{className:"modal-close",onClick:e,children:"×"})]}),r.jsx("div",{className:"booking-summary",children:r.jsxs("div",{className:"summary-card",children:[r.jsx("img",{src:n.carImage,alt:n.carName,className:"booking-car-thumb"}),r.jsxs("div",{className:"summary-details",children:[r.jsx("h4",{children:n.carName}),r.jsxs("p",{children:[n.pickupDate," to ",n.dropoffDate]}),r.jsx("p",{className:"summary-total",children:g(n.totalPrice)})]})]})}),r.jsxs("div",{className:"payment-content",children:[x==="method"&&N(),x==="details"&&R(),x==="processing"&&E(),x==="success"&&T(),x==="failed"&&j()]}),r.jsx("div",{className:"payment-security",children:r.jsxs("div",{className:"security-info",children:[r.jsx("span",{className:"security-icon",children:"🔒"}),r.jsx("span",{children:"Your payment is secured with 256-bit SSL encryption"})]})})]})})};const Ex=({isOpen:t,onClose:e,car:n})=>{var T,j;const{user:s,isAuthenticated:i}=at(),[a,o]=v.useState({pickupLocation:"",dropoffLocation:"",pickupDate:"",dropoffDate:"",pickupTime:"09:00",dropoffTime:"18:00",driverLicense:"",specialRequests:""}),[l,c]=v.useState({}),[u,d]=v.useState(!1),[f,h]=v.useState(null),[x,y]=v.useState(!1),[w,b]=v.useState(null);if(!t||!n)return null;const g=S=>{const{name:L,value:O}=S.target;if(o({...a,[L]:O}),l[L]&&c({...l,[L]:""}),L==="pickupDate"||L==="dropoffDate"){const X=L==="pickupDate"?O:a.pickupDate,A=L==="dropoffDate"?O:a.dropoffDate;if(X&&A&&n.id){const B=Oe.checkDateConflict(n.id,X,A);h(B)}}},m=()=>{if(!a.pickupDate||!a.dropoffDate)return 0;const S=new Date(a.pickupDate),L=new Date(a.dropoffDate),O=Math.abs(L-S);return Math.ceil(O/(1e3*60*60*24))||1},p=()=>{const S=m(),L=n.price*S,O=L*.16;return{basePrice:L,tax:O,total:L+O,days:S}},k=()=>{const S={};if(a.pickupLocation||(S.pickupLocation="Pickup location is required"),a.dropoffLocation||(S.dropoffLocation="Dropoff location is required"),a.pickupDate||(S.pickupDate="Pickup date is required"),a.dropoffDate||(S.dropoffDate="Dropoff date is required"),a.pickupDate&&a.dropoffDate){const L=new Date(a.pickupDate),O=new Date(a.dropoffDate),X=new Date;X.setHours(0,0,0,0),L<X&&(S.pickupDate="Pickup date cannot be in the past"),O<=L&&(S.dropoffDate="Dropoff date must be after pickup date"),f!=null&&f.hasConflict&&(S.dropoffDate="Car is not available for these dates")}return a.driverLicense||(S.driverLicense="Driver license number is required"),c(S),Object.keys(S).length===0},P=async S=>{if(S.preventDefault(),!!k()){d(!0);try{const L=p(),O={carId:n.id,carName:n.name,carImage:n.image,...a,basePrice:L.basePrice,tax:L.tax,totalPrice:L.total,days:L.days},X=await Oe.createBooking(O,s);X.success?(b(X.booking),y(!0)):c({general:X.error})}catch{c({general:"Booking failed. Please try again."})}finally{d(!1)}}},_=S=>{y(!1),e(),R(),alert(`🎉 Booking confirmed and payment successful!

Transaction ID: ${S.transactionId}

Your car rental is confirmed. You'll receive a confirmation email shortly with pickup instructions.`)},N=()=>{y(!1)},R=()=>{o({pickupLocation:"",dropoffLocation:"",pickupDate:"",dropoffDate:"",pickupTime:"09:00",dropoffTime:"18:00",driverLicense:"",specialRequests:""}),h(null),b(null)};if(!i)return r.jsx("div",{className:"modal-overlay",onClick:e,children:r.jsxs("div",{className:"booking-modal",onClick:S=>S.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:e,children:"×"}),r.jsxs("div",{className:"auth-required",children:[r.jsx("h3",{children:"🔐 Login Required"}),r.jsx("p",{children:"You must be signed in to make a booking. Please create an account or sign in to continue."}),r.jsxs("div",{className:"auth-benefits",children:[r.jsx("h4",{children:"Benefits of creating an account:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"✓ Track your bookings in real-time"}),r.jsx("li",{children:"✓ Access booking history"}),r.jsx("li",{children:"✓ Faster checkout for future rentals"}),r.jsx("li",{children:"✓ Exclusive member discounts"}),r.jsx("li",{children:"✓ Priority customer support"})]})]}),r.jsx("button",{className:"btn-primary",onClick:e,children:"Sign In / Create Account"})]})]})});const E=p();return r.jsxs("div",{className:"modal-overlay",onClick:e,children:[r.jsxs("div",{className:"booking-modal",onClick:S=>S.stopPropagation(),children:[r.jsx("button",{className:"modal-close",onClick:e,children:"×"}),r.jsxs("div",{className:"booking-header",children:[r.jsx("img",{src:n.image,alt:n.name,className:"booking-car-image"}),r.jsxs("div",{className:"booking-car-info",children:[r.jsx("h3",{children:n.name}),r.jsx("p",{className:"car-category",children:n.category}),r.jsxs("div",{className:"car-price",children:["KSH ",n.price.toLocaleString()," / day"]})]})]}),r.jsxs("form",{onSubmit:P,className:"booking-form",children:[l.general&&r.jsx("div",{className:"error-message general-error",children:l.general}),(f==null?void 0:f.hasConflict)&&r.jsxs("div",{className:"conflict-warning",children:[r.jsx("h4",{children:"⚠️ Booking Conflict Detected"}),r.jsxs("p",{children:["This car is not available for the selected dates. There's an overlap with an existing booking from ",(T=f.conflicts[0])==null?void 0:T.pickupDate," to ",(j=f.conflicts[0])==null?void 0:j.dropoffDate,"."]}),r.jsx("p",{children:"Please select different dates or choose another vehicle."})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Rental Details"}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pickupLocation",children:"Pickup Location"}),r.jsxs("select",{id:"pickupLocation",name:"pickupLocation",value:a.pickupLocation,onChange:g,className:l.pickupLocation?"error":"",required:!0,children:[r.jsx("option",{value:"",children:"Select pickup location"}),ar.map((S,L)=>r.jsx("option",{value:S,children:S},L))]}),l.pickupLocation&&r.jsx("span",{className:"error-message",children:l.pickupLocation})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"dropoffLocation",children:"Dropoff Location"}),r.jsxs("select",{id:"dropoffLocation",name:"dropoffLocation",value:a.dropoffLocation,onChange:g,className:l.dropoffLocation?"error":"",required:!0,children:[r.jsx("option",{value:"",children:"Select dropoff location"}),ar.map((S,L)=>r.jsx("option",{value:S,children:S},L))]}),l.dropoffLocation&&r.jsx("span",{className:"error-message",children:l.dropoffLocation})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pickupDate",children:"Pickup Date"}),r.jsx("input",{type:"date",id:"pickupDate",name:"pickupDate",value:a.pickupDate,onChange:g,min:new Date().toISOString().split("T")[0],className:l.pickupDate?"error":"",required:!0}),l.pickupDate&&r.jsx("span",{className:"error-message",children:l.pickupDate})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"pickupTime",children:"Pickup Time"}),r.jsx("input",{type:"time",id:"pickupTime",name:"pickupTime",value:a.pickupTime,onChange:g})]})]}),r.jsxs("div",{className:"form-row",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"dropoffDate",children:"Dropoff Date"}),r.jsx("input",{type:"date",id:"dropoffDate",name:"dropoffDate",value:a.dropoffDate,onChange:g,min:a.pickupDate||new Date().toISOString().split("T")[0],className:l.dropoffDate?"error":"",required:!0}),l.dropoffDate&&r.jsx("span",{className:"error-message",children:l.dropoffDate})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"dropoffTime",children:"Dropoff Time"}),r.jsx("input",{type:"time",id:"dropoffTime",name:"dropoffTime",value:a.dropoffTime,onChange:g})]})]})]}),r.jsxs("div",{className:"form-section",children:[r.jsx("h4",{children:"Driver Information"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"driverLicense",children:"Driver License Number"}),r.jsx("input",{type:"text",id:"driverLicense",name:"driverLicense",value:a.driverLicense,onChange:g,placeholder:"Enter your license number",className:l.driverLicense?"error":"",required:!0}),l.driverLicense&&r.jsx("span",{className:"error-message",children:l.driverLicense})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"specialRequests",children:"Special Requests (Optional)"}),r.jsx("textarea",{id:"specialRequests",name:"specialRequests",value:a.specialRequests,onChange:g,placeholder:"Any special requirements or requests...",rows:"3"})]})]}),E.days>0&&!(f!=null&&f.hasConflict)&&r.jsxs("div",{className:"pricing-summary",children:[r.jsx("h4",{children:"Pricing Summary"}),r.jsxs("div",{className:"pricing-details",children:[r.jsxs("div",{className:"pricing-row",children:[r.jsxs("span",{children:["Rental (",E.days," days × KSH ",n.price.toLocaleString(),")"]}),r.jsxs("span",{children:["KSH ",E.basePrice.toLocaleString()]})]}),r.jsxs("div",{className:"pricing-row",children:[r.jsx("span",{children:"VAT (16%)"}),r.jsxs("span",{children:["KSH ",E.tax.toLocaleString()]})]}),r.jsxs("div",{className:"pricing-row total",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["KSH ",E.total.toLocaleString()]})]})]}),r.jsx("div",{className:"booking-notice",children:r.jsxs("p",{children:[r.jsx("strong",{children:"Next Step:"})," After submitting this booking, you'll be taken to secure payment to confirm your reservation instantly."]})})]}),r.jsx("button",{type:"submit",className:"btn-primary booking-submit",disabled:u||E.days===0||(f==null?void 0:f.hasConflict),children:u?"Processing...":`Continue to Payment (KSH ${E.total.toLocaleString()})`})]})]}),r.jsx(Cx,{isOpen:x,onClose:N,booking:w,onPaymentSuccess:_})]})};const Px=()=>{const{toasts:t,removeToast:e}=Vl();return t.length===0?null:r.jsx("div",{className:"toast-container",children:t.map(n=>r.jsx(Tx,{toast:n,onRemove:e},n.id))})},Tx=({toast:t,onRemove:e})=>{const n=()=>{e(t.id)},s=()=>{var a;(a=t.action)!=null&&a.callback&&t.action.callback(),e(t.id)},i=()=>t.icon?t.icon:{success:"✅",error:"❌",warning:"⚠️",info:"ℹ️",booking:"🚗",payment:"💳",message:"💬",reminder:"⏰"}[t.type]||"ℹ️";return r.jsxs("div",{className:`toast-item toast-${t.type}`,children:[r.jsxs("div",{className:"toast-content",children:[r.jsx("div",{className:"toast-icon",children:i()}),r.jsxs("div",{className:"toast-text",children:[t.title&&r.jsx("div",{className:"toast-title",children:t.title}),r.jsx("div",{className:"toast-message",children:t.message})]}),t.action&&r.jsx("button",{className:"toast-action",onClick:s,children:t.action.label}),r.jsx("button",{className:"toast-close",onClick:n,"aria-label":"Close notification",children:"✕"})]}),t.autoRemove!==!1&&r.jsx("div",{className:"toast-progress",style:{animationDuration:`${t.duration||5e3}ms`}})]})};const Ax=()=>r.jsx("footer",{className:"footer",children:r.jsxs("div",{className:"container",children:[r.jsxs("div",{className:"footer-content",children:[r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"🚗 RentKenya"}),r.jsx("p",{children:"Premium car rentals for your Kenyan adventure. From city drives to safari expeditions across beautiful Kenya."}),r.jsxs("div",{className:"social-links",children:[r.jsx("a",{href:"#","aria-label":"Facebook",children:"📘"}),r.jsx("a",{href:"#","aria-label":"Twitter",children:"🐦"}),r.jsx("a",{href:"#","aria-label":"Instagram",children:"📷"}),r.jsx("a",{href:"#","aria-label":"WhatsApp",children:"💬"})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Quick Links"}),r.jsxs("ul",{children:[r.jsx("li",{children:r.jsx(me,{to:"/",children:"Home"})}),r.jsx("li",{children:r.jsx(me,{to:"/cars",children:"Our Cars"})}),r.jsx("li",{children:r.jsx(me,{to:"/about",children:"About Us"})}),r.jsx("li",{children:r.jsx(me,{to:"/contact",children:"Contact"})})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Services"}),r.jsxs("ul",{children:[r.jsx("li",{children:r.jsx("a",{href:"#economy",children:"Economy Cars"})}),r.jsx("li",{children:r.jsx("a",{href:"#luxury",children:"Luxury Vehicles"})}),r.jsx("li",{children:r.jsx("a",{href:"#safari",children:"Safari Packages"})}),r.jsx("li",{children:r.jsx("a",{href:"#airport",children:"Airport Transfers"})})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Contact Info"}),r.jsxs("ul",{children:[r.jsx("li",{children:"📞 +254 700 000 000"}),r.jsx("li",{children:"📧 info@rentkenya.com"}),r.jsx("li",{children:"📍 Westlands, Nairobi"}),r.jsx("li",{children:"🕒 24/7 Service"})]})]}),r.jsxs("div",{className:"footer-section",children:[r.jsx("h4",{children:"Popular Locations"}),r.jsxs("ul",{children:[r.jsx("li",{children:"JKIA Airport"}),r.jsx("li",{children:"Nairobi CBD"}),r.jsx("li",{children:"Mombasa"}),r.jsx("li",{children:"Maasai Mara"})]})]})]}),r.jsxs("div",{className:"footer-bottom",children:[r.jsx("p",{children:"© 2024 RentKenya. All rights reserved. | Made with ❤️ in Kenya"}),r.jsxs("div",{className:"footer-links",children:[r.jsx("a",{href:"#privacy",children:"Privacy Policy"}),r.jsx("a",{href:"#terms",children:"Terms of Service"}),r.jsx("a",{href:"#cookies",children:"Cookie Policy"})]})]})]})});function Rx(){const[t,e]=v.useState(!1),[n,s]=v.useState("login"),[i,a]=v.useState(!1),[o,l]=v.useState(null),c=(d="login")=>{s(d),e(!0)},u=d=>{l(d),a(!0)};return r.jsx(Iv,{children:r.jsx(Mv,{children:r.jsx(Nv,{children:r.jsxs("div",{className:"app",children:[r.jsx($v,{onOpenAuth:c}),r.jsx("main",{children:r.jsxs(Zg,{children:[r.jsx(At,{path:"/",element:r.jsx(zv,{onBookCar:u})}),r.jsx(At,{path:"/about",element:r.jsx(Kv,{})}),r.jsx(At,{path:"/contact",element:r.jsx(Wv,{})}),r.jsx(At,{path:"/cars",element:r.jsx(Vv,{onBookCar:u})}),r.jsx(At,{path:"/cars/:id",element:r.jsx(fx,{onBookCar:u})}),r.jsx(At,{path:"/dashboard",element:r.jsx(mx,{})}),r.jsx(At,{path:"/admin",element:r.jsx(kx,{})})]})}),r.jsx(Ax,{}),r.jsx(Nx,{isOpen:t,onClose:()=>e(!1),initialMode:n}),r.jsx(Ex,{isOpen:i,onClose:()=>a(!1),car:o}),r.jsx(Px,{})]})})})})}Oa.createRoot(document.getElementById("root")).render(r.jsx(Uu.StrictMode,{children:r.jsx(Rx,{})}));
